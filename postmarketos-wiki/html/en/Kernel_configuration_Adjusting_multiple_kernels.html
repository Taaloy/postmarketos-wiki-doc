<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Kernel configuration/Adjusting multiple kernels - postmarketOS Wiki</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.39.8">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="postmarketOS Wiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Wiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Kernel_configuration_Adjusting_multiple_kernels rootpage-Kernel_configuration_Adjusting_multiple_kernels skin-vector-2022 action-view skin--responsive vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-language-alert-in-sidebar-disabled vector-feature-sticky-header-disabled vector-feature-sticky-header-edit-disabled vector-feature-table-of-contents-disabled vector-feature-visual-enhancement-next-disabled">
<div class="mw-page-container">
	<span id="top-page"></span>
	<a class="mw-jump-link" href="#content">Jump to content</a>
	<div class="mw-page-container-inner">
		<input type="checkbox" id="mw-sidebar-checkbox" class="mw-checkbox-hack-checkbox">
		<header class="mw-header">
			<div class="mw-header-aside">
			<label id="mw-sidebar-button" class="mw-checkbox-hack-button mw-ui-icon mw-ui-button mw-ui-quiet mw-ui-icon-element" for="mw-sidebar-checkbox" role="button" aria-controls="mw-panel" data-event-name="ui.sidebar" tabindex="0" title="Main menu">
				<span>Toggle sidebar</span>
			</label>
			
<a href="../en/Main_Page.html" class="mw-logo">
	<img class="mw-logo-icon" src="/logo_50x50.svg" alt="" aria-hidden="true" height="50" width="50">
	<span class="mw-logo-container">
		<strong class="mw-logo-wordmark">postmarketOS Wiki</strong>
	</span>
</a>

			</div>
			<div class="mw-header-content">
			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-collapses  vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<a href="../Special:Search.html" title="Search postmarketOS Wiki [f]" accesskey="f" class="mw-ui-button mw-ui-quiet mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-search search-toggle">
		<span>Search</span>
	</a>
	
	<div>
		<form action="/index.php" id="searchform" class="vector-search-box-form">
			<div id="simpleSearch" class="vector-search-box-inner" data-search-loc="header-moved">
				<input class="vector-search-box-input" type="search" name="search" placeholder="Search postmarketOS Wiki" aria-label="Search postmarketOS Wiki" autocapitalize="sentences" title="Search postmarketOS Wiki [f]" accesskey="f" id="searchInput">
				<input type="hidden" name="title" value="Special:Search">
				<input id="mw-searchButton" class="searchButton mw-fallbackSearchButton" type="submit" name="fulltext" title="Search the pages for this text" value="Search">
				<input id="searchButton" class="searchButton" type="submit" name="go" title="Go to a page with this exact name if it exists" value="Go">
			</div>
		</form>
	</div>
</div>

			<nav class="vector-user-links" aria-label="Personal tools" role="navigation">
	

<div id="p-vector-user-menu-overflow" class="vector-menu mw-portlet mw-portlet-vector-user-menu-overflow vector-user-menu-overflow">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"><li id="pt-createaccount-2" class="user-links-collapsible-item mw-list-item"><a href="../Special:RequestAccount.html"><span>Request account</span></a></li></ul>
		
	</div>
</div>

	

<div id="p-personal" class="vector-menu mw-portlet mw-portlet-personal vector-user-menu vector-user-menu-logged-out vector-menu-dropdown" title="More options">
	<input type="checkbox" id="p-personal-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-personal" class="vector-menu-checkbox">
	<label id="p-personal-label" for="p-personal-checkbox" class="vector-menu-heading mw-ui-button mw-ui-quiet mw-ui-icon mw-ui-icon-element mw-ui-icon-ellipsis mw-ui-icon-wikimedia-ellipsis">
		<span class="vector-menu-heading-label">Personal tools</span>
	</label>
	<div class="vector-menu-content">
		<div class="vector-user-menu-create-account"><a href="/index.php?title=Special:CreateAccount&amp;returnto=Kernel+configuration%2FAdjusting+multiple+kernels" class="vector-menu-content-item user-links-collapsible-item" title="You are encouraged to create an account and log in; however, it is not mandatory"><span class="mw-ui-icon mw-ui-icon-userAdd mw-ui-icon-wikimedia-userAdd"></span> <span>Create account</span></a></div>
<div class="vector-user-menu-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=Kernel+configuration%2FAdjusting+multiple+kernels" class="vector-menu-content-item vector-menu-content-item-login" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span class="mw-ui-icon mw-ui-icon-logIn mw-ui-icon-wikimedia-logIn"></span> <span>Log in</span></a></div>

		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

</nav>

			</div>
		</header>
		<div class="vector-sidebar-container ">
			</div>
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<input type="checkbox" id="vector-toc-collapsed-checkbox" class="mw-checkbox-hack-checkbox">
		<div class="mw-table-of-contents-container">
			<div class="vector-sticky-toc-container mw-sticky-header-element">
				<nav id="mw-panel-toc" class="sidebar-toc" role="navigation" aria-labelledby="sidebar-toc-label" data-event-name="ui.sidebar-toc">
	<div id="sidebar-toc-label" class="sidebar-toc-header">
		<p class="sidebar-toc-title">
		Contents
		<button class="vector-toc-uncollapse-button">move to sidebar</button>
		<button class="vector-toc-collapse-button">hide</button>
		</p>
	</div>
	<ul class="sidebar-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="sidebar-toc-list-item sidebar-toc-level-1">
			<a href="#top-page" class="sidebar-toc-link">
				<div class="sidebar-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Requesting_a_change" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Requesting_a_change">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1</span>Requesting a change</div>
			</a>
			
				<button aria-controls="toc-Requesting_a_change-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Requesting a change subsection
				</button>
			
			<ul id="toc-Requesting_a_change-sublist" class="sidebar-toc-list">
				<li id="toc-1._Verifying" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#1._Verifying">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.1</span>1. Verifying</div>
			</a>
			
			<ul id="toc-1._Verifying-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-2._Discussing" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#2._Discussing">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.2</span>2. Discussing</div>
			</a>
			
			<ul id="toc-2._Discussing-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-3._Waiting" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#3._Waiting">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">1.3</span>3. Waiting</div>
			</a>
			
			<ul id="toc-3._Waiting-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Applying_changes" class="sidebar-toc-list-item sidebar-toc-level-1 sidebar-toc-list-item-expanded">
			<a class="sidebar-toc-link" href="#Applying_changes">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2</span>Applying changes</div>
			</a>
			
				<button aria-controls="toc-Applying_changes-sublist" class="mw-ui-icon mw-ui-icon-wikimedia-expand mw-ui-icon-small sidebar-toc-toggle">
					Toggle Applying changes subsection
				</button>
			
			<ul id="toc-Applying_changes-sublist" class="sidebar-toc-list">
				<li id="toc-1._Adjust_kconfigcheck.toml" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#1._Adjust_kconfigcheck.toml">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.1</span>1. Adjust kconfigcheck.toml</div>
			</a>
			
			<ul id="toc-1._Adjust_kconfigcheck.toml-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-2._Prepare_variables" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#2._Prepare_variables">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.2</span>2. Prepare variables</div>
			</a>
			
			<ul id="toc-2._Prepare_variables-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-3._Download_all_archives" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#3._Download_all_archives">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.3</span>3. Download all archives</div>
			</a>
			
			<ul id="toc-3._Download_all_archives-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-4._Get_rid_of_non-committed_diff_before_making_changes" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#4._Get_rid_of_non-committed_diff_before_making_changes">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.4</span>4. Get rid of non-committed diff before making changes</div>
			</a>
			
			<ul id="toc-4._Get_rid_of_non-committed_diff_before_making_changes-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-5._Adjust_all_kernel_config_files" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#5._Adjust_all_kernel_config_files">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.5</span>5. Adjust all kernel config files</div>
			</a>
			
			<ul id="toc-5._Adjust_all_kernel_config_files-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-6._Update_checksums_of_kernel_config_files" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#6._Update_checksums_of_kernel_config_files">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.6</span>6. Update checksums of kernel config files</div>
			</a>
			
			<ul id="toc-6._Update_checksums_of_kernel_config_files-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id='toc-7._Run_"pmbootstrap_kconfig_migrate"' class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#7._Run_%22pmbootstrap_kconfig_migrate%22">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.7</span>7. Run "pmbootstrap kconfig migrate"</div>
			</a>
			
			<ul id='toc-7._Run_"pmbootstrap_kconfig_migrate"-sublist' class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-8._Bump_pkgrels" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#8._Bump_pkgrels">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.8</span>8. Bump pkgrels</div>
			</a>
			
			<ul id="toc-8._Bump_pkgrels-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-9._Run_pmbootstrap_kconfig_check_locally" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#9._Run_pmbootstrap_kconfig_check_locally">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.9</span>9. Run pmbootstrap kconfig check locally</div>
			</a>
			
			<ul id="toc-9._Run_pmbootstrap_kconfig_check_locally-sublist" class="sidebar-toc-list">
			</ul>
		</li>
		<li id="toc-10._Create_the_merge_request" class="sidebar-toc-list-item sidebar-toc-level-2">
			<a class="sidebar-toc-link" href="#10._Create_the_merge_request">
				<div class="sidebar-toc-text">
				<span class="sidebar-toc-numb">2.10</span>10. Create the merge request</div>
			</a>
			
			<ul id="toc-10._Create_the_merge_request-sublist" class="sidebar-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
</nav>

			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" role="main" style="margin: 0">
				<a id="top"></a>
				<header class="mw-body-header">
				
				
					<label id="vector-toc-collapsed-button" class="mw-ui-button mw-ui-quiet mw-ui-icon mw-ui-icon-element mw-ui-icon-wikimedia-listBullet mw-checkbox-hack-button" for="vector-toc-collapsed-checkbox" role="button" aria-controls="toc-toggle-list" data-event-name="vector.toc-toggle-list" tabindex="0" title="Table of Contents">
						Toggle the table of contents
					</label>
				    <h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Kernel configuration/Adjusting multiple kernels</span></h1>
				</header>
				<nav class="vector-article-toolbar" aria-label="Tools" role="navigation">
					<div class="mw-article-toolbar-container">
						<div id="left-navigation">
							

<div id="p-associated-pages" class="vector-menu mw-portlet mw-portlet-associated-pages vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-nstab-main" class="selected mw-list-item"><a href="../en/Kernel_configuration_Adjusting_multiple_kernels.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new mw-list-item"><a href="/index.php?title=Talk:Kernel_configuration/Adjusting_multiple_kernels&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet vector-menu-dropdown">
	<input type="checkbox" id="p-variants-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-variants" class="vector-menu-checkbox" aria-label="Change language variant">
	<label id="p-variants-label" for="p-variants-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">English</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list"></ul>
		
	</div>
</div>

						</div>
						<div id="right-navigation" class="vector-collapsible ">
							

<div id="p-views" class="vector-menu mw-portlet mw-portlet-views vector-menu-tabs">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-view" class="selected mw-list-item"><a href="../en/Kernel_configuration_Adjusting_multiple_kernels.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="mw-list-item"><a href="/index.php?title=Kernel_configuration/Adjusting_multiple_kernels&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="mw-list-item"><a href="/index.php?title=Kernel_configuration/Adjusting_multiple_kernels&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

							

<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions emptyPortlet vector-menu-dropdown vector-has-collapsible-items" title="More options">
	<input type="checkbox" id="p-cactions-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-p-cactions" class="vector-menu-checkbox">
	<label id="p-cactions-label" for="p-cactions-checkbox" class="vector-menu-heading ">
		<span class="vector-menu-heading-label">More</span>
	</label>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Kernel_configuration_Adjusting_multiple_kernels.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Kernel_configuration/Adjusting_multiple_kernels&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Kernel_configuration/Adjusting_multiple_kernels&amp;action=history"><span>View history</span></a></li>
</ul>
		
	</div>
</div>

						</div>
					</div>
				</nav>
				<div id="bodyContent" class="vector-body" data-mw-ve-target-container>
					<div class="mw-body-subheader">
					        <div class="mw-indicators">
        </div>

					    <div id="siteSub" class="noprint">From postmarketOS Wiki</div>
					</div>
					
					
					
					<div id="mw-content-text" class="mw-body-content mw-content-ltr" lang="en" dir="ltr">
<div class="mw-parser-output">
<div id="contentSub" style="margin-top: -8px; margin-bottom: 18px;">
<span class="subpages">&lt; <a href="../en/Kernel_configuration.html" title="Kernel configuration">Kernel configuration</a></span>‎</div>
<p>This article has step-by-step instructions for getting kernel config options changed in multiple kernels, and for adjusting CI that it stays that way in the future. See <a href="../en/Kernel_configuration.html" title="Kernel configuration">Kernel configuration</a> for an overview.
</p>
<tocplace></tocplace>
<h2><span class="mw-headline" id="Requesting_a_change">Requesting a change</span></h2>
<h3><span class="mw-headline" id="1._Verifying">1. Verifying</span></h3>
<p>It is recommended that you verify that your proposed change works as expected with the kernel you use, before you start the discussion. See <a href="../en/Kernel_configuration_Adjusting_one_kernel.html" class="mw-redirect" title="Kernel configuration: Adjusting one kernel">Kernel configuration: Adjusting one kernel</a> for more information.
</p>
<h3><span class="mw-headline" id="2._Discussing">2. Discussing</span></h3>
<p>Create a new issue in <a href="../en/Pmaports.git.html" class="mw-redirect" title="Pmaports">pmaports</a> with the <i>Change Kernel Config</i> template (<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/5549">pmaports!5549</a>) and give people a bit of time to respond to the issue. You may additionally link to your issue in the <i>postmarketos-devel</i> <a href="../en/Matrix_and_IRC.html" title="Matrix and IRC">chat</a> and ask for input, so more people see it.
</p>
<h3><span class="mw-headline" id="3._Waiting">3. Waiting</span></h3>
<p>You can either wait for somebody to go through all issues with the <code>change-kernel-config</code> label (that your issue should have too if you used the proper template), where it was concluded that this change should be made. We plan to do this once a month or so (but no promises, as usually people are busy and have a lot of other tasks).
</p>
<p>Alternatively, you may do this yourself by following the steps below. Consider announcing it in the postmarketos-devel chat, so the work is not duplicated.
</p>
<h2><span class="mw-headline" id="Applying_changes">Applying changes</span></h2>
<p>As a starting point, we have the following - somewhat hacky, but working - approach based on what Luca wrote in <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/5544">pmaports!5544</a> (thanks a lot!). Over time we would like to have this simplified and possibly integrated into pmbootstrap (<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmbootstrap/-/issues/2190">pmbootstrap#2190</a>).
</p>
<p>Use fish shell and the <a rel="nofollow" class="external text" href="https://github.com/z3ntu/dotfiles/blob/master/scripts/usr/local/bin/pmos_changed_packages">pmos_changed_packages script</a>. 
</p>
<h3><span class="mw-headline" id="1._Adjust_kconfigcheck.toml">1. Adjust kconfigcheck.toml</span></h3>
<p>Go through all issues with the <code>change-kernel-config</code> label, review the discussions regarding whether it was decided to accept the change or not (or just do it if nobody commented and it looks reasonable). Apply all agreed on changes to <code>kconfigcheck.toml</code>.
</p>
<p>Run <code>pmbootstrap kconfig check</code>, if you did it right then it should complain now about kernels not having the new options set.
</p>
<h3><span class="mw-headline" id="2._Prepare_variables">2. Prepare variables</span></h3>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span><span class="nb">set</span> configs <span class="k">$(</span>pmb kconfig check -k --no-details <span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">|</span> grep -o <span class="s2">"config-[^ ]\+"</span><span class="k">)</span>
<span class="gp">$ </span><span class="nb">set</span> packages <span class="k">$(for</span> i <span class="k">in</span> <span class="nv">$configs</span><span class="p">;</span> <span class="nb">echo</span> <span class="nv">$i</span> <span class="p">|</span> sed <span class="s1">'s/config-\(.*\)\..*/linux-\1/'</span><span class="p">;</span> end<span class="k">)</span>
</pre></div>
<h3><span class="mw-headline" id="3._Download_all_archives">3. Download all archives</span></h3>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap checksum <span class="nv">$packages</span>
</pre></div>
<h3><span class="mw-headline" id="4._Get_rid_of_non-committed_diff_before_making_changes">4. Get rid of non-committed diff before making changes</span></h3>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span><span class="k">for</span> i <span class="k">in</span> <span class="nv">$packages</span><span class="p">;</span> pmbootstrap kconfig migrate <span class="nv">$i</span><span class="p">;</span> end
<span class="gp">$ </span>git add -A
<span class="gp">$ </span>git commit
</pre></div>
<h3><span class="mw-headline" id="5._Adjust_all_kernel_config_files">5. Adjust all kernel config files</span></h3>
<p>Use a shell line similar to the following. Note that you need to take care to enable dependencies, e.g. <code>DYNAMIC_FTRACE</code> actually needs <code>FTRACE</code> enabled too.
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span><span class="k">for</span> i <span class="k">in</span> <span class="nv">$configs</span><span class="p">;</span> <span class="nb">echo</span> -e  <span class="s2">"CONFIG_BT_HIDP=m\nCONFIG_DM_INTEGRITY=m\nCONFIG_DRM_USE_DYNAMIC_DEBUG=y\nCONFIG_DYNAMIC_DEBUG=y\nCONFIG_DYNAMIC_FTRACE=y\nCONFIG_HIDRAW=y\nCONFIG_JOYSTICK_XPAD=m\nCONFIG_NETFILTER_XT_MATCH_MARK=m\nCONFIG_NETFILTER_XT_MATCH_MULTIPORT=m\nCONFIG_UDF_FS=m\nCONFIG_USB_ANNOUNCE_NEW_DEVICES=y\nCONFIG_USB_HIDDEV=y\nCONFIG_USB_PRINTER=m\nCONFIG_XFS_FS=m"</span> &gt;&gt; device/*/*/<span class="nv">$i</span><span class="p">;</span> end
</pre></div>
<h3><span class="mw-headline" id="6._Update_checksums_of_kernel_config_files">6. Update checksums of kernel config files</span></h3>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap checksum <span class="k">$(</span>pmos_changed_packages<span class="k">)</span>
</pre></div>
<h3>
<span id="7._Run_.22pmbootstrap_kconfig_migrate.22"></span><span class="mw-headline" id='7._Run_"pmbootstrap_kconfig_migrate"'>7. Run "pmbootstrap kconfig migrate"</span>
</h3>
<p>Ensure that dependencies are set right etc.
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span><span class="k">for</span> i <span class="k">in</span> <span class="k">$(</span>pmos_changed_packages<span class="k">)</span><span class="p">;</span> yes <span class="s1">''</span> <span class="p">|</span> pmbootstrap kconfig migrate <span class="nv">$i</span><span class="p">;</span> end
</pre></div>
<h3><span class="mw-headline" id="8._Bump_pkgrels">8. Bump pkgrels</span></h3>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap pkgrel_bump <span class="k">$(</span>pmos_changed_packages<span class="k">)</span>
</pre></div>
<h3><span class="mw-headline" id="9._Run_pmbootstrap_kconfig_check_locally">9. Run pmbootstrap kconfig check locally</span></h3>
<p>Verify that everything is passing now:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap kconfig check
</pre></div>
<h3><span class="mw-headline" id="10._Create_the_merge_request">10. Create the merge request</span></h3>
<ul>
<li>Commit your changes.</li>
<li>If you modified many kernels, CI won't be able to build the kernels in time so put `[ci:skip-build]` in the commit message of the last commit. It will run <code>pmbootstrap kconfig check</code> in any case.</li>
<li>Open the merge request.</li>
<li>Add the <code>change-kernel-config</code> label.</li>
<li>Add lines to the MR description to fix related issues.</li>
<li>Time to celebrate, you are awesome!! :D</li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Pages_using_deprecated_source_tags.html" title="Category:Pages using deprecated source tags">Pages using deprecated source tags</a></li>
<li><a href="../en/Category:Technical_Reference.html" title="Category:Technical Reference">Technical Reference</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" role="contentinfo" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=Kernel_configuration/Adjusting_multiple_kernels&amp;oldid=62735">https://wiki.postmarketos.org/index.php?title=Kernel_configuration/Adjusting_multiple_kernels&amp;oldid=62735</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 7 September 2024, at 16:24.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/About_postmarketOS.html">About postmarketOS Wiki</a></li>
	<li id="footer-places-disclaimer"><a href="../en/PostmarketOS:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/"><img src="../poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="" width="88" height="31" loading="lazy"></a></li>
</ul>

</footer>

		</div>
	</div> 
</div> 

</body>
</html>
