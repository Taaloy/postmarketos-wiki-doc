<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>ST-Ericsson NovaThor U8500 - postmarketOS</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.34.2">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="postmarketOS (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ST-Ericsson_NovaThor_U8500 rootpage-ST-Ericsson_NovaThor_U8500 skin-vector action-view">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading" class="firstHeading" lang="en">ST-Ericsson NovaThor U8500</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From postmarketOS</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">ST-Ericsson NovaThor U8500</caption>
<tbody>
<tr class=""><td colspan="2" class="" style="text-align:center;">
<a href="../Phos-on-st-ericsson-href.jpg" class="image"><img alt="Phosh running on the ST-Ericsson U8500 HREF (Hardware Reference Design)" src="../Phos-on-st-ericsson-href.jpg" decoding="async" width="200" height="231" srcset="../300px-Phos-on-st-ericsson-href.jpg 1.5x ../400px-Phos-on-st-ericsson-href.jpg 2x"></a><br><span style="">Phosh running on the ST-Ericsson U8500 HREF (Hardware Reference Design)</span>
</td></tr>
<tr class="">
<th scope="row" style="text-align:left;">Manufacturer</th>
    <td class="" style="">
ST-Ericsson</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Name</th>
    <td class="" style="">
NovaThor U8500</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Architecture</th>
    <td class="" style="">
armv7</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">CPU</th>
    <td class="" style="">
2x 1 GHz ARM Cortex-A9</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPU</th>
    <td class="" style="">
ARM Mali-400 MP</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Year</th>
    <td class="" style="">
2011</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Process</th>
    <td class="" style="">
40nm</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Mainline</th>
    <td class="" style="">
yes</td>
</tr>
<tr><th colspan="2" class="" style="text-align:center;">Components</th></tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="SMP (bring up secondary CPU cores), CPU frequency scaling, CPUidle">CPU</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">UART</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="eMMC, SD cards, UFS, ...">Storage</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">USB</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Display</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPU</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Pinctrl</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">I²C</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Audio</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Hardware-accelerated video de/encoding">Video</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Thermal</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">WiFi</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Bluetooth</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Calls, SMS, Internet">Modem</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPS</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Camera</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Suspend</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<p><br>
</p>
<h2><span class="mw-headline" id="Devices_with_this_chipset">Devices with this chipset</span></h2>
<p>This chipset is used similarly in the following devices:
</p>
<table class="cargoTable noMerge sortable">
<thead><tr>
<th class="field_Device">Device</th>
<th class="field_Codename">Codename</th>
<th class="field_Mainline">Mainline</th>
</tr></thead>
<tbody>
<tr>
<td class="field_Device"><a href="../en/Samsung_Galaxy_Ace_2_(samsung-codina).html" title="Samsung Galaxy Ace 2 (samsung-codina)">Samsung Galaxy Ace 2 GT-I8160</a></td>
<td class="field_Codename">samsung-codina</td>
<td class="field_Mainline">Y</td>
</tr>
<tr>
<td class="field_Device"><a href="../en/Samsung_Galaxy_S_Advance_(samsung-janice).html" title="Samsung Galaxy S Advance (samsung-janice)">Samsung Galaxy S Advance GT-I9070</a></td>
<td class="field_Codename">samsung-janice</td>
<td class="field_Mainline">Y</td>
</tr>
<tr>
<td class="field_Device"><a href="../en/Samsung_Galaxy_S_III_mini_(samsung-golden).html" title="Samsung Galaxy S III mini (samsung-golden)">Samsung Galaxy S III mini GT-I8190</a></td>
<td class="field_Codename">samsung-golden</td>
<td class="field_Mainline">Y</td>
</tr>
<tr>
<td class="field_Device"><a href="../en/Samsung_Galaxy_Xcover_2_(samsung-skomer).html" title="Samsung Galaxy Xcover 2 (samsung-skomer)">Samsung Galaxy Xcover 2 GT-S7710</a></td>
<td class="field_Codename">samsung-skomer</td>
<td class="field_Mainline">Y</td>
</tr>
<tr>
<td class="field_Device"><a href="../en/Sony_Xperia_P_(sony-nypon).html" title="Sony Xperia P (sony-nypon)">Sony Xperia P</a></td>
<td class="field_Codename">sony-nypon</td>
<td class="field_Mainline"></td>
</tr>
<tr>
<td class="field_Device"><a href="../en/Sony_Xperia_U_(sony-kumquat).html" title="Sony Xperia U (sony-kumquat)">Sony Xperia U</a></td>
<td class="field_Codename">sony-kumquat</td>
<td class="field_Mainline"></td>
</tr>
</tbody>
</table>
<p>Other devices using this chipset but not yet ported to postmarketOS (remove once they are ported):
</p>
<ul>
<li>Samsung have released a number of phones on the platform:
<ul>
<li>Samsung GT-I9060 codename Godin is mentioned in the Codina kernel drop but appears to never have been produced, instead another device has the model numer GT-I9060.</li>
<li>Samsung Galaxy Beam GT-I8530 codename Gavini (<a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/Samsung_Galaxy_Beam_i8530">wikipedia</a>, <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm/boot/dts/ste-ux500-samsung-gavini.dts">upstream devicetree</a>)</li>
<li>Samsung Galaxy Exhibit T599 (a variant of GT-I8160/Codina according to the code dumps, "Codina T-mobile" is mentioned, <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm/boot/dts/ste-ux500-samsung-codina-tmo.dts">upstream devicetree</a>)</li>
<li>Samsung Galaxy Amp SGH-I407 codename Kyle (<a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm/boot/dts/ste-ux500-samsung-kyle.dts">upstream devicetree</a>)</li>
<li>Samsung Galaxy 070 YP-GI2 codename Hendrix seems to have been intended as a NovaThor U8500 device but ended up using a Marvell chip. This is not confirmed.</li>
<li>Sources also mentions, at one point, a product called "Venus" and at another point "Ricco" but no other information exists.</li>
</ul>
</li>
<li>Sony refers to the U8500 platform as "RioGrande" and there is one kernel for all the Sony devices: <a rel="nofollow" class="external text" href="https://github.com/AndroidOpenSourceXperia/android_kernel_sony_u8500">RioGrande kernel source code</a>
<ul>
<li>Sony Xperia Go (sony-lotus) (<a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/Sony_Xperia_Go">wikipedia</a>)</li>
<li>Sony Xperia Sola (sony-pepper) (<a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/Sony_Xperia_sola">wikipedia</a>)</li>
</ul>
</li>
<li>Motorola XT760</li>
<li>HTC Desire 400 dual SIM</li>
<li>HTC One SU, ST &amp; SC</li>
<li>HTC Sensation Z710t</li>
</ul>
<h2><span class="mw-headline" id="Charging">Charging</span></h2>
<div class="thumb tright"><div class="thumbinner" style="width:302px;">
<a href="../Samsung-universal-charger.jpg" class="image"><img alt="" src="../Samsung-universal-charger.jpg" decoding="async" width="300" height="300" class="thumbimage" srcset="../450px-Samsung-universal-charger.jpg 1.5x ../universal-charger.jpg 2x"></a>  <div class="thumbcaption">
<div class="magnify"><a href="../Samsung-universal-charger.jpg" class="internal" title="Enlarge"></a></div>Samsung universal charger of a type that can charge the Li-Ion batteries for all U8500 mobile phones.</div>
</div></div>
<p>The U8500 has a companion power management IC (PMIC, also known as analog baseband, AB) ASIC called AB8500/AB8505 that takes care of the charging. In difference from many other charging ICs this chip is not autonoumous and will not charge the phone without the right software to instruct it, respond to interrupts etc. So in short: the phone will not charge unless the kernel has started and provides the right driver for the charger portions of the AB8500.
</p>
<p>The mainline kernel for the U8500 supports battery charging as of v5.18-rc1.
</p>
<p>To work with these phones an extra battery and an external battery charger can be helpful: if your battery depletes completely before you recharge it you have a problem.
</p>
<p><a rel="nofollow" class="external text" href="https://www.wish.com/product/58a9a5a13661365289c8bf9b?share=web">This type of charger at Wish</a> can charge all of these batteries. It is a noname product simply named "Multi-connector USB Battery charger" that originates in China and often found in webstores such as Aliexpress or Wish. The charger comes with a US plug, so you may additionally need a US-to-european power converter to use it.
</p>
<h2><span class="mw-headline" id="Suspend">Suspend</span></h2>
<p>Suspend-to-RAM works and can be tested by:
</p>
<pre>  echo mem &gt; /sys/power/state
</pre>
<p>The system will become uninteractive until woken up by some event such as touchscreen, buttons etc. (If any of these do not wake up the system each driver and config needs to be augmented such that it will.) If nothing else works the power button will generate a wake-up event.
</p>
<h2><span class="mw-headline" id="Audio">Audio</span></h2>
<p>As stated <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/2779#note_794276875">here</a>, getting Audio work requires more work. linusw made some <a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/linusw/linux-stericsson.git/log/?h=ux500-audio-rewrite">not yet working experiments</a>.
</p>
<h2><span class="mw-headline" id="Modem">Modem</span></h2>
<p>The modem used in the U8500 SoC was developed by Nokia. In 2010 Nokia sold their wireless modem division to Renesas, who since has developed and supported this modem.
</p>
<p>The vendor main source code for the modem interface <a rel="nofollow" class="external text" href="https://github.com/linusw/u8500/tree/Samsung-SGH-I407-Kyle/drivers/modem">can be found here</a>. The vendor kernel also contains the driver in <a rel="nofollow" class="external text" href="https://github.com/linusw/u8500/blob/Samsung-SGH-I407-Kyle/drivers/net/u8500_shrm.c">drivers/net/u8500_shrm.c</a> (shared memory) and include/linux/modem/*.
</p>
<p><a rel="nofollow" class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm/boot/dts/ste-db8500.dtsi">The U8500 DTS</a> has the reserved memory areas for the modem defined: private, shared and trace memory.
</p>
<p>The U8500 then uses Phonet to talk to the modem, so the userspace stack should be similar to what the Nokia n900 is using so one can draw inspiration from there. IP will probably work out-of-the-box with Phonet but maybe some AT commands from userspace are needed too.
</p>
<p>Audio phonecalls will require a special quirk to the audio driver once it is working (for very low latency) but should be doable as well.
</p>
<h2><span class="mw-headline" id="Released_Samsung_U8500_Models">Released Samsung U8500 Models</span></h2>
<p>These are the known existing Samsung U8500 models in release order.
</p>
<table class="wikitable">
<caption>Samsung U8500 devices names and introduction dates
</caption>
<tbody>
<tr>
<th>Product name</th>
<th>Model</th>
<th>Codename</th>
<th>Releasedate</th>
<th>Notes
</th>
</tr>
<tr>
<td>Galaxy Ace 2</td>
<td>GT-I8160</td>
<td>Codina</td>
<td>February 2012</td>
<td>GT-I8160P variant with NFC exists
</td>
</tr>
<tr>
<td>Galaxy S Advance</td>
<td>GT-I9070</td>
<td>Janice</td>
<td>April 2012</td>
<td>GT-I9070P variant with NFC exists
</td>
</tr>
<tr>
<td>Galaxy Beam</td>
<td>GT-I8530</td>
<td>Gavini</td>
<td>July 2012</td>
<td>
</td>
</tr>
<tr>
<td>Galaxy S III mini</td>
<td>GT-I8190N</td>
<td>Golden</td>
<td>November 2012</td>
<td>
</td>
</tr>
<tr>
<td>Galaxy Xcover 2</td>
<td>GT-S7710</td>
<td>Skomer</td>
<td>March 2013</td>
<td>
</td>
</tr>
<tr>
<td>Galaxy Exhibit</td>
<td>SGH-T599</td>
<td>Codina TMO</td>
<td>May 2013</td>
<td>Made exclusively for T-Mobile
</td>
</tr>
<tr>
<td>Galaxy Amp</td>
<td>SGH-I407</td>
<td>Kyle</td>
<td>June 2013</td>
<td>Made exclusively for AT&amp;T Aio Wireless
</td>
</tr>
</tbody>
</table>
<h2><span class="mw-headline" id="Upstream_code_trees">Upstream code trees</span></h2>
<p>The GPL code drops for various U8500 devices can be found on the branches in this git tree:
</p>
<p><a rel="nofollow" class="external free" href="https://github.com/linusw/u8500/branches">https://github.com/linusw/u8500/branches</a>
</p>
<h2><span class="mw-headline" id="USB-to-serial_Cable_for_Samsung_NovaThor_U8500_devices">USB-to-serial Cable for Samsung NovaThor U8500 devices</span></h2>
<p>The Samsung U8500 models use a modified microUSB cable for <a href="../en/Serial_debugging.html" title="Serial debugging">serial debugging</a>. As per the <a href="../en/Serial_debugging:Cable_schematics.html" title="Serial debugging:Cable schematics">cable schematics page</a> the <a href="../en/Micro-USB_Interface_Controller.html" title="Micro-USB Interface Controller">Micro-USB Interface Controller</a> the required resistance used on all Samsung U8500 models is 619KΩ to GND.
</p>
<h2><span class="mw-headline" id="Flash_and_SDcard_Layout_on_Samsung_NovaThor_U8500_Devices">Flash and SDcard Layout on Samsung NovaThor U8500 Devices</span></h2>
<p>When working with these devices, we install U-Boot, the kernel (<code>zImage</code>) and a small initial ramdisk (<code>initrd</code>) in the internal flash of the phone. The installation is done in three steps:
</p>
<ol>
<li>U-Boot is installed on the Samsung U8500 devices using the Samsung open source flashing tool <b>Heimdall</b>. This is the open source reimplementation of Samsungs <i>Odin</i> tool. This has to be done manually <i>before</i> you can use <code>pmbootstrap</code>.</li>
<li>The kernel and inital ramdisk is then installed using U-Boot. After installing U-Boot, any time we want to reflash the phone internal eMMC kernel image and initial ramdisk, we do this using U-Boot's <i>fastboot</i> implementation, and on the host side we use the Android <b>fastboot</b> command-line tool to do the reflashing of new kernels. <code>pmbootstrap flash</code> will hide these details, but it's good to know.</li>
<li>The root filesystem for PostmarketOS will be stored on the external SDcard, so you will need to set up an SDcard using <code>pmbootstrap install --sdcard=/dev/nnnn</code>.</li>
</ol>
<h2><span class="mw-headline" id="U-Boot_on_Samsung_NovaThor_U8500_Devices">U-Boot on Samsung NovaThor U8500 Devices</span></h2>
<p>There is a port of (mainline) U-Boot for U8500 currently maintained at: <a rel="nofollow" class="external free" href="https://github.com/stericsson-mainline/u-boot">https://github.com/stericsson-mainline/u-boot</a>
</p>
<p>It contains a board called <code>stemmy</code>, which is intended for all Samsung devices using U8500 (see above). It provides a simple Android fastboot interface as replacement for Samsung's proprietary flashing procedure. As a device tree compatible bootloader, it can be also used to boot mainline without any hacks in the Linux kernel.
</p>
<table role="text container" style="color: inherit; background-color: #f6efe5; border: 1px solid #ac6600; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Note" src="../Reference_icon.svg" decoding="async" title="Note" width="20" height="20" srcset="../Reference_icon.svg 1.5x ../Reference_icon.svg 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">
<b>Note:</b> In this case, U-Boot does <b>not</b> replace the Samsung bootloader. Instead, it is packaged into an Android boot image (if necessary), and flashed to the Android boot partition replacing the Linux kernel. The kernel will be loaded from an offset into the boot partition.</td>
</tr></tbody></table>
<h3><span class="mw-headline" id="Installation">Installation</span></h3>
<p>Heimdall <a rel="nofollow" class="external text" href="https://github.com/Benjamin-Dobell/Heimdall">can be found here</a> but is packaged into most major Linux distributions such as Debian, Ubuntu and Fedora.
</p>
<p>Pre-built U-boot images are available from: <a rel="nofollow" class="external free" href="https://github.com/novathor-mainline/u-boot/releases">https://github.com/novathor-mainline/u-boot/releases</a>. Alternatively, you can build it from source. See <a href="#Building">#Building</a> below.
</p>
<p>Choose the Android boot image (<code>u-boot.img</code>) or the raw binary (<code>u-boot.bin</code>), depending on your device. Most newer devices (e.g. <code>samsung-golden</code> and <code>samsung-skomer</code>) use the Android boot image format, but some older (e.g. <code>samsung-janice</code>) use the raw binary.
</p>
<table class="wikitable">
<caption>U-boot binary format per phone
</caption>
<tbody>
<tr>
<th>Product name</th>
<th>Model</th>
<th>Codename</th>
<th>U-Boot</th>
<th>Notes
</th>
</tr>
<tr>
<td>Galaxy Ace 2</td>
<td>GT-I8160</td>
<td>Codina</td>
<td><code>u-boot.bin</code></td>
<td>
</td>
</tr>
<tr>
<td>Galaxy S Advance</td>
<td>GT-I9070</td>
<td>Janice</td>
<td><code>u-boot.bin</code></td>
<td>
</td>
</tr>
<tr>
<td>Galaxy Beam</td>
<td>GT-I8530</td>
<td>Gavini</td>
<td><code>u-boot.bin</code></td>
<td>
</td>
</tr>
<tr>
<td>Galaxy S III mini</td>
<td>GT-I8190N</td>
<td>Golden</td>
<td><code>u-boot.img</code></td>
<td>
</td>
</tr>
<tr>
<td>Galaxy Xcover 2</td>
<td>GT-S7710</td>
<td>Skomer</td>
<td><code>u-boot.img</code></td>
<td>
</td>
</tr>
<tr>
<td>Galaxy Exhibit</td>
<td>SGH-T599</td>
<td>Codina TMO</td>
<td><code>u-boot.bin</code></td>
<td>
</td>
</tr>
<tr>
<td>Galaxy Amp</td>
<td>SGH-I407</td>
<td>Kyle</td>
<td><code>u-boot.img</code></td>
<td>
</td>
</tr>
</tbody>
</table>
<p>To get into "custom OS install" hold volume down and home key down and press power on. The phone will vibrate and issue a warning ("A custom OS can cause critical problems...") if you are OK with this risk, press volume up to continue. When the phone shows the Android robot and says <b>Downloading...</b> you can use Heimdall to download U-Boot.
</p>
<p>Install it normally to the boot partition replacing the default Kernel (notice capital K on Kernel):
</p>
<pre>heimdall flash --Kernel u-boot.[bin|img]
</pre>
<p>If this doesn't work, especially if you have messages in the console such as "Android recovery image size=322449, ramdisk size=0" then the phone is not booting from the <tt>Kernel</tt> partition but from <tt>Kernel2</tt> so try this instead:
</p>
<pre>heimdall flash --Kernel2 u-boot.[bin|img]
</pre>
<h3><span class="mw-headline" id="Usage">Usage</span></h3>
<p>U-Boot will try to boot an Android boot image from the <code>boot</code> partition by default. Pressing one of the volume keys during boot allows to change that behavior:
</p>
<ul>
<li>
<code>Volume Down</code>: Enter Fastboot mode</li>
<li>
<code>Volume Up</code>: Boot into recovery (<code>recovery</code> partition)</li>
</ul>
<table role="text container" style="color: inherit; background-color: #f6efe5; border: 1px solid #ac6600; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Note" src="../Reference_icon.svg" decoding="async" title="Note" width="20" height="20" srcset="../Reference_icon.svg 1.5x ../Reference_icon.svg 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">
<b>Note:</b> Since the <code>boot</code> partition is already used for U-Boot itself, U-Boot reads the Android boot image with 1 MB offset from the <code>boot</code> partition. This offset is applied automatically when using <code>fastboot flash boot boot.img</code>.</td>
</tr></tbody></table>
<p>In Fastboot mode, kernels can be directly booted from RAM using <code>fastboot boot ...</code>. Alternatively, partitions can be flashed using <code>fastboot flash &lt;partition&gt; ...</code>.
</p>
<p>U-Boot itself can be also flashed from U-Boot using <code>fastboot flash u-boot u-boot.img</code> (in this case, it will not apply the offset for the <code>boot</code> partition).
</p>
<h3><span class="mw-headline" id="Building">Building</span></h3>
<p><b>Requirements:</b> ARM cross compiler (e.g. <code>arm-none-eabi-gcc</code>)
</p>
<pre>export CROSS_COMPILE=arm-none-eabi-
make stemmy_defconfig
make
</pre>
<p>If your device uses Android boot images, package it into an Android boot image:
</p>
<pre>mkbootimg --kernel u-boot.bin --base=0x00000000 --kernel_offset=0x00100000 --ramdisk_offset=0x02000000 --tags_offset=0x00000100 --output=u-boot.img
</pre>
<h2><span class="mw-headline" id="Kernel_Hacking_on_NovaThor_U8500">Kernel Hacking on NovaThor U8500</span></h2>
<p>These sections detail some tricks needed when working on kernel development.
</p>
<p>Some details can be found at the external page for [<a rel="nofollow" class="external text" href="https://dflund.se/~triad/krad/ux500/">Ux500 mainline work</a>].
</p>
<h3><span class="mw-headline" id="Assembling_a_Custom_boot.img">Assembling a Custom boot.img</span></h3>
<p>When used with PostmarketOS the <code>boot.img</code> that you flash into the phone should come out of the <a href="../en/Installing_pmbootstrap.html" title="Installing pmbootstrap">pmbootstrap</a> utility, but if you for some reason want to assemble the <code>boot.img</code> using some prefabricated kernel, ramdisk and device tree, the process is like this this:
</p>
<pre>  mkbootimg --kernel zImage --ramdisk initrd --second foo.dtb --base=0x00000000 --kernel_offset=0x00008000 --ramdisk_offset=0x02000000 --second_offset=0x00f00000 --tags_offset=0x00000100 --output=boot.img
</pre>
<p>Or using <code>abootimg</code>:
</p>
<pre>  abootimg --create boot.img -k zImage -r initrd -s foo.dtb -c "pagesize=0x800" -c "kerneladdr=0x8000" -c "ramdiskaddr=0x02000000" -c "secondaddr=0x00f00000" -c "tagsaddr=0x100"
</pre>
<p>Notice how this puts the device tree binary <code>foo.dtb</code> into the "second bootloader firmware".
</p>
<p>If you are booting PostmarkeOS with a custom kernel, the <code>initrd</code> you pass must better be a PostmarkeOS initramfs. This can be found in a path like <code>.local/var/pmbootstrap/chroot_native/mnt/rootfs_samsung-skomer/boot/initramfs-postmarketos-stericsson</code>. The initrd is used to set up, detect and load the rest of the rootfs from the SDcard volume so it is pretty vital.
</p>
<h3><span class="mw-headline" id="Flashing_a_Custom_Kernel">Flashing a Custom Kernel</span></h3>
<p>You install a custom kernel into the device by booting into U-Boot as described above, go to <b>fastboot</b> mode by holding down <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Power</span> + <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Volume Down</span> or by holding <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Volume Down</span> while you insert the serial cable. Then you can flash a new kernel image like this:
</p>
<pre>  fastboot flash boot boot.img
</pre>
<p>After this reboot the phone and your new kernel should start.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li>This chipset has a [<a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/NovaThor">wikipedia page</a>]</li></ul>
</div></div>
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Socs.html" title="Category:Socs">Socs</a></li></ul>
</div></div>
		<div class="visualClear"></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=ST-Ericsson_NovaThor_U8500&amp;oldid=28412">https://wiki.postmarketos.org/index.php?title=ST-Ericsson_NovaThor_U8500&amp;oldid=28412</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 8 June 2022, at 19:53.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../en/About_postmarketOS.html" class="mw-redirect" title="PostmarketOS:About">About postmarketOS</a></li>
								<li id="footer-places-disclaimer"><a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-mobileview"><a href="https://wiki.postmarketos.org/index.php?title=ST-Ericsson_NovaThor_U8500&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"></a>					</li>
										<li id="footer-poweredbyico">
						<a href="https://www.mediawiki.org/"><img src="../poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="" width="88" height="31"></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		

</body>
</html>
