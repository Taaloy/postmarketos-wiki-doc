<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Google Pixel 3 (google-blueline) - postmarketOS</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.34.2">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="postmarketOS (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Google_Pixel_3_google-blueline rootpage-Google_Pixel_3_google-blueline skin-vector action-view">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading" class="firstHeading" lang="en">Google Pixel 3 (google-blueline)</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From postmarketOS</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Google Pixel 3</caption>
<tbody>
<tr class=""><td colspan="2" class="" style="text-align:center;">
<a href="../Google-blueline.png" class="image"><img alt="Google Pixel 3" src="../Google-blueline.png" decoding="async" width="200" height="236" srcset="../300px-Google-blueline.png 1.5x ../400px-Google-blueline.png 2x"></a><br><span style="">Google Pixel 3</span>
</td></tr>
<tr class="">
<th scope="row" style="text-align:left;">Manufacturer</th>
    <td class="" style="">
Google</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Name</th>
    <td class="" style="">
Pixel 3</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Codename</th>
    <td class="" style="">
google-blueline</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Released</th>
    <td class="" style="">
2018</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Category</th>
    <td class="" style="">
testing</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Original software</th>
    <td class="" style="">
Android</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="The version the device was shipped with.">Original version</abbr></th>
    <td class="" style="">
9.0</td>
</tr>
<tr><th colspan="2" class="" style="text-align:center;">Hardware</th></tr>
<tr class="">
<th scope="row" style="text-align:left;">Chipset</th>
    <td class="" style="">
<a href="../en/Qualcomm_Snapdragon_845_(SDM845).html" title="Qualcomm Snapdragon 845 (SDM845)">Qualcomm Snapdragon 845 (SDM845)</a>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">CPU</th>
    <td class="" style="">
Octa-core (4x2.5 GHz Kryo 385 Gold &amp; 4x1.6 GHz Kryo 385 Silver)</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPU</th>
    <td class="" style="">
Adreno 630</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Display</th>
    <td class="" style="">
1080 x 2160 P-OLED, HDR</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Storage</th>
    <td class="" style="">
64GB/128GB</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Memory</th>
    <td class="" style="">
4GB</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Architecture</th>
    <td class="" style="">
aarch64</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<p><br>
</p>
<p><br>
</p>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Features</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="After connecting the device with USB to your PC, you can connect to it via telnet (initramfs) or SSH (booted system).">USB Networking</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="It is possible to flash the device with `pmbootstrap flasher`.">Flashing</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Touchscreen</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Display works. Ideally with sleep mode and brightness control.">Display</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">WiFi</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Full disk encryption and unlocking with osk-sdl.">FDE</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Instead of a Linux kernel fork, it is possible to run mainline.">Mainline</abbr></th>
    <td class="" style="">
<div class="feature feature-partial">Partial</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Charging and battery level reporting works">Battery</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">3D Acceleration</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Audio playback, microphone, headset and buttons.">Audio</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Bluetooth</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Camera</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPS</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Mobile data</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">SMS</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Calls</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">USB OTG</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">NFC</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Sensors</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Auto screen rotation works in desktops e.g. Phosh or Plasma Mobile">Accelerometer</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Magnetometer</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ambient Light</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Proximity</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Also known as flip cover sensor">Hall Effect</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Barometer</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Power Sensor</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Misc</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;">Camera Flash</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Keyboard</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Touchpad</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Full-sized USB-A port works (Usually applicable to SBCs and laptops).">USB-A</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Video and audio output with HDMI or Display Port works.">HDMI/DP</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ir TX</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ir RX</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Stylus</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Haptics</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ethernet</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">FOSS bootloader</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<p><br>
</p>
<p><br>
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="Contributors">Contributors</span></h2>
<ul><li>hreikin</li></ul>
<h2><span class="mw-headline" id="Users_owning_this_device">Users owning this device</span></h2>
<div style="-webkit-column-count: 2; -moz-column-count: 2; column-count: 2;"><ul style="margin-top: 0;">
<li><a href="../User:BEEDELLROKEJULIANLOCKHART.html" title="User:BEEDELLROKEJULIANLOCKHART">BEEDELLROKEJULIANLOCKHART</a></li>
<li>
<a href="../User:Daudix.html" title="User:Daudix">Daudix</a> (<span class="cargoFieldName">Notes:</span> 64GB, Unlocked)</li>
<li>
<a href="../User:DrGit.html" title="User:DrGit">DrGit</a> (<span class="cargoFieldName">Notes:</span> 128GB, Verizon locked bootloader :()</li>
<li>
<a href="../User:Kalube.html" title="User:Kalube">Kalube</a> (<span class="cargoFieldName">Notes:</span> pmOS port TODO)</li>
<li><a href="../User:Rom4nik.html" title="User:Rom4nik">Rom4nik</a></li>
</ul></div>
<p><br>
</p>
<h2><span class="mw-headline" id="How_to_enter_flash_mode">How to enter flash mode</span></h2>
<p>The Pixel 3, like all Google Pixel/Nexus devices, uses Fastboot as the flashing protocol.
</p>
<p>To enter Fastboot mode, hold Volume Down while powering on the device. Let go of Volume Down when "Fastboot mode" displays on the screen.
</p>
<p>Alternatively, if connected to a pc then you can also use <code>adb reboot bootloader</code>.
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>The steps below should allow you to flash postmarketOS to a Pixel 3 and boot to a point that telnet can be accessed.
</p>
<ul>
<li>Run <code>pmbootstrap init</code> and then delete the generated linux-google-blueline folder</li>
<li>Edit the APKBUILD in the device-google-blueline folder to remove the <code>linux-google-blueline</code> and <code>mesa-dri-gallium</code> dependencies and insert the <code>linux-postmarketos-qcom-sdm845</code> and <code>soc-qcom-sdm845</code> dependencies</li>
<li>Clone the sdm845 mainline kernel and create a new branch for your changes, copy the DTS file available in the <a rel="nofollow" class="external text" href="https://git.linaro.org/people/vinod.koul/kernel.git/?h=pixel/dsc_v2">Linaro kernel</a> to the sdm845 mainline kernel and edit the Makefile to include it, comment out the following nodes to ensure the kernel compiles successfully: <code>&amp;sde_te_active</code>, <code>&amp;sde_te_suspend</code>, <code>&amp;dsi0</code> and <code>&amp;dsi0_phy</code>
</li>
<li>Add the following kernel configuration options to the sdm845.config file:</li>
</ul>
<pre># Pixel 3
CONFIG_EXT4_FS=y
CONFIG_KERNEL_GZIP=y
CONFIG_CGROUPS=y
CONFIG_ANDROID_PARANOID_NETWORK=n
CONFIG_PFT=n
CONFIG_USE_VFB=n
CONFIG_KINETO_GAN=n
CONFIG_SAMSUNG_TUI=n
CONFIG_SEC_RESTRICT_ROOTING=n
CONFIG_TZDEV=n
</pre>
<ul>
<li>Source <code>envkernel.sh</code> and run <code>make defconfig sdm845.config</code> and <code>make -j`nproc`</code> to compile the kernel, run <code>pmbootstrap build --envkernel linux-postmarketos-qcom-sdm845</code>, <code>pmbootstrap checksum device-google-blueline</code> and <code>pmbootstrap build device-google-blueline</code>
</li>
<li>Run <code>pmbootstrap install --split</code>, <code>pmbootstrap initfs hook_add debug-shell</code> and <code>pmbootstrap export</code>
</li>
<li>Clone this <a rel="nofollow" class="external text" href="https://gitlab.com/zhuowei/dtbo-google-crosshatch-mainline">DTBO repository</a> from the crosshatch port</li>
<li>Edit the dtboimg.cfg file with the following changes:</li>
</ul>
<pre>sdm845-c1-dvt1.1.dtbo
	id=0x215
	rev=0x2
</pre>
<ul><li>Edit the sdm845-c1-dvt1.1.dts file with the following changes before running build.sh to create the dtbo.img:</li></ul>
<pre>/dts-v1/;

/ {
	model = "Google Inc. MSM sdm845 C1 DVT1.1";
	compatible = "google,b1c1-sdm845", "qcom,sdm845";
	qcom,board-id = &lt;0x00021505 0&gt;;
};
</pre>
<ul><li>Run the following commands to flash everything to the phone, You have to flash the dtbo.img and then the kernel normally for the telnet shell and then use fastboot to flash the boot and root images created with <code>pmbootstrap install --split</code> otherwise nothing shows up in telnet when running <code>blkid</code>:</li></ul>
<pre>fastboot set_active b
fastboot flash dtbo_b /path/to/dtbo.img
pmbootstrap flasher flash_kernel
fastboot flash vendor /path/to/exported/google-blueline-boot.img
fastboot flash userdata /path/to/exported/google-blueline-root.img
</pre>
<ul>
<li>The phone boots and you should get the white screen with Google logo, sometimes it has a graphical glitch and others it doesn't. The SSH isn't working, it should have an IP and you can ping it but you can't connect by SSH. You can however connect to a shell with the telnet command; <code>$ telnet 172.16.42.1</code>
</li>
<li>Run <code>blkid</code>, the vendor and userdata partitions should show up with the <code>pmOS_boot</code> and <code>pmOS_root</code> labels</li>
<li>Source <code>/etc/deviceinfo</code> and <code>init_functions.sh</code> before running <code>mount_subpartitions</code> which seems to complete with no errors reported in the shell or via dmesg but could be unsuccessful as nothing new is mounted when looking with <code>mount</code> or <code>blkid</code>
</li>
<li>Running <code>mount_boot_partition</code> shows an error in telnet but not in dmesg however if you run <code>mount -o ro -t ext2 /dev/sda10 /boot</code> you should get the following errors output to the shell and dmesg:</li>
</ul>
<pre>/ # mount_subpartitions
/ # mount_boot_partition
Mount boot partition (/dev/sda10) to  (read-only)
mount: mounting /dev/sda10 on  failed: No such file or directory
/ # mount -o ro -t ext2 /dev/sda10 /boot
mount: mounting /dev/sda10 on /boot failed: Invalid argument
</pre>
<pre>[  118.355939] EXT4-fs (sda10): mounting ext2 file system using the ext4 subsystem
[  118.363336] EXT4-fs (sda10): bad block size 1024
</pre>
<ul><li>You can successfully mount the root partition with <code>mount_root_partition</code> and it is viewable in <code>/sysroot</code>.</li></ul>
<p>Here are some links to the config files and logs, scroll down for multiple files:
</p>
<ul>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/-/snippets/2189490">dmesg and pmOS_init.log</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/-/snippets/2189510">defconfig, sdm845.config and generated .config files from kernel compilation</a></li>
</ul>
<h2><span class="mw-headline" id="Status">Status</span></h2>
<p>Work is ongoing, flashing works and telnet can be accessed during boot.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/issues/1229">pmaports#1229</a> Pixel 3 (google-blueline) porting: progress and questions</li>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/-/snippets/2189490">dmesg and pmOS_init.log</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/-/snippets/2177610">Device Map</a></li>
</ul>
<p><br>
</p>
</div></div>
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Devices.html" title="Category:Devices">Devices</a></li>
<li><a href="../en/Category:Android.html" title="Category:Android">Android</a></li>
<li><a href="../en/Category:Google.html" title="Category:Google">Google</a></li>
</ul>
</div></div>
		<div class="visualClear"></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=Google_Pixel_3_(google-blueline)&amp;oldid=40286">https://wiki.postmarketos.org/index.php?title=Google_Pixel_3_(google-blueline)&amp;oldid=40286</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 23 April 2023, at 09:54.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../en/About_postmarketOS.html" class="mw-redirect" title="PostmarketOS:About">About postmarketOS</a></li>
								<li id="footer-places-disclaimer"><a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-mobileview"><a href="https://wiki.postmarketos.org/index.php?title=Google_Pixel_3_(google-blueline)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"></a>					</li>
										<li id="footer-poweredbyico">
						<a href="https://www.mediawiki.org/"><img src="../poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="" width="88" height="31"></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		

</body>
</html>
