<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   Magnetometer - postmarketOS
  </title>
  <link href="../PostmarketOSWikiOffline.css" rel="stylesheet"/>
  <meta content="" name="ResourceLoaderDynamicStyles"/>
  <meta content="MediaWiki 1.34.2" name="generator"/>
  <link href="/favicon.ico" rel="shortcut icon"/>
  <link href="/opensearch_desc.php" rel="search" title="postmarketOS (en)" type="application/opensearchdescription+xml"/>
  <link href="https://wiki.postmarketos.org/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
  <link href="https://creativecommons.org/licenses/by-sa/4.0/" rel="license"/>
  <link href="/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="postmarketOS Atom feed" type="application/atom+xml"/>
 </head>
 <body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Magnetometer rootpage-Magnetometer skin-vector action-view">
  <div class="mw-body" id="content" role="main" style="margin: 0">
   <a id="top">
   </a>
   <div class="mw-indicators mw-body-content">
   </div>
   <h1 class="firstHeading" id="firstHeading" lang="en">
    Magnetometer
   </h1>
   <div class="mw-body-content" id="bodyContent">
    <div class="noprint" id="siteSub">
     From postmarketOS
    </div>
    <div id="contentSub">
    </div>
    <div id="jump-to-nav">
    </div>
    <a class="mw-jump-link" href="#mw-head">
     Jump to navigation
    </a>
    <a class="mw-jump-link" href="#p-search">
     Jump to search
    </a>
    <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
     <div class="mw-parser-output">
      <p>
       <b>
        Magnetometers
       </b>
       are a specific type of
       <a href="../en/Sensors.html" title="Sensors">
        sensor
       </a>
       found in mobile phones in order to provide compass functionality to map applications: whereas a
       <a class="new" href="/index.php?title=GPS&amp;action=edit&amp;redlink=1" title="GPS (page does not exist)">
        GPS
       </a>
       (GNSS) will only tell you where you are, a compass can tell you where you are facing.
      </p>
      <p>
       However: magnetometers are not compasses. A magnetometer provides a three-dimensional vector of the Earth:s magnetic field. This vector is called the
       <i>
        inclination
       </i>
       or
       <i>
        magnetic dip
       </i>
       of the magnetic field. In the north these will point mostly down into the ground, in the south up in the air, and around the equator the field will be somewhat horizontal.
      </p>
      <p>
       The magnetic inclination is measured
       <i>
        relative to the plane of the magnetometer
       </i>
       , which is why it is important to get the mounting matrix of the magnetometer right. This mounting matrix is commonly determined by trial-and-error with a reference device such as a stock android phone and comparing the inclination vectors on the two devices.
      </p>
      <h2>
       <span class="mw-headline" id="Magnetometer_vs_Compass">
        Magnetometer vs Compass
       </span>
      </h2>
      <p>
       A
       <b>
        compass
       </b>
       in difference from a magnetometer, is a two-dimensional tool providing a red needle pointing north when held horizonal relative to Earth:s surface.
      </p>
      <p>
       To get from a three-dimensional inclination vector to a two-dimensional vector to the north, we need information from an
       <a class="new" href="/index.php?title=Accelerometer&amp;action=edit&amp;redlink=1" title="Accelerometer (page does not exist)">
        accelerometer
       </a>
       , as this determines how the device is held relative the center of gravity of the Earth. If the accelerometer reports 1G (~9.82 Newton) on the Z axis and 0 on the X and Y axis, the device is perfectly horizontal.
      </p>
      <p>
       To get from the inclination to e.g. compass-north, you need to perform projection of the inclination on the plane of the device. This is done using linear algebra. The process is called
       <i>
        sensor fusion
       </i>
       . In Linux, userspace does this fusion work. In Android, a three-dimensional
       <i>
        geomagnetic rotation vector
       </i>
       is calculated by fusing the magnetic inclination with the accelerometer.
      </p>
      <h2>
       <span class="mw-headline" id="Links">
        Links
       </span>
      </h2>
      <ul>
       <li>
        <a class="external text" href="https://en.wikipedia.org/wiki/Magnetic_dip" rel="nofollow">
         Wikipedias article on magnetic dip
        </a>
       </li>
       <li>
        <a class="external text" href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/devicetree/bindings/iio/mount-matrix.txt" rel="nofollow">
         Mounting matrix device tree bindings
        </a>
       </li>
      </ul>
     </div>
    </div>
    <div class="catlinks" data-mw="interface" id="catlinks">
     <div class="mw-normal-catlinks" id="mw-normal-catlinks">
      <a href="../Special:Categories.html" title="Special:Categories">
       Category
      </a>
      :
      <ul>
       <li>
        <a href="../en/Category:Hardware.html" title="Category:Hardware">
         Hardware
        </a>
       </li>
      </ul>
     </div>
    </div>
    <div class="visualClear">
    </div>
   </div>
  </div>
  <div id="footer" role="contentinfo" style="margin: 0">
   <ul id="footer-info">
    <li>
     Retrieved from "
     <a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=Magnetometer&amp;oldid=30062">
      https://wiki.postmarketos.org/index.php?title=Magnetometer&amp;oldid=30062
     </a>
     "
    </li>
    <li id="footer-info-lastmod">
     This page was last edited on 8 August 2022, at 12:19.
    </li>
    <li id="footer-info-copyright">
     Content is available under
     <a class="external" href="https://creativecommons.org/licenses/by-sa/4.0/" rel="nofollow">
      Creative Commons Attribution-ShareAlike
     </a>
     unless otherwise noted.
    </li>
    <br/>
   </ul>
   <ul id="footer-places">
    <li id="footer-places-privacy">
     <a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">
      Privacy policy
     </a>
    </li>
    <li id="footer-places-about">
     <a class="mw-redirect" href="../en/About_postmarketOS.html" title="PostmarketOS:About">
      About postmarketOS
     </a>
    </li>
    <li id="footer-places-disclaimer">
     <a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">
      Disclaimers
     </a>
    </li>
    <li id="footer-places-mobileview">
     <a class="noprint stopMobileRedirectToggle" href="https://wiki.postmarketos.org/index.php?title=Magnetometer&amp;mobileaction=toggle_view_mobile">
      Mobile view
     </a>
    </li>
   </ul>
   <ul class="noprint" id="footer-icons">
    <li id="footer-copyrightico">
     <a href="https://creativecommons.org/licenses/by-sa/4.0/">
      <img alt="Creative Commons Attribution-ShareAlike" height="31" src="../cc-by-sa.png" width="88"/>
     </a>
    </li>
    <li id="footer-poweredbyico">
     <a href="https://www.mediawiki.org/">
      <img alt="Powered by MediaWiki" height="31" src="../poweredby_mediawiki_88x31.png" srcset="" width="88"/>
     </a>
    </li>
   </ul>
   <div style="clear: both;">
   </div>
  </div>
 </body>
</html>
