<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>PINE64 Pinebook Pro (pine64-pinebookpro) - postmarketOS</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.34.2">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="postmarketOS (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-PINE64_Pinebook_Pro_pine64-pinebookpro rootpage-PINE64_Pinebook_Pro_pine64-pinebookpro skin-vector action-view">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading" class="firstHeading" lang="en">PINE64 Pinebook Pro (pine64-pinebookpro)</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From postmarketOS</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">PINE64 Pinebook Pro</caption>
<tbody>
<tr class=""><td colspan="2" class="" style="text-align:center;">
<a href="../Pine-pinebookpro.jpg" class="image"><img alt="The Pinebook Pro running Sway" src="../Pine-pinebookpro.jpg" decoding="async" width="200" height="133" srcset="../300px-Pine-pinebookpro.jpg 1.5x ../400px-Pine-pinebookpro.jpg 2x"></a><br><span style="">The Pinebook Pro running Sway</span>
</td></tr>
<tr class="">
<th scope="row" style="text-align:left;">Manufacturer</th>
    <td class="" style="">
PINE64</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Name</th>
    <td class="" style="">
Pinebook Pro</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Codename</th>
    <td class="" style="">
pine64-pinebookpro</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Released</th>
    <td class="" style="">
2019</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Category</th>
    <td class="" style="">
community</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Original software</th>
    <td class="" style="">
Linux</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="The version the device was shipped with.">Original version</abbr></th>
    <td class="" style="">
4.4.x</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">postmarketOS kernel</th>
    <td class="" style="">
5.14</td>
</tr>
<tr><th colspan="2" class="" style="text-align:center;">Hardware</th></tr>
<tr class="">
<th scope="row" style="text-align:left;">Chipset</th>
    <td class="" style="">
<a href="../en/Rockchip_RK3399.html" title="Rockchip RK3399">Rockchip RK3399</a>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">CPU</th>
    <td class="" style="">
4x 1.5 GHz Cortex-A53 &amp; 2x 2Ghz Cortex-A72</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPU</th>
    <td class="" style="">
Mali-T860 MP4</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Storage</th>
    <td class="" style="">
64GB eMMC (Upgradable)</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Memory</th>
    <td class="" style="">
4 GB</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Architecture</th>
    <td class="" style="">
aarch64</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Type</th>
    <td class="" style="">
laptop</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Unixbench Whet/Dhry score</th>
    <td class="" style="">
2742.3</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Features</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="After connecting the device with USB to your PC, you can connect to it via telnet (initramfs) or SSH (booted system).">USB Networking</abbr></th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="It is possible to flash the device with `pmbootstrap flasher`.">Flashing</abbr></th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Touchscreen</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Display works. Ideally with sleep mode and brightness control.">Display</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">WiFi</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Full disk encryption and unlocking with osk-sdl.">FDE</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Instead of a Linux kernel fork, it is possible to run mainline.">Mainline</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Charging and battery level reporting works">Battery</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">3D Acceleration</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Audio playback, microphone, headset and buttons.">Audio</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Bluetooth</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Camera</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPS</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Mobile data</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">SMS</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Calls</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="USB On-The-Go or USB-C Role switching">USB OTG</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Near Field Communication">NFC</abbr></th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Sensors</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Auto screen rotation works in desktops e.g. Phosh or Plasma Mobile">Accelerometer</abbr></th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Sensor to measure magnetism">Magnetometer</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ambient Light</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Proximity</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Also known as flip cover sensor">Hall Effect</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Sensor to measure air pressure">Barometer</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Sensor to monitor current, voltage and power. Not fuel gauge!">Power Sensor</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Misc</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;">Camera Flash</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Keyboard</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Touchpad</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Full-sized USB-A port works (Usually applicable to SBCs and laptops).">USB-A</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Video and audio output with HDMI or Display Port works.">HDMI/DP</abbr></th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ir TX</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ir RX</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Stylus</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Haptics</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ethernet</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">FOSS bootloader</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<p><br>
</p>
<p><br>
</p>
<p><br>
</p>
<h3><span class="mw-headline" id="Contributors">Contributors</span></h3>
<ul><li><i><a href="../User:MartijnBraam.html" title="User:MartijnBraam">MartijnBraam</a></i></li></ul>
<h3><span class="mw-headline" id="Users_owning_this_device">Users owning this device</span></h3>
<div style="-webkit-column-count: 2; -moz-column-count: 2; column-count: 2;"><ul style="margin-top: 0;">
<li>
<a href="../User:Alexeymin.html" title="User:Alexeymin">Alexeymin</a> (<span class="cargoFieldName">Notes:</span> Running postmarketOS)</li>
<li>
<a href="../User:Anjanmomi.html" title="User:Anjanmomi">Anjanmomi</a> (<span class="cargoFieldName">Notes:</span> main machine other than x230)</li>
<li>
<a href="../User:Bdju.html" title="User:Bdju">Bdju</a> (<span class="cargoFieldName">Notes:</span> on-the-go primary)</li>
<li>
<a href="../User:BenTheTechGuy.html" title="User:BenTheTechGuy">BenTheTechGuy</a> (<span class="cargoFieldName">Notes:</span> Running Debian)</li>
<li>
<a href="../User:Cralex.html" title="User:Cralex">Cralex</a> (<span class="cargoFieldName">Notes:</span> M2 Addon, Tow-Boot installed to SPI)</li>
<li>
<a href="../User:Danct12.html" title="User:Danct12">Danct12</a> (<span class="cargoFieldName">Notes:</span> current otg daily driver)</li>
<li><a href="../User:Flacks.html" title="User:Flacks">Flacks</a></li>
<li>
<a href="../User:Harryausten.html" title="User:Harryausten">Harryausten</a> (<span class="cargoFieldName">Notes:</span> with M.2 adapter)</li>
<li><a href="../User:Jem.html" title="User:Jem">Jem</a></li>
<li>
<a href="../User:No112.html" title="User:No112">No112</a> (<span class="cargoFieldName">Notes:</span> arguable daily driver)</li>
<li><a href="../User:Pbryan.html" title="User:Pbryan">Pbryan</a></li>
<li><a href="../User:QC8086.html" title="User:QC8086">QC8086</a></li>
<li>
<a href="../User:Retourmy.html" title="User:Retourmy">Retourmy</a> (<span class="cargoFieldName">Notes:</span> pmOS with Gnome DE)</li>
<li>
<a href="../User:Segfault.html" title="User:Segfault">Segfault</a> (<span class="cargoFieldName">Notes:</span> Has NVME and no eMMC, not running pmOS)</li>
<li>
<a href="../User:Tuxfanou.html" title="User:Tuxfanou">Tuxfanou</a> (<span class="cargoFieldName">Notes:</span> Current main computer)</li>
<li>
<a href="../User:Vincele.html" title="User:Vincele">Vincele</a> (<span class="cargoFieldName">Notes:</span> Void linux (musl), mainline kernel, tow-boot + OS on SD)</li>
<li>
<a href="../User:WhyNotHugo.html" title="User:WhyNotHugo">WhyNotHugo</a> (<span class="cargoFieldName">Notes:</span> Running a mix of pmOS and Alpine. Primary travel device.)</li>
</ul></div>
<p><br>
</p>
<h2><span class="mw-headline" id="Serial_console">Serial console</span></h2>
<p>The Pinebook Pro has a serial port on the headphone connector, it's enabled by removing the bottom cover of the laptop and setting the UART switch towards the touchpad.
</p>
<p>The uart is 1500000n8
</p>
<p>The pinout for the serial connector on the laptop side is:
</p>
<ul>
<li>Tip: RX</li>
<li>Ring: TX</li>
<li>Sleeve: GND</li>
</ul>
<p>The serial connection is 3.3V
</p>
<p>You can also buy the debug cable from <a rel="nofollow" class="external text" href="https://store.pine64.org">PINE64 Store</a>.
</p>
<h2><span class="mw-headline" id="Storage">Storage</span></h2>
<p>The SD card is /dev/mmcblk2 and the eMMC is /dev/mmcblk0
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>The recommended installation methods are building your own image with <a href="../en/Pmbootstrap.html" title="Pmbootstrap">pmbootstrap</a> and writing it to an SD card. Or flashing a pre-built installer image to the SD card, as described in the <a href="../en/Installation.html" title="Installation">installation</a> article.
</p>
<p>Note that the current version of the installer in the pre-built installer image isn't optimized for laptops. It will open a on-screen keyboard that fills the entire screen once you focus an input. It should be possible to go through the installation regardless. It's planned to fix this in future versions of the on-device installer. 
</p>
<h2><span class="mw-headline" id="Booting">Booting</span></h2>
<p>The Pinebook Pro boots using u-boot. The bootrom in the rk3399 soc will <a rel="nofollow" class="external text" href="https://wiki.pine64.org/wiki/RK3399_boot_sequence">look for u-boot on the SPI flash chip, then the eMMC and then the SD card slot</a>. It will boot the first functioning u-boot image it can find.
</p>
<p>There is also a work-in-progress graphical version of u-boot that can show the boot messages on the built-in display and present a menu for choosing which medium to boot. This u-boot build should also be able to boot
generic ARM64 UEFI linux installations.
</p>
<p>The 3 ways to boot postmarketOS on the Pinebook Pro
</p>
<h3><span class="mw-headline" id="Booting_from_SD">Booting from SD</span></h3>
<p>To boot from the SD the SPI bootloader and eMMC bootloader need to be disabled. Then the SoC will fallback to a bootloader on the SD card so postmarketOS can be fully booted from SD.
</p>
<p>The Pinebook Pro comes with an empty SPI chip from the factory so that doesn't need anything by default. To temporarily disable the eMMC booting you can open up the back cover and disable the eMMC switch on the main board or remove the eMMC chip from the socket.
</p>
<h3><span class="mw-headline" id="Booting_from_eMMC">Booting from eMMC</span></h3>
<p>To boot it from eMMC you have to overwrite the OS that's on the eMMC already. This is possible to do from an OS booted from SD with the steps above, or by removing the eMMC from the socket and using an pine64 eMMC USB reader to write postmarketOS to it the same way as an SD card.
</p>
<h3><span class="mw-headline" id="Booting_from_SPI">Booting from SPI</span></h3>
<p>This requires flashing u-boot to the SPI. After u-boot has been flashed the other boot options won't be tried anymore so try at your own risk.
</p>
<h2><span class="mw-headline" id="Updating_the_keyboard_and_touchpad_firmware">Updating the keyboard and touchpad firmware</span></h2>
<p>The default firmware in the keyboard controller and touchpad controller on the Pinebook Pro is not ideal, not all key combinations are possible (like the super key + arrow keys) and the mouse response is a bit sluggish and imprecise. Some PINE64 community members have made better firmware for the keyboard
controller and the touchpad controller which fix these issues. 
</p>
<p>The upgrade process requires a reboot between the steps and for ANSI models you need an external keyboard to continue the upgrade process (or being able to ssh into the laptop and run the second step).
</p>
<p>1. Identify the model of your Pinebook Pro.
</p>
<dl>
<dd>There's an ANSI and an ISO layout variant of the laptop, if your keyboard has the <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">\</span> button on the left beside the shift key its an ISO, the ANSI model has the key above the <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Enter</span> key.</dd>
<dd>You can also check the <a rel="nofollow" class="external text" href="https://commons.wikimedia.org/wiki/File:Physical_keyboard_layouts_comparison_ANSI_ISO.png">keyboard layout illustration on wikimedia</a>
</dd>
</dl>
<p>2. Download and build the firmware updater
</p>
<dl><dd><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> sudo apk add git curl vim alpine-sdk libusb-dev
<span class="gp">$</span> git clone https://github.com/dragan-simic/pinebook-pro-keyboard-updater.git
<span class="gp">$</span> <span class="nb">cd</span> pinebook-pro-keyboard-updater
<span class="gp">$</span> make
</pre></div></dd></dl>
<p>3. Run the first stage of the updater. Warning: The built-in keyboard might not function correctly after this step, make sure you have an external keyboard
</p>
<dl><dd><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="go">For ISO layout:</span>
<span class="gp">$</span> sudo ./updater step-1 iso
<span class="gp">$</span> sudo poweroff

<span class="go">For ANSI layout:</span>
<span class="gp">$</span> sudo ./updater step-1 ansi
<span class="gp">$</span> sudo poweroff
</pre></div></dd></dl>
<p>4. Turn the laptop back on and go back to the pinebook-pro-keyboard-updater directory. Then run the second stage of the updater
</p>
<dl><dd><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="go">For ISO layout:</span>
<span class="gp">$</span> sudo ./updater step-2 iso
<span class="gp">$</span> sudo poweroff

<span class="go">For ANSI layout:</span>
<span class="gp">$</span> sudo ./updater step-2 ansi
<span class="gp">$</span> sudo poweroff
</pre></div></dd></dl>
<p>5. The touchpad is now fully updated after turning the laptop back on. The firmware on the keyboard controller is still the latest vendor firmware and can now be upgraded to the community version that fixes the key combinations by running stage 3
</p>
<dl><dd><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="go">For ISO layout:</span>
<span class="gp">$</span> sudo ./updater flash-kb firmware/default_iso.hex

<span class="go">For ANSI layout:</span>
<span class="gp">$</span> sudo ./updater flash-kb firmware/default_ansi.hex
</pre></div></dd></dl>
<p>Congratulations, your firmware is now up-to-date.
</p>
<h2><span class="mw-headline" id="Flashing_u-boot_to_the_SPI">Flashing u-boot to the SPI</span></h2>
<p>This will write a copy of the u-boot from the OS image to the SPI flash chip in the laptop. Once this has been done it will always boot from the SPI u-boot instead of the u-boot on the eMMC or SD card. This u-boot has the option to select the boot medium you want and also supports booting from USB storage.
</p>
<table role="text container" style="color: inherit; background-color: #fee7e6; border: 1px solid #d33; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Icon" src="../Red_warning_icon.svg" decoding="async" title="Icon" width="20" height="20" srcset="../Red_warning_icon.svg 1.5x ../Red_warning_icon.svg 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">
<b>WARNING:</b> If this messes up you need a soldering iron to fix booting</td>
</tr></tbody></table>
<table role="text container" style="color: inherit; background-color: #fee7e6; border: 1px solid #d33; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Icon" src="../Red_warning_icon.svg" decoding="async" title="Icon" width="20" height="20" srcset="../Red_warning_icon.svg 1.5x ../Red_warning_icon.svg 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">
<b>WARNING:</b> Booting from this u-boot might be a problem for older kernels</td>
</tr></tbody></table>
<table role="text container" style="color: inherit; background-color: #fee7e6; border: 1px solid #d33; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Icon" src="../Red_warning_icon.svg" decoding="async" title="Icon" width="20" height="20" srcset="../Red_warning_icon.svg 1.5x ../Red_warning_icon.svg 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">
<b>WARNING:</b> Another warning just in case</td>
</tr></tbody></table>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> apk add flashrom
<span class="gp">$</span> sudo flashrom --programmer linux_mtd --write /usr/share/u-boot/pine64-rockpro64/u-boot.spiflash.bin
</pre></div>
<p>If you want to use u-boot from eMMC/SD again, erase SPI flash:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> sudo flashrom --programmer linux_mtd --erase
</pre></div>
<h2><span class="mw-headline" id="MPV_settings_for_smooth_playback">MPV settings for smooth playback</span></h2>
<p>Put the following in your <code>~/.config/mpv/mpv.conf</code>:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>profile=sw-fast
hwdec=auto</pre></div>
<h2><span class="mw-headline" id="Video_acceleration">Video acceleration</span></h2>
<table role="text container" style="color: inherit; background-color: #f6efe5; border: 1px solid #ac6600; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Note" src="../Reference_icon.svg" decoding="async" title="Note" width="20" height="20" srcset="../Reference_icon.svg 1.5x ../Reference_icon.svg 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">These instructions recommend using an unmaintained and outdated project. See: <a rel="nofollow" class="external free" href="https://gitlab.alpinelinux.org/alpine/aports/-/merge_requests/37411#note_254420">https://gitlab.alpinelinux.org/alpine/aports/-/merge_requests/37411#note_254420</a>
</td>
</tr></tbody></table>
<p>The rockchip rk3399 soc in the Pinebook Pro has a hardware video encoder and decoder called hantro, the open implementation supports mpeg2, h264 and h265 but not all profiles are supported on these codecs.
</p>
<p>The hardware decoder can be used in any media player that supports libva like vlc or mpv, the extra module that's needed is libva-v4l2-request <a rel="nofollow" class="external free" href="https://github.com/bootlin/libva-v4l2-request">https://github.com/bootlin/libva-v4l2-request</a> from bootlin.
After building and installing v4l2_request_drv_video.so the decoder can be enabled by adding these environment variables:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> <span class="nb">export</span> <span class="nv">LIBVA_DRIVER_NAME</span><span class="o">=</span>v4l2_request
<span class="gp">$</span> <span class="nb">export</span> <span class="nv">LIBVA_V4L2_REQUEST_VIDEO_PATH</span><span class="o">=</span>/dev/video1
<span class="gp">$</span> mpv --hwdec video-file.mp4
</pre></div>
<h2><span class="mw-headline" id="Trobleshooting">Trobleshooting</span></h2>
<h3><span class="mw-headline" id="No_audio_on_speakers">No audio on speakers</span></h3>
<p>If you can see the audio devices in pavucontrol/pulsemixer, and see volume meters "jumping" when playing audio, but no sound comes from speakers: launch alsamixer and try to unmute switches called "Left Headphone Mixer Left DAC" and "Right Headphone Mixer Right DAC". Turning these on made both speakers work (despite switches names saying headphones).
</p>
<h3><span class="mw-headline" id="Loud_whining_sound_when_using_speakers">Loud whining sound when using speakers</span></h3>
<p>If a loud whining sound comes from inside the laptop while using speakers, try changing the display brightness. The sound goes away with brightness at 50% or 100%. It seems to be a power management issue.
</p>
<h2><span class="mw-headline" id="Kconfig">Kconfig</span></h2>
<p>This is just for documentation, the kernel ships configured correctly.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span>CONFIG_ROCKCHIP_CDN_DP=n <span class="c1"># important, if this is set the display won't come up</span>
CONFIG_BRCMFMAC_SDIO=y   <span class="c1"># wifi</span>

<span class="c1"># Audio</span>
CONFIG_SND_SOC_SIMPLE_AMPLIFIER=y
CONFIG_SND_SOC_ROCKCHIP=y
CONFIG_SND_SOC_ES8316=y

<span class="c1"># Power</span>
CONFIG_CHARGER_GPIO=y
CONFIG_BATTERY_CW2015=y
CONFIG_TYPEC_FUSB302=y
CONFIG_REGULATOR_FAN53555=y
</pre></div>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/882">pmaports!882</a> Initial merge request</li>
<li><a rel="nofollow" class="external text" href="https://wiki.pine64.org/index.php/Pinebook_Pro">PINE64 Wiki page about PineBook Pro</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.manjaro.org/manjaro-arm/packages/core/linux/-/blob/master/PKGBUILD">Manjaro Kernel PKGBUILD</a></li>
</ul>
</div></div>
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Pages_with_syntax_highlighting_errors.html" title="Category:Pages with syntax highlighting errors">Pages with syntax highlighting errors</a></li>
<li><a href="../en/Category:Devices.html" title="Category:Devices">Devices</a></li>
<li><a href="/index.php?title=Category:Laptop&amp;action=edit&amp;redlink=1" class="new" title="Category:Laptop (page does not exist)">Laptop</a></li>
<li><a href="/index.php?title=Category:Linux&amp;action=edit&amp;redlink=1" class="new" title="Category:Linux (page does not exist)">Linux</a></li>
<li><a href="/index.php?title=Category:PINE64&amp;action=edit&amp;redlink=1" class="new" title="Category:PINE64 (page does not exist)">PINE64</a></li>
</ul>
</div></div>
		<div class="visualClear"></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=PINE64_Pinebook_Pro_(pine64-pinebookpro)&amp;oldid=44440">https://wiki.postmarketos.org/index.php?title=PINE64_Pinebook_Pro_(pine64-pinebookpro)&amp;oldid=44440</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 25 May 2023, at 08:35.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../en/About_postmarketOS.html" class="mw-redirect" title="PostmarketOS:About">About postmarketOS</a></li>
								<li id="footer-places-disclaimer"><a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-mobileview"><a href="https://wiki.postmarketos.org/index.php?title=PINE64_Pinebook_Pro_(pine64-pinebookpro)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"></a>					</li>
										<li id="footer-poweredbyico">
						<a href="https://www.mediawiki.org/"><img src="../poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="" width="88" height="31"></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		

</body>
</html>
