<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-disabled vector-feature-custom-font-size-clientpref--excluded vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Category:Hardware CI - postmarketOS Wiki</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.3">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="postmarketOS Wiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Wiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-14 ns-subject page-Category_Hardware_CI rootpage-Category_Hardware_CI skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	<header class="vector-header mw-header">
		<div class="vector-header-start">
			<nav class="vector-main-menu-landmark" aria-label="Site">
				
<div id="vector-main-menu-dropdown" class="vector-dropdown vector-main-menu-dropdown vector-button-flush-left vector-button-flush-right">
	<input type="checkbox" id="vector-main-menu-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-main-menu-dropdown" class="vector-dropdown-checkbox " aria-label="Main menu">
	<label id="vector-main-menu-dropdown-label" for="vector-main-menu-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-menu mw-ui-icon-wikimedia-menu"></span>

<span class="vector-dropdown-label-text">Main menu</span>
	</label>
	<div class="vector-dropdown-content">


				<div id="vector-main-menu-unpinned-container" class="vector-unpinned-container">
		
<div id="vector-main-menu" class="vector-main-menu vector-pinnable-element">
	<div class="vector-pinnable-header vector-main-menu-pinnable-header vector-pinnable-header-unpinned" data-feature-name="main-menu-pinned" data-pinnable-element-id="vector-main-menu" data-pinned-container-id="vector-main-menu-pinned-container" data-unpinned-container-id="vector-main-menu-unpinned-container">
	<div class="vector-pinnable-header-label">Main menu</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-main-menu.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-main-menu.unpin">hide</button>
</div>

	
<div id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation">
	<div class="vector-menu-heading">
		Navigation
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-mainpage-description" class="mw-list-item"><a href="../en/Main_Page.html" title="Visit the main page [z]" accesskey="z"><span>Main page</span></a></li>
<li id="n-Devices" class="mw-list-item"><a href="../en/Devices.html"><span>Devices</span></a></li>
<li id="n-Installation" class="mw-list-item"><a href="../en/Installation.html"><span>Installation</span></a></li>
<li id="n-Troubleshooting" class="mw-list-item"><a href="../en/Category:Troubleshooting.html"><span>Troubleshooting</span></a></li>
<li id="n-Guides" class="mw-list-item"><a href="../en/Category:Guide.html"><span>Guides</span></a></li>
<li id="n-Interfaces" class="mw-list-item"><a href="../en/Category:Interface.html"><span>Interfaces</span></a></li>
<li id="n-Applications" class="mw-list-item"><a href="../en/Applications_by_category.html"><span>Applications</span></a></li>
		</ul>
		
	</div>
</div>

	
	
<div id="p-Wiki" class="vector-menu mw-portlet mw-portlet-Wiki">
	<div class="vector-menu-heading">
		Wiki
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-Editor's-guide" class="mw-list-item"><a href="../en/Help:Wiki_editor's_guide.html"><span>Editor's guide</span></a></li>
<li id="n-Rules-&amp;-style-guide" class="mw-list-item"><a href="../en/Help:Wiki_editor's_guide_Wiki_rules_and_style_guide.html"><span>Rules &amp; style guide</span></a></li>
<li id="n-recentchanges" class="mw-list-item"><a href="../Special:RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li>
<li id="n-randompage" class="mw-list-item"><a href="../Special:Random.html" title="Load a random page [x]" accesskey="x"><span>Random page</span></a></li>
<li id="n-Templates" class="mw-list-item"><a href="../en/PostmarketOS:Templates.html"><span>Templates</span></a></li>
		</ul>
		
	</div>
</div>

</div>

				</div>

	</div>
</div>

		</nav>
			
<a href="../en/Main_Page.html" class="mw-logo">
	<img class="mw-logo-icon" src="/logo_50x50.svg" alt="" aria-hidden="true" height="50" width="50">
	<span class="mw-logo-container skin-invert">
		<strong class="mw-logo-wordmark">postmarketOS Wiki</strong>
	</span>
</a>

		</div>
		<div class="vector-header-end">
			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-collapses vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<a href="../Special:Search.html" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only search-toggle" title="Search postmarketOS Wiki [f]" accesskey="f"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
	</a>
	<div class="vector-typeahead-search-container">
		<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail cdx-typeahead-search--auto-expand-width">
			<form action="/index.php" id="searchform" class="cdx-search-input cdx-search-input--has-end-button">
				<div id="simpleSearch" class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
					<div class="cdx-text-input cdx-text-input--has-start-icon">
						<input class="cdx-text-input__input" type="search" name="search" placeholder="Search postmarketOS Wiki" aria-label="Search postmarketOS Wiki" autocapitalize="sentences" title="Search postmarketOS Wiki [f]" accesskey="f" id="searchInput">
						<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
					</div>
					<input type="hidden" name="title" value="Special:Search">
				</div>
				<button class="cdx-button cdx-search-input__end-button">Search</button>
			</form>
		</div>
	</div>
</div>

			<nav class="vector-user-links vector-user-links-wide" aria-label="Personal tools">
	<div class="vector-user-links-main">
	
<div id="p-vector-user-menu-preferences" class="vector-menu mw-portlet emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

	
<div id="p-vector-user-menu-userpage" class="vector-menu mw-portlet emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

	<nav class="vector-appearance-landmark" aria-label="Appearance">
		
<div id="vector-appearance-dropdown" class="vector-dropdown " title="Change the appearance of the page's font size, width, and color">
	<input type="checkbox" id="vector-appearance-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-appearance-dropdown" class="vector-dropdown-checkbox " aria-label="Appearance">
	<label id="vector-appearance-dropdown-label" for="vector-appearance-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-appearance mw-ui-icon-wikimedia-appearance"></span>

<span class="vector-dropdown-label-text">Appearance</span>
	</label>
	<div class="vector-dropdown-content">


			<div id="vector-appearance-unpinned-container" class="vector-unpinned-container">
				
			</div>
		
	</div>
</div>

	</nav>
	
<div id="p-vector-user-menu-notifications" class="vector-menu mw-portlet emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

	
<div id="p-vector-user-menu-overflow" class="vector-menu mw-portlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			<li id="pt-login-2" class="user-links-collapsible-item mw-list-item user-links-collapsible-item">
<a data-mw="interface" href="/index.php?title=Special:UserLogin&amp;returnto=Category%3AHardware+CI" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o" class=""><span>Log in</span></a>
</li>
<li id="pt-createaccount-2" class="user-links-collapsible-item mw-list-item user-links-collapsible-item">
<a data-mw="interface" href="../Special:RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory" class=""><span>Request account</span></a>
</li>

			
		</ul>
		
	</div>
</div>

	</div>
	
<div id="vector-user-links-dropdown" class="vector-dropdown vector-user-menu vector-button-flush-right vector-user-menu-logged-out user-links-collapsible-item" title="More options">
	<input type="checkbox" id="vector-user-links-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-user-links-dropdown" class="vector-dropdown-checkbox " aria-label="Personal tools">
	<label id="vector-user-links-dropdown-label" for="vector-user-links-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-ellipsis mw-ui-icon-wikimedia-ellipsis"></span>

<span class="vector-dropdown-label-text">Personal tools</span>
	</label>
	<div class="vector-dropdown-content">


		
<div id="p-personal" class="vector-menu mw-portlet mw-portlet-personal user-links-collapsible-item" title="User menu">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="pt-login" class="user-links-collapsible-item mw-list-item"><a href="/index.php?title=Special:UserLogin&amp;returnto=Category%3AHardware+CI" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span class="vector-icon mw-ui-icon-logIn mw-ui-icon-wikimedia-logIn"></span> <span>Log in</span></a></li>
<li id="pt-createaccount" class="user-links-collapsible-item mw-list-item"><a href="../Special:RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Request account</span></a></li>
		</ul>
		
	</div>
</div>

	
	</div>
</div>

</nav>

		</div>
	</header>
</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Overall_architecture" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Overall_architecture">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Overall architecture</span>
			</div>
		</a>
		
		<ul id="toc-Overall_architecture-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-CI-tron:_The_testing_gateway" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#CI-tron:_The_testing_gateway">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>CI-tron: The testing gateway</span>
			</div>
		</a>
		
			<button aria-controls="toc-CI-tron:_The_testing_gateway-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle CI-tron: The testing gateway subsection</span>
			</button>
		
		<ul id="toc-CI-tron:_The_testing_gateway-sublist" class="vector-toc-list">
			<li id="toc-Installation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Installation">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Installation</span>
				</div>
			</a>
			
			<ul id="toc-Installation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Adding_devices_under_test_to_your_gateway" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Adding_devices_under_test_to_your_gateway">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Adding devices under test to your gateway</span>
				</div>
			</a>
			
			<ul id="toc-Adding_devices_under_test_to_your_gateway-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Enabling_device_testing_in_GitLab" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Enabling_device_testing_in_GitLab">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Enabling device testing in GitLab</span>
			</div>
		</a>
		
			<button aria-controls="toc-Enabling_device_testing_in_GitLab-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Enabling device testing in GitLab subsection</span>
			</button>
		
		<ul id="toc-Enabling_device_testing_in_GitLab-sublist" class="vector-toc-list">
			<li id="toc-Generate_and_run_the_boot_artifacts" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Generate_and_run_the_boot_artifacts">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Generate and run the boot artifacts</span>
				</div>
			</a>
			
			<ul id="toc-Generate_and_run_the_boot_artifacts-sublist" class="vector-toc-list">
				<li id="toc-Example" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Example">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1</span>
					<span>Example</span>
				</div>
			</a>
			
			<ul id="toc-Example-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Enabling_device_testing_in_pmaports" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Enabling_device_testing_in_pmaports">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Enabling device testing in pmaports</span>
				</div>
			</a>
			
			<ul id="toc-Enabling_device_testing_in_pmaports-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Debugging" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Debugging">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Debugging</span>
			</div>
		</a>
		
			<button aria-controls="toc-Debugging-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Debugging subsection</span>
			</button>
		
		<ul id="toc-Debugging-sublist" class="vector-toc-list">
			<li id="toc-Only_pmaports:_dynamic_pipeline_generation" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Only_pmaports:_dynamic_pipeline_generation">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Only pmaports: dynamic pipeline generation</span>
				</div>
			</a>
			
			<ul id="toc-Only_pmaports:_dynamic_pipeline_generation-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Preparing_ci-tron_artifacts_for_booting_on_devices" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Preparing_ci-tron_artifacts_for_booting_on_devices">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Preparing ci-tron artifacts for booting on devices</span>
				</div>
			</a>
			
			<ul id="toc-Preparing_ci-tron_artifacts_for_booting_on_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Testing_the_artifacts_on_the_real_devices" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Testing_the_artifacts_on_the_real_devices">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.3</span>
					<span>Testing the artifacts on the real devices</span>
				</div>
			</a>
			
			<ul id="toc-Testing_the_artifacts_on_the_real_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">
<span class="mw-page-title-namespace">Category</span><span class="mw-page-title-separator">:</span><span class="mw-page-title-main">Hardware CI</span>
</h1>
				</header>
				<div class="vector-page-toolbar">
					<div class="vector-page-toolbar-container">
						<div id="left-navigation">
							<nav aria-label="Namespaces">
								
<div id="p-associated-pages" class="vector-menu vector-menu-tabs mw-portlet mw-portlet-associated-pages">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-nstab-category" class="selected vector-tab-noicon mw-list-item"><a href="../en/Category:Hardware_CI.html" title="View the category page [c]" accesskey="c"><span>Category</span></a></li>
<li id="ca-talk" class="new vector-tab-noicon mw-list-item"><a href="/index.php?title=Category_talk:Hardware_CI&amp;action=edit&amp;redlink=1" rel="discussion" class="new" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
		</ul>
		
	</div>
</div>

								
<div id="vector-variants-dropdown" class="vector-dropdown emptyPortlet">
	<input type="checkbox" id="vector-variants-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-variants-dropdown" class="vector-dropdown-checkbox " aria-label="Change language variant">
	<label id="vector-variants-dropdown-label" for="vector-variants-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet" aria-hidden="true"><span class="vector-dropdown-label-text">English</span>
	</label>
	<div class="vector-dropdown-content">


					
<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

				
	</div>
</div>

							</nav>
						</div>
						<div id="right-navigation" class="vector-collapsible">
							<nav aria-label="Views">
								
<div id="p-views" class="vector-menu vector-menu-tabs mw-portlet mw-portlet-views">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-view" class="selected vector-tab-noicon mw-list-item"><a href="../en/Category:Hardware_CI.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="vector-tab-noicon mw-list-item"><a href="/index.php?title=Category:Hardware_CI&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="vector-tab-noicon mw-list-item"><a href="/index.php?title=Category:Hardware_CI&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
		</ul>
		
	</div>
</div>

							</nav>
				
							<nav class="vector-page-tools-landmark" aria-label="Page tools">
								
<div id="vector-page-tools-dropdown" class="vector-dropdown vector-page-tools-dropdown">
	<input type="checkbox" id="vector-page-tools-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-tools-dropdown" class="vector-dropdown-checkbox " aria-label="Tools">
	<label id="vector-page-tools-dropdown-label" for="vector-page-tools-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet" aria-hidden="true"><span class="vector-dropdown-label-text">Tools</span>
	</label>
	<div class="vector-dropdown-content">


									<div id="vector-page-tools-unpinned-container" class="vector-unpinned-container">
						
<div id="vector-page-tools" class="vector-page-tools vector-pinnable-element">
	<div class="vector-pinnable-header vector-page-tools-pinnable-header vector-pinnable-header-unpinned" data-feature-name="page-tools-pinned" data-pinnable-element-id="vector-page-tools" data-pinned-container-id="vector-page-tools-pinned-container" data-unpinned-container-id="vector-page-tools-unpinned-container">
	<div class="vector-pinnable-header-label">Tools</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-page-tools.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-page-tools.unpin">hide</button>
</div>

	
<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions vector-has-collapsible-items" title="More options">
	<div class="vector-menu-heading">
		Actions
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Category:Hardware_CI.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Category:Hardware_CI&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Category:Hardware_CI&amp;action=history"><span>View history</span></a></li>
<li id="ca-cargo-purge" class="mw-list-item"><a href="/index.php?title=Category:Hardware_CI&amp;action=purge"><span>Purge cache</span></a></li>
		</ul>
		
	</div>
</div>

<div id="p-tb" class="vector-menu mw-portlet mw-portlet-tb">
	<div class="vector-menu-heading">
		General
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="t-whatlinkshere" class="mw-list-item"><a href="../en/Special:WhatLinksHere_Category:Hardware_CI.html" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li>
<li id="t-recentchangeslinked" class="mw-list-item"><a href="../en/Special:RecentChangesLinked_Category:Hardware_CI.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li>
<li id="t-specialpages" class="mw-list-item"><a href="../Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li>
<li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li>
<li id="t-permalink" class="mw-list-item"><a href="/index.php?title=Category:Hardware_CI&amp;oldid=81332" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li>
<li id="t-info" class="mw-list-item"><a href="/index.php?title=Category:Hardware_CI&amp;action=info" title="More information about this page"><span>Page information</span></a></li>
<li id="t-cargopagevalueslink" class="mw-list-item"><a href="/index.php?title=Category:Hardware_CI&amp;action=pagevalues" rel="cargo-pagevalues"><span>Cargo data</span></a></li>
		</ul>
		
	</div>
</div>

</div>

									</div>
				
	</div>
</div>

							</nav>
						</div>
					</div>
				</div>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		<div id="mw-indicator-mw-helplink" class="mw-indicator"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Categories" target="_blank" class="mw-helplink"><span class="mw-helplink-icon"></span>Help</a></div>
		</div>

						<div id="siteSub" class="noprint">From postmarketOS Wiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<style data-mw-deduplicate="TemplateStyles:r80003">@media(max-width:600px){.mw-parser-output .infobox{float:none;clear:none;margin-left:0;width:100%!important}.mw-parser-output .infobox{display:table!important}}.mw-parser-output .infobox{background-color:var(--background-color-neutral-subtle,#f8f9fa);color:var(--color-emphasized,#101418);border:1px solid var(--border-color-subtle,#c8ccd1);border-spacing:3px;margin:0.5em 0 0.5em 1em;padding:0.2em;float:right;clear:right;font-size:88%;line-height:1.5em}.mw-parser-output .infobox caption{font-size:125%;font-weight:bold;padding:0.2em;text-align:center}.mw-parser-output .infobox td,.mw-parser-output .infobox th{vertical-align:top;text-align:left}.mw-parser-output .infobox.bordered{border-collapse:collapse}.mw-parser-output .infobox.bordered td,.mw-parser-output .infobox.bordered th{border:1px solid #a2a9b1}.mw-parser-output .infobox.bordered .borderless td,.mw-parser-output .infobox.bordered .borderless th{border:0}.mw-parser-output .infobox.sisterproject{width:20em;font-size:90%}.mw-parser-output .infobox.standard-talk{border:1px solid #c0c090;background-color:#f8eaba}.mw-parser-output .infobox.standard-talk.bordered td,.mw-parser-output .infobox.standard-talk.bordered th{border:1px solid #c0c090}.mw-parser-output .infobox.bordered .mergedtoprow td,.mw-parser-output .infobox.bordered .mergedtoprow th{border:0;border-top:1px solid #a2a9b1;border-right:1px solid #a2a9b1}.mw-parser-output .infobox.bordered .mergedrow td,.mw-parser-output .infobox.bordered .mergedrow th{border:0;border-right:1px solid #a2a9b1}.mw-parser-output .infobox.geography{border-collapse:collapse;line-height:1.2em;font-size:90%}.mw-parser-output .infobox.geography td,.mw-parser-output .infobox.geography th{border-top:1px solid #a2a9b1;padding:0.4em 0.6em 0.4em 0.6em}.mw-parser-output .infobox.geography .mergedtoprow td,.mw-parser-output .infobox.geography .mergedtoprow th{border-top:1px solid #a2a9b1;padding:0.4em 0.6em 0.2em 0.6em}.mw-parser-output .infobox.geography .mergedrow td,.mw-parser-output .infobox.geography .mergedrow th{border:0;padding:0 0.6em 0.2em 0.6em}.mw-parser-output .infobox.geography .mergedbottomrow td,.mw-parser-output .infobox.geography .mergedbottomrow th{border-top:0;border-bottom:1px solid #a2a9b1;padding:0 0.6em 0.4em 0.6em}.mw-parser-output .infobox.geography .maptable td,.mw-parser-output .infobox.geography .maptable th{border:0;padding:0}</style>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">CI-tron</caption>
<tbody>
<tr class=""><td colspan="2" class="" style="text-align:center;">
<span typeof="mw:File"><a href="../HW_testing_harness_over_CI_tron_dashboard.jpg" class="mw-file-description"><img alt="Our testing harness PCB over the CI-tron dashboard, the infrastructure used to deploy test environments on real hardware" src="../HW_testing_harness_over_CI_tron_dashboard.jpg" decoding="async" width="200" height="106" class="mw-file-element" srcset="../HW_testing_harness_over_CI_tron_dashboard.jpg 1.5x ../HW_testing_harness_over_CI_tron_dashboard.jpg 2x"></a></span><br><span style="">Our testing harness PCB over the CI-tron dashboard, the infrastructure used to deploy test environments on real hardware</span>
</td></tr>
<tr class="">
<th scope="row" style="text-align:left;">Name</th>
    <td class="" style="">
CI-tron</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">License</th>
    <td class="" style="">
MIT</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Latest Version</th>
    <td class="" style="">
<a rel="nofollow" class="external free" href="https://gitlab.freedesktop.org/gfx-ci/ci-tron">https://gitlab.freedesktop.org/gfx-ci/ci-tron</a>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">FOSS</th>
    <td class="" style="">
✔</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<p>This category is meant to provide a collection of pages related to running tests on bare-metal hardware.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Overall_architecture">Overall architecture</span></h2>
<figure class="mw-halign-center mw-image-border" typeof="mw:File"><a href="../Hw-ci-diagram.png" class="mw-file-description" title="Overview of the HW/SW testing architecture"><img alt="Overview of the HW/SW testing architecture" src="../Hw-ci-diagram.png" decoding="async" width="512" height="272" class="mw-file-element" srcset="../768px-Hw-ci-diagram.png 1.5x ../1024px-Hw-ci-diagram.png 2x"></a><figcaption>Overview of the HW/SW testing architecture</figcaption></figure>
<p>There are 3 main components needed to provide hardware testing:
</p>
<ul>
<li>
<b>Devices under test</b>: Devices connected to a gateway through a testing harness sufficient for remote control;</li>
<li>
<b>A testing gateway (CI-tron)</b>: Receives CI jobs from the different projects hosted by <a rel="nofollow" class="external text" href="http://gitlab.postmarketos.org">gitlab.postmarketos.org</a>, deploys the suitable test environment to the devices under test, then deals with the power sequencing and boot sequence;</li>
<li>
<b>PostmarketOS's GitLab instance</b>: Where the code to be tested, the test definitions, and the CI logic is located.</li>
</ul>
<p>In order to add testing on a particular device that is not currently available in our GitLab instance, you will first need to deploy a CI-tron instance at your home, then add the device under test (DUT) to it.
</p>
<h2><span class="mw-headline" id="CI-tron:_The_testing_gateway">CI-tron: The testing gateway</span></h2>
<figure class="mw-halign-left" typeof="mw:File/Thumb"><a href="../Ci-tron_logo.svg" class="mw-file-description"><img src="../Ci-tron_logo.svg" decoding="async" width="128" height="128" class="mw-file-element"></a><figcaption>The logo of the CI-tron project. License: CC BY 4.0 Deed, Akseli Haapoja</figcaption></figure>
<p>The CI-tron project started in 2020 to provide an easier-to-use infrastructure for bare-metal testing than existing solutions by:
</p>
<ul>
<li>Providing a plug-and-play experience by automating best practices and minimizing manual configuration;</li>
<li>Using containers rather than rootfses for test environments;</li>
<li>Allowing both interactive and CI sessions.</li>
</ul>
<p>This enables developers and power users to share their local devices, either for development or CI. The project's documentation is located at <a rel="nofollow" class="external free" href="https://gfx-ci.pages.freedesktop.org/ci-tron/">https://gfx-ci.pages.freedesktop.org/ci-tron/</a>.
</p>
<h3><span class="mw-headline" id="Installation">Installation</span></h3>
<style data-mw-deduplicate="TemplateStyles:r79875"></style>
<table role="text container" class="icon-box box-warning" style="--ib-background: #fee7e6; --ib-background-dark: #3e1a19; --ib-border-color: #d33; --ib-border-color-dark: #a21717; border-width: 1px; border-style: solid; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center; line-height: 1;"><span style="white-space: nowrap;"><span typeof="mw:File"><span title="Warning"><img alt="Warning" src="../Red_warning_icon.svg" decoding="async" width="20" height="20" class="mw-file-element"></span></span></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">
<b>WARNING:</b> The installation instructions are currently for advanced-users only. A simpler system is currently being developed that will allow generating a boot image for your gateway from a website.</td>
</tr></tbody></table>
<p>The installation instructions are located at <a rel="nofollow" class="external free" href="https://gfx-ci.pages.freedesktop.org/ci-tron/docs/installation_and_development.html">https://gfx-ci.pages.freedesktop.org/ci-tron/docs/installation_and_development.html</a>.
</p>
<h3><span class="mw-headline" id="Adding_devices_under_test_to_your_gateway">Adding devices under test to your gateway</span></h3>
<p>Please follow the instructions found at <a rel="nofollow" class="external free" href="https://gfx-ci.pages.freedesktop.org/ci-tron/docs/adding_duts.html">https://gfx-ci.pages.freedesktop.org/ci-tron/docs/adding_duts.html</a>.
</p>
<h2><span class="mw-headline" id="Enabling_device_testing_in_GitLab">Enabling device testing in GitLab</span></h2>
<link rel="mw-deduplicated-inline-style" href="mw-data:TemplateStyles:r79875">
<table role="text container" class="icon-box box-warning" style="--ib-background: #fee7e6; --ib-background-dark: #3e1a19; --ib-border-color: #d33; --ib-border-color-dark: #a21717; border-width: 1px; border-style: solid; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center; line-height: 1;"><span style="white-space: nowrap;"><span typeof="mw:File"><span title="Warning"><img alt="Warning" src="../Red_warning_icon.svg" decoding="async" width="20" height="20" class="mw-file-element"></span></span></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">
<b>WARNING:</b> This section assumes that the devices under test you want to use are already exposed on <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org">gitlab.postmarketos.org</a> using CI-tron</td>
</tr></tbody></table>
<p>Now that our devices under test have been added to our GitLab instance, we need to instruct it how to submit test jobs to your CI-tron instance. The official way of doing so is documented at <a rel="nofollow" class="external free" href="https://gfx-ci.pages.freedesktop.org/ci-tron/docs/forges_integration.html">https://gfx-ci.pages.freedesktop.org/ci-tron/docs/forges_integration.html</a>, and forms the basis of our implementation.
</p>
<p>There are however a couple of differences compared to the official documentation:
</p>
<ul>
<li>The provided template files are vendored as-is in our GitLab instance to reduce our reliance on external projects</li>
<li>Common patterns have been moved to hidden jobs that any job can extend from in order to reduce code duplication</li>
</ul>
<p>The common patterns can be found in the <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/ci-common/-/blob/ci-tron-integration/ci-tron/common.yml">ci-common's ci-tron/common.yml</a>, and can be included by adding the following excerpt at the top of your projects' <b>.gitlab-ci.yml</b>:
</p>
<pre>variables:
  # WARNING: it is strongly advised to use a commit hash instead of a branch name:
  CI_TRON_TEMPLATE_PROJECT: &amp;ci-tron-template-project postmarketOS/ci-common
  CI_TRON_JOB_TEMPLATE_PROJECT_URL: $CI_SERVER_URL/$CI_TRON_TEMPLATE_PROJECT
  CI_TRON_JOB_TEMPLATE_COMMIT: &amp;ci-tron-template-commit 7c95b5f2d53533e8722abf57c73e558168e811f3

include:
  - project: *ci-tron-template-project
    ref: *ci-tron-template-commit
    file: '/ci-tron/common.yml'

</pre>
<p>You can now use <a rel="nofollow" class="external text" href="https://docs.gitlab.com/ci/yaml/#extends">extends:</a> to inherit from <b>.pmos-ci-tron-job-v1</b>, and can use all of the official options.
</p>
<h3><span class="mw-headline" id="Generate_and_run_the_boot_artifacts">Generate and run the boot artifacts</span></h3>
<p>To generate the boot artifacts needed by the devices under test, you may use the <b>.pmos-ci-tron-build-boot-artifacts</b> job from the ci-common repo (ci-tron/common.yml). The job requires you to set 3 variables:
</p>
<ul>
<li>
<b>DEVICE_NAME</b>: The device name, in the wiki format (eg. qemu-amd64)</li>
<li>
<b>INSTALL_PACKAGES</b>: The list of packages that should be installed</li>
<li>
<b>KERNEL_VARIANT</b>: The kernel name (eg. <b>lts</b>, or <b>virt</b>), if applicable. Leave empty if only one kernel is supported.</li>
</ul>
<p>The job also makes it possible to use packages or binaries built in previous CI steps into the generated kernel an initramfs. For that it considers 3 locations:
</p>
<ul>
<li>
<b>keys</b>: Anything located under this directory will be copied to pmbootstrap local keys.</li>
<li>
<b>packages</b>: Any package located under this directory will be copied to pmbootstrap local package repository. Together with <b>keys</b>, this can be used to use new packages instead of the ones in the binary repo.</li>
<li>
<b>rootfs</b>: Any file located under this directory will be copied to the pmbootstrap rootfs chroot under the same relative path. This can be used to run custom binaries (e.g: mkinitfs, boot-deploy) instead of the ones provided by packages.</li>
</ul>
<p>To boot the kernel and initramfs generated in the previous stage, you may use the <b>.pmos-ci-tron-initramfs-test</b> job from the ci-common repo (ci-tron/common.yml). The job requires to set the following elements:
</p>
<ul>
<li>
<b>tags:</b>: The list of tags the Gitlab runner should have to run the job</li>
<li>
<b>variables:</b>: All the CI-tron variables needed to specify which kernel and initramfs to load</li>
</ul>
<h4><span class="mw-headline" id="Example">Example</span></h4>
<p>The following example will build the boot artifacts for the lts kernel of the qemu-amd64, then boot them on the device.
</p>
<pre>prepare-qemu-amd64:
  stage: hardware tests
  extends:
    - .pmos-ci-tron-build-boot-artifacts
  variables:
    DEVICE_NAME: qemu-amd64
    KERNEL_VARIANT: lts
    INSTALL_PACKAGES: device-${DEVICE_NAME} device-${DEVICE_NAME}-kernel-${KERNEL_VARIANT} postmarketos-mkinitfs-hook-ci
 
test-qemu-amd64:
  stage: hardware tests
  extends:
    - .pmos-ci-tron-initramfs-test
 
  # List of tags the device/runner should have to be picked by GitLab for testing. 
  # Alternatively you can use .pmos-ci-tron-runner-qemu-amd64 from common.yml
  tags:
    - cpu:arch:x86_64
    - virtio:codename:VIRTIO
  
  # Wait for the preapre-qemu-amd64 job to be over before executing this job
  dependencies: []
  needs:
    - job: 'prepare-qemu-amd64'
      artifacts: false
    
  # Specify how to get the kernel and initramfs to use for testing
  variables:
    CI_TRON_KERNEL__URL: "glartifact://build-qemu-amd64/${CI_TRON__PMB_EXPORT_PATH}/vmlinuz-${KERNEL_VARIANT}"
    CI_TRON_INITRAMFS__INITRAMFS__URL: "glartifact://build-qemu-amd64/${CI_TRON__PMB_EXPORT_PATH}/initramfs"
</pre>
<h3><span class="mw-headline" id="Enabling_device_testing_in_pmaports">Enabling device testing in pmaports</span></h3>
<p>Enabling testing on a particular device can be done by adding in your device's package a file called <b>gitlab-ci.yml.j2</b> which defines all the test jobs for your device. This file will get included when generating the <b>.ci/build-jobs.yaml.j2</b> template if the device needs testing (its package or one of its dependencies got modified).
</p>
<p>Your jobs are expected to set all the necessary attributes to run jobs on a CI-tron-provided runner, but the following template variables and hidden jobs are provided to you as helpers:
</p>
<ul>
<li>Template variables (defined in <b>.ci/lib/generate_build_jobs.py</b>):
<ul><li>
<b>device</b>: Instance of the <b>Device</b> class which represents the device under test</li></ul>
</li>
<li>Hidden jobs (defined in <b>.ci/build-jobs.yaml.j2</b>):
<ul>
<li>
<b>.test-{{ device.name }}</b>: Defines all the common parameters for testing this device (;</li>
<li>
<b>.ci-tron-device-boot-flow-separate-artifacts</b>: Sets the kernel and initramfs URLs when the build job generates separate kernel and initramfs files as artifacts. If your device supports multiple kernel variants, make sure to set the <b>KERNEL_NAME</b> by referencing the <b>KERNEL_VARIANT</b> variable that is set in <b>.test-{{ device.name }}</b>.</li>
</ul>
</li>
</ul>
<p>As an example, here is how qemu-{amd64|aarch64} define their test job:
</p>
<pre>test-{{ device.name }}:
  extends:
    # Extended from jobs defined in ci-common's ci-tron/common.yml
    - .ci-tron-runner-{{ device.name }}  # Sets the runner tags

    # Extended from build-jobs.yaml.j2
    - .ci-tron-device-boot-flow-separate-artifacts
    - .test-{{ device.name }}
  variables:
    KERNEL_NAME: vmlinuz-$KERNEL_VARIANT
</pre>
<link rel="mw-deduplicated-inline-style" href="mw-data:TemplateStyles:r79875">
<table role="text container" class="icon-box box-note" style="--ib-background: #f6efe5; --ib-background-dark: #261c09; --ib-border-color: #ac6600; --ib-border-color-dark: #6a481c; border-width: 1px; border-style: solid; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center; line-height: 1;"><span style="white-space: nowrap;"><span typeof="mw:File"><span title="Note"><img alt="Note" src="../Reference_icon.svg" decoding="async" width="20" height="20" class="mw-file-element"></span></span></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">Rather than duplicating the <b>gitlab-ci.yml.j2</b> file for all the devices that can make use of it, you may save the file in <b>.gitlab-ci/packages/</b> then link to it in the device folder.</td>
</tr></tbody></table>
<h2><span class="mw-headline" id="Debugging">Debugging</span></h2>
<p>If something goes wrong on device testing in CI, it might be needed to go do some debugging related to the actual devices.
</p>
<p>Hardware tests always run at the end of the pipelines, and often depend on previous building and testing jobs to be successful. This guide does not cover  how to debug those previous steps, like building packages in pmaports from MR changes, or compiling mkinitfs. However, once those are successful, there are 3 possible thing that can go wrong:
</p>
<h3><span class="mw-headline" id="Only_pmaports:_dynamic_pipeline_generation">Only pmaports: dynamic pipeline generation</span></h3>
<p>Testing pipelines in pmaports are generated dynamically, so that changing an armv7 devices only builds for that architecture, and does not run ci-tron tests for any other device. The pipeline is generated by the <code>.ci/lib/generate_build_jobs.py</code> script. The script requires jinja2 and pmbootstrap to be installed, but once they are it can be run passing a jinja template (unless doing changes, it should be <code>.ci/build-jobs.yaml.j2</code>) as a first argument, and the output file as a second argument. This way, it is possible to run the code generation locally, and inspect the resulting pipeline.
</p>
<h3><span class="mw-headline" id="Preparing_ci-tron_artifacts_for_booting_on_devices">Preparing ci-tron artifacts for booting on devices</span></h3>
<p>These artifacts should be generated using the <b>.pmos-ci-tron-build-boot-artifacts</b> hidden job from <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/ci-common/-/blob/ci-tron-integration/ci-tron/common.yml">ci-common's ci-tron/common.yml</a>, which in turn calls the <code>build-boot-artifacts.sh</code> script in the same repository.
</p>
<p>If something goes wrong in this step, it should be possible to:
</p>
<ul>
<li>Run the <code>build-boot-artifacts.sh</code> script locally, making sure the required variables and paths contain the right data.</li>
<li>Push your changes to a branch in the ci-common repository (or a fork of it), and modify the following variables at the top of the <code>.gitlab-ci.yml</code> file to test your changes:
<ul>
<li>CI_TRON_TEMPLATE_PROJECT: &amp;ci-tron-template-project my-user/ci-common</li>
<li>CI_TRON_JOB_TEMPLATE_COMMIT: &amp;ci-tron-template-commit my-branch-name-or-commit-sha</li>
</ul>
</li>
</ul>
<h3><span class="mw-headline" id="Testing_the_artifacts_on_the_real_devices">Testing the artifacts on the real devices</span></h3>
<p>If the testing itself fails, it might be necessary to look into the devices themselves. In this case, the test jobs should upload <code>job_script.sh</code> as an artifact. The script contains the details on the code run on the ci-tron <b>gateway</b> (see the architecture on top of this page). Therefore, anybody with access to the gateway can download that script, modify variables at wish (e.g: maybe you want to test on a different device in the same farm, or build and pass your own initramfs), and run on the device. For example, it might be desired to build a custom initramfs with the debug-shell mkinitfs hook installed. Then it can be built locally, and fetched in the device by providing a different value in <code>CI_TRON_INITRAMFS__INITRAMFS__URL</code>. For further details on variables to use, refer to the <a rel="nofollow" class="external text" href="https://gfx-ci.pages.freedesktop.org/ci-tron/docs/forges_integration.html">official documentation</a>.
</p>
<p>To be able to access the gateway, you must have access to it, preferably through wireguard. Giving access depends on the administrator. For farms managed by the postmarketOS-team, any team member can request access to the infra team. The details can be found in the <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/pmos-admin/infra/-/blob/master/docs/server/ci-tron1/000-overview.md?ref_type=heads#getting-access">private infra</a> repo.
</p>
</div>
<div class="mw-category-generated" lang="en" dir="ltr"><div id="mw-subcategories">
<h2>Subcategories</h2>
<p>This category has only the following subcategory.
</p>
<div lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-category"><div class="mw-category-group">
<h3>H</h3>
<ul><li><a href="../en/Category:Hardware_CI.html" title="Category:Hardware CI">Hardware CI</a></li></ul>
</div></div></div>
</div></div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Operating_Systems.html" title="Category:Operating Systems">Operating Systems</a></li>
<li><a href="../en/Category:Hardware_CI.html" title="Category:Hardware CI">Hardware CI</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=Category:Hardware_CI&amp;oldid=81332">https://wiki.postmarketos.org/index.php?title=Category:Hardware_CI&amp;oldid=81332</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 30 July 2025, at 10:09.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/About_postmarketOS.html">About postmarketOS Wiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/PostmarketOS:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="../poweredby_mediawiki.svg" alt="Powered by MediaWiki" width="88" height="31" loading="lazy"></a></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
