<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Next Thing Co. CHIP (ntc-chip) - postmarketOS</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.34.2">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="postmarketOS (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Next_Thing_Co_CHIP_ntc-chip rootpage-Next_Thing_Co_CHIP_ntc-chip skin-vector action-view">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading" class="firstHeading" lang="en">Next Thing Co. CHIP (ntc-chip)</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From postmarketOS</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Next Thing Co. CHIP</caption>
<tbody>
<tr class=""><td colspan="2" class="" style="text-align:center;">
<a href="../Ntc_chip_front.png" class="image"><img alt="Next Thing Co. CHIP" src="../Ntc_chip_front.png" decoding="async" width="200" height="295" srcset="../Ntc_chip_front.png 1.5x ../Ntc_chip_front.png 2x"></a><br><span style="">Next Thing Co. CHIP</span>
</td></tr>
<tr class="">
<th scope="row" style="text-align:left;">Manufacturer</th>
    <td class="" style="">
Next Thing Co.</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Name</th>
    <td class="" style="">
CHIP</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Codename</th>
    <td class="" style="">
ntc-chip</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Released</th>
    <td class="" style="">
2015</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Category</th>
    <td class="" style="">
testing</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Original software</th>
    <td class="" style="">
Debian on Linux 4.4</td>
</tr>
<tr><th colspan="2" class="" style="text-align:center;">Hardware</th></tr>
<tr class="">
<th scope="row" style="text-align:left;">Chipset</th>
    <td class="" style="">
<a href="/index.php?title=Allwinner_R8&amp;action=edit&amp;redlink=1" class="new" title="Allwinner R8 (page does not exist)">Allwinner R8</a>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">CPU</th>
    <td class="" style="">
1x 1.0 GHz Cortex-A8</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPU</th>
    <td class="" style="">
Mali-400 MP1</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Display</th>
    <td class="" style="">
Composite video</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Storage</th>
    <td class="" style="">
8GB MLC NAND</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Memory</th>
    <td class="" style="">
512 MB DDR3</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Architecture</th>
    <td class="" style="">
armv7</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<div class="infobox" style="width: 22em; box-sizing: border-box; background-color: #fee7e6; border-color: #d33; border-width: 2px; color: #000; padding: 4px; text-align: center;">This device is marked as <b>not booting</b>.<br>Status: <i>Kernel compiles and boots, u-boot needs to be packaged</i>
</div>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Features</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="After connecting the device with USB to your PC, you can connect to it via telnet (initramfs) or SSH (booted system).">USB Networking</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="It is possible to flash the device with `pmbootstrap flasher`.">Flashing</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Touchscreen</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Display works. Ideally with sleep mode and brightness control.">Display</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">WiFi</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Full disk encryption and unlocking with osk-sdl.">FDE</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Instead of a Linux kernel fork, it is possible to run mainline.">Mainline</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Charging and battery level reporting works">Battery</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">3D Acceleration</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Audio playback, microphone, headset and buttons.">Audio</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Bluetooth</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Camera</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPS</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Mobile data</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">SMS</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Calls</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="USB On-The-Go or USB-C Role switching">USB OTG</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Near Field Communication">NFC</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Sensors</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Auto screen rotation works in desktops e.g. Phosh or Plasma Mobile">Accelerometer</abbr></th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Sensor to measure magnetism">Magnetometer</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ambient Light</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Proximity</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Also known as flip cover sensor">Hall Effect</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Sensor to measure air pressure">Barometer</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Sensor to monitor current, voltage and power. Not fuel gauge!">Power Sensor</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Misc</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;">Camera Flash</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Keyboard</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Touchpad</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Full-sized USB-A port works (Usually applicable to SBCs and laptops).">USB-A</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Video and audio output with HDMI or Display Port works.">HDMI/DP</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ir TX</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ir RX</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Stylus</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Haptics</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ethernet</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">FOSS bootloader</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<p><br>
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="Contributors">Contributors</span></h2>
<ul><li>Symmetrist</li></ul>
<h2>
<span id="Maintainer(s)"></span><span class="mw-headline" id="Maintainer.28s.29">Maintainer(s)</span>
</h2>
<ul><li>Symmetrist</li></ul>
<h2><span class="mw-headline" id="Status">Status</span></h2>
<p>At the moment it is possible to build a pmOS image using the commands explained below.
</p>
<p>However to boot this image we need to change u-boot configuration, and unfortunately
the procedure explained below does not work on all the version of u-boot for CHIP around.
</p>
<p>The next step is to package and compile u-boot to provide a uniform bootloader for pmOS.
</p>
<h2><span class="mw-headline" id="Users_owning_this_device">Users owning this device</span></h2>
<div style="-webkit-column-count: 2; -moz-column-count: 2; column-count: 2;"><ul style="margin-top: 0;">
<li><a href="../User:Cralex.html" title="User:Cralex">Cralex</a></li>
<li>
<a href="../User:Maff.html" title="User:Maff">Maff</a> (<span class="cargoFieldName">Notes:</span> Both CHIP and PocketCHIP units)</li>
<li><a href="../User:Nimayer.html" title="User:Nimayer">Nimayer</a></li>
<li><a href="../User:Sicelo.html" title="User:Sicelo">Sicelo</a></li>
</ul></div>
<p><br>
</p>
<h2><span class="mw-headline" id="How_to_enter_flash_mode">How to enter flash mode</span></h2>
<p>The CHIP has two different flashing modes:
</p>
<ul>
<li>FEL mode: used to flash bootloader and rootfs</li>
<li>Fastboot mode: used to flash rootfs</li>
</ul>
<p><br>
To enter <b>FEL</b> mode:
</p>
<ul>
<li>Connect the FEL and GND pins with a jumper cable</li>
<li>Power on the CHIP</li>
</ul>
<p>To enter <b>Fastboot</b> mode:
</p>
<ul>
<li>Connect an serial (UART) USB adapter to UART1-TX, UART1-RX and GND</li>
<li>Power on the CHIP</li>
<li>Press enter during boot up to access the U-Boot console</li>
<li>On the console type <code>fastboot 0</code>
</li>
</ul>
<h2><span class="mw-headline" id="Configure_U-Boot">Configure U-Boot</span></h2>
<p>PostmarketOS loads an initramfs together with the kernel, while original Debian installation only used the kernel.
</p>
<p>To boot PostmarketOS we need to change the U-Boot configuration to support the initramfs.
</p>
<p>From the U-boot serial console issue the following commands:
</p>
<ul><li>Print the current value of the <code>bootcmd</code>, save it in case you want to restore it later.</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">&gt;</span> printenv bootcmd
</pre></div>
<ul><li>Change the <code>bootcmd</code> value</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">&gt;</span> printenv bootcmd
<span class="gp">&gt;</span> setenv bootcmd <span class="s2">"gpio set PB2; </span><span class="si">${</span><span class="nv">bootcmd_fel</span><span class="si">}</span><span class="s2">; </span><span class="si">${</span><span class="nv">boot_initrd</span><span class="si">}</span><span class="s2">;"</span>
<span class="gp">&gt;</span> saveenv
</pre></div>
<h2><span class="mw-headline" id="Create_the_UBIfs_image">Create the UBIfs image</span></h2>
<ul><li>Configure the installation and build the system</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> pmbootstrap init
<span class="gp">$</span> pmbootstrap install
</pre></div>
<p>In <code>workdir/chroot_rootfs_ntc-chip</code> there is the rootfs for your ntc-chip
</p>
<p>The following commands needs to be launched from your pmbootstrap workdir
</p>
<ul><li>Copy dtb from linux-ntc-chip</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> sudo cp cache_git/pmaports/device/testing/linux-ntc-chip/sun5i-r8-chip.dtb chroot_rootfs_ntc-chip/boot/
</pre></div>
<p>Install mtd-utils from your distro repositories e.g. <code>pacman -S mtd-utils</code>
</p>
<ul><li>Create the UBIfs image</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> mkdir ubi
<span class="gp">$</span> sudo mkfs.ubifs -m <span class="m">16384</span> -e 0x1f8000 -c <span class="m">2000</span> -r chroot_rootfs_ntc-chip ubi/ubifs.img
<span class="gp">$</span> sudo chown youruser:youruser ubi/ubifs.img
<span class="gp">$</span> ubinize -o ubi/ubi.img -m <span class="m">16384</span> -p 2MiB -s <span class="m">16384</span> cache_git/pmaports/device/testing/device-ntc-chip/ubinize.cfg
<span class="gp">$</span> img2simg ubi/ubi.img ubi/ubi.img.sparse <span class="m">2097152</span>
</pre></div>
<h2><span class="mw-headline" id="Flash_the_UBIfs_image">Flash the UBIfs image</span></h2>
<ul>
<li>Enter fastboot mode as described above</li>
<li>On your computer</li>
</ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> fastboot erase UBI
<span class="gp">$</span> fastboot flash UBI ubi/ubi.img.sparse
<span class="gp">$</span> fastboot reboot
</pre></div>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/1098">pmaports!1098</a> Initial merge request</li>
<li><a rel="nofollow" class="external text" href="https://linux-sunxi.org/NextThingCo_CHIP">Sunxi wiki page</a></li>
<li><a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/CHIP_(computer)">Wikipedia wiki page</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/Thore-Krug/Flash-CHIP">Tool for flashing the CHIP</a></li>
<li><a rel="nofollow" class="external text" href="https://byteporter.com/ntc-chip-micro-sd-slot/">CHIP microSD slot mod</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/umiddelb/armhf/wiki/Get-more-out-of-%22Das-U-Boot%22">Good U-Boot guide</a></li>
</ul>

</div></div>
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Devices.html" title="Category:Devices">Devices</a></li>
<li><a href="/index.php?title=Category:Debian_on_Linux_4.4&amp;action=edit&amp;redlink=1" class="new" title="Category:Debian on Linux 4.4 (page does not exist)">Debian on Linux 4.4</a></li>
<li><a href="/index.php?title=Category:Next_Thing_Co.&amp;action=edit&amp;redlink=1" class="new" title="Category:Next Thing Co. (page does not exist)">Next Thing Co.</a></li>
<li><a href="../en/Category:Not_booting.html" title="Category:Not booting">Not booting</a></li>
</ul>
</div></div>
		<div class="visualClear"></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=Next_Thing_Co._CHIP_(ntc-chip)&amp;oldid=42969">https://wiki.postmarketos.org/index.php?title=Next_Thing_Co._CHIP_(ntc-chip)&amp;oldid=42969</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 23 April 2023, at 14:29.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../en/About_postmarketOS.html" class="mw-redirect" title="PostmarketOS:About">About postmarketOS</a></li>
								<li id="footer-places-disclaimer"><a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-mobileview"><a href="https://wiki.postmarketos.org/index.php?title=Next_Thing_Co._CHIP_(ntc-chip)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"></a>					</li>
										<li id="footer-poweredbyico">
						<a href="https://www.mediawiki.org/"><img src="../poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="" width="88" height="31"></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		

</body>
</html>
