<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Display/Troubleshooting - postmarketOS Wiki</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.0">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="postmarketOS Wiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Wiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Display_Troubleshooting rootpage-Display_Troubleshooting skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	<header class="vector-header mw-header">
		<div class="vector-header-start">
			<nav class="vector-main-menu-landmark" aria-label="Site">
				
<div id="vector-main-menu-dropdown" class="vector-dropdown vector-main-menu-dropdown vector-button-flush-left vector-button-flush-right">
	<input type="checkbox" id="vector-main-menu-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-main-menu-dropdown" class="vector-dropdown-checkbox " aria-label="Main menu">
	<label id="vector-main-menu-dropdown-label" for="vector-main-menu-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-menu mw-ui-icon-wikimedia-menu"></span>

<span class="vector-dropdown-label-text">Main menu</span>
	</label>
	<div class="vector-dropdown-content">


				<div id="vector-main-menu-unpinned-container" class="vector-unpinned-container">
		
<div id="vector-main-menu" class="vector-main-menu vector-pinnable-element">
	<div class="vector-pinnable-header vector-main-menu-pinnable-header vector-pinnable-header-unpinned" data-feature-name="main-menu-pinned" data-pinnable-element-id="vector-main-menu" data-pinned-container-id="vector-main-menu-pinned-container" data-unpinned-container-id="vector-main-menu-unpinned-container">
	<div class="vector-pinnable-header-label">Main menu</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-main-menu.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-main-menu.unpin">hide</button>
</div>

	
<div id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation">
	<div class="vector-menu-heading">
		Navigation
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-mainpage-description" class="mw-list-item"><a href="../en/Main_Page.html" title="Visit the main page [z]" accesskey="z"><span>Main page</span></a></li>
<li id="n-Devices" class="mw-list-item"><a href="../en/Devices.html"><span>Devices</span></a></li>
		</ul>
		
	</div>
</div>

	
	
</div>

				</div>

	</div>
</div>

		</nav>
			
<a href="../en/Main_Page.html" class="mw-logo">
	<img class="mw-logo-icon" src="/logo_50x50.svg" alt="" aria-hidden="true" height="50" width="50">
	<span class="mw-logo-container skin-invert">
		<strong class="mw-logo-wordmark">postmarketOS Wiki</strong>
	</span>
</a>

		</div>
		<div class="vector-header-end">
			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-collapses vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<a href="../Special:Search.html" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only search-toggle" title="Search postmarketOS Wiki [f]" accesskey="f"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
	</a>
	<div class="vector-typeahead-search-container">
		<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail cdx-typeahead-search--auto-expand-width">
			<form action="/index.php" id="searchform" class="cdx-search-input cdx-search-input--has-end-button">
				<div id="simpleSearch" class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
					<div class="cdx-text-input cdx-text-input--has-start-icon">
						<input class="cdx-text-input__input" type="search" name="search" placeholder="Search postmarketOS Wiki" aria-label="Search postmarketOS Wiki" autocapitalize="sentences" title="Search postmarketOS Wiki [f]" accesskey="f" id="searchInput">
						<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
					</div>
					<input type="hidden" name="title" value="Special:Search">
				</div>
				<button class="cdx-button cdx-search-input__end-button">Search</button>
			</form>
		</div>
	</div>
</div>

			<nav class="vector-user-links vector-user-links-wide" aria-label="Personal tools">
	<div class="vector-user-links-main">
	
<div id="p-vector-user-menu-preferences" class="vector-menu mw-portlet emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

	
<div id="p-vector-user-menu-userpage" class="vector-menu mw-portlet emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

	<nav class="vector-appearance-landmark" aria-label="Appearance">
		
<div id="vector-appearance-dropdown" class="vector-dropdown " title="Change the appearance of the page's font size, width, and color">
	<input type="checkbox" id="vector-appearance-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-appearance-dropdown" class="vector-dropdown-checkbox " aria-label="Appearance">
	<label id="vector-appearance-dropdown-label" for="vector-appearance-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-appearance mw-ui-icon-wikimedia-appearance"></span>

<span class="vector-dropdown-label-text">Appearance</span>
	</label>
	<div class="vector-dropdown-content">


			<div id="vector-appearance-unpinned-container" class="vector-unpinned-container">
				
			</div>
		
	</div>
</div>

	</nav>
	
<div id="p-vector-user-menu-notifications" class="vector-menu mw-portlet emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

	
<div id="p-vector-user-menu-overflow" class="vector-menu mw-portlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			<li id="pt-login-2" class="user-links-collapsible-item mw-list-item user-links-collapsible-item">
<a data-mw="interface" href="/index.php?title=Special:UserLogin&amp;returnto=Display%2FTroubleshooting" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o" class=""><span>Log in</span></a>
</li>
<li id="pt-createaccount-2" class="user-links-collapsible-item mw-list-item user-links-collapsible-item">
<a data-mw="interface" href="../Special:RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory" class=""><span>Request account</span></a>
</li>

			
		</ul>
		
	</div>
</div>

	</div>
	
<div id="vector-user-links-dropdown" class="vector-dropdown vector-user-menu vector-button-flush-right vector-user-menu-logged-out user-links-collapsible-item" title="More options">
	<input type="checkbox" id="vector-user-links-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-user-links-dropdown" class="vector-dropdown-checkbox " aria-label="Personal tools">
	<label id="vector-user-links-dropdown-label" for="vector-user-links-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-ellipsis mw-ui-icon-wikimedia-ellipsis"></span>

<span class="vector-dropdown-label-text">Personal tools</span>
	</label>
	<div class="vector-dropdown-content">


		
<div id="p-personal" class="vector-menu mw-portlet mw-portlet-personal user-links-collapsible-item" title="User menu">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="pt-login" class="user-links-collapsible-item mw-list-item"><a href="/index.php?title=Special:UserLogin&amp;returnto=Display%2FTroubleshooting" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span class="vector-icon mw-ui-icon-logIn mw-ui-icon-wikimedia-logIn"></span> <span>Log in</span></a></li>
<li id="pt-createaccount" class="user-links-collapsible-item mw-list-item"><a href="../Special:RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Request account</span></a></li>
		</ul>
		
	</div>
</div>

	
	</div>
</div>

</nav>

		</div>
	</header>
</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Generic_debugging_steps" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Generic_debugging_steps">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Generic debugging steps</span>
			</div>
		</a>
		
			<button aria-controls="toc-Generic_debugging_steps-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Generic debugging steps subsection</span>
			</button>
		
		<ul id="toc-Generic_debugging_steps-sublist" class="vector-toc-list">
			<li id="toc-Look_at_~/.xsession-errors_and_~/.xsession-errors.old" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Look_at_~/.xsession-errors_and_~/.xsession-errors.old">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.1</span>
					<span>Look at ~/.xsession-errors and ~/.xsession-errors.old</span>
				</div>
			</a>
			
			<ul id="toc-Look_at_~/.xsession-errors_and_~/.xsession-errors.old-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Changing_the_panning" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Changing_the_panning">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.2</span>
					<span>Changing the panning</span>
				</div>
			</a>
			
			<ul id="toc-Changing_the_panning-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-LightDM_no_longer_starts_Xorg_on_device_without_GPU_driver" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#LightDM_no_longer_starts_Xorg_on_device_without_GPU_driver">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">1.3</span>
					<span>LightDM no longer starts Xorg on device without GPU driver</span>
				</div>
			</a>
			
			<ul id="toc-LightDM_no_longer_starts_Xorg_on_device_without_GPU_driver-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Generic_troubleshooting_(any_manufacturer)" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Generic_troubleshooting_(any_manufacturer)">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Generic troubleshooting (any manufacturer)</span>
			</div>
		</a>
		
			<button aria-controls="toc-Generic_troubleshooting_(any_manufacturer)-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Generic troubleshooting (any manufacturer) subsection</span>
			</button>
		
		<ul id="toc-Generic_troubleshooting_(any_manufacturer)-sublist" class="vector-toc-list">
			<li id="toc-Screen_does_not_refresh" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen_does_not_refresh">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>Screen does not refresh</span>
				</div>
			</a>
			
			<ul id="toc-Screen_does_not_refresh-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Colors_are_wrong_in_some_way" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Colors_are_wrong_in_some_way">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>Colors are wrong in some way</span>
				</div>
			</a>
			
			<ul id="toc-Colors_are_wrong_in_some_way-sublist" class="vector-toc-list">
				<li id="toc-Qualcomm_MSM_devices" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Qualcomm_MSM_devices">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>Qualcomm MSM devices</span>
				</div>
			</a>
			
			<ul id="toc-Qualcomm_MSM_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Exynos_devices" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Exynos_devices">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.2</span>
					<span>Exynos devices</span>
				</div>
			</a>
			
			<ul id="toc-Exynos_devices-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Qualcomm_framebuffer_(mdss,_mdp3)" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Qualcomm_framebuffer_(mdss,_mdp3)">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Qualcomm framebuffer (mdss, mdp3)</span>
			</div>
		</a>
		
			<button aria-controls="toc-Qualcomm_framebuffer_(mdss,_mdp3)-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Qualcomm framebuffer (mdss, mdp3) subsection</span>
			</button>
		
		<ul id="toc-Qualcomm_framebuffer_(mdss,_mdp3)-sublist" class="vector-toc-list">
			<li id="toc-MSM_framebuffer_doesn't_work" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#MSM_framebuffer_doesn't_work">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>MSM framebuffer doesn't work</span>
				</div>
			</a>
			
			<ul id="toc-MSM_framebuffer_doesn't_work-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Screen_output_flicker_and_inactivity" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen_output_flicker_and_inactivity">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Screen output flicker and inactivity</span>
				</div>
			</a>
			
			<ul id="toc-Screen_output_flicker_and_inactivity-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Screen_output_messed_up" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen_output_messed_up">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Screen output messed up</span>
				</div>
			</a>
			
			<ul id="toc-Screen_output_messed_up-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Screen_is_blank_outside_of_Weston" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Screen_is_blank_outside_of_Weston">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Screen is blank outside of Weston</span>
				</div>
			</a>
			
			<ul id="toc-Screen_is_blank_outside_of_Weston-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Debugging_the_kernel_driver" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Debugging_the_kernel_driver">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">4</span>
				<span>Debugging the kernel driver</span>
			</div>
		</a>
		
			<button aria-controls="toc-Debugging_the_kernel_driver-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Debugging the kernel driver subsection</span>
			</button>
		
		<ul id="toc-Debugging_the_kernel_driver-sublist" class="vector-toc-list">
			<li id="toc-Example:_error_in_Xorg.0.log" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Example:_error_in_Xorg.0.log">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.1</span>
					<span>Example: error in Xorg.0.log</span>
				</div>
			</a>
			
			<ul id="toc-Example:_error_in_Xorg.0.log-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Example:_red_and_blue_colors_are_swapped" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Example:_red_and_blue_colors_are_swapped">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">4.2</span>
					<span>Example: red and blue colors are swapped</span>
				</div>
			</a>
			
			<ul id="toc-Example:_red_and_blue_colors_are_swapped-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-See_also" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#See_also">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">5</span>
				<span>See also</span>
			</div>
		</a>
		
		<ul id="toc-See_also-sublist" class="vector-toc-list">
		</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading"><span class="mw-page-title-main">Display/Troubleshooting</span></h1>
				</header>
				<div class="vector-page-toolbar">
					<div class="vector-page-toolbar-container">
						<div id="left-navigation">
							<nav aria-label="Namespaces">
								
<div id="p-associated-pages" class="vector-menu vector-menu-tabs mw-portlet mw-portlet-associated-pages">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-nstab-main" class="selected vector-tab-noicon mw-list-item"><a href="../en/Display_Troubleshooting.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new vector-tab-noicon mw-list-item"><a href="/index.php?title=Talk:Display/Troubleshooting&amp;action=edit&amp;redlink=1" rel="discussion" class="new" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
		</ul>
		
	</div>
</div>

								
<div id="vector-variants-dropdown" class="vector-dropdown emptyPortlet">
	<input type="checkbox" id="vector-variants-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-variants-dropdown" class="vector-dropdown-checkbox " aria-label="Change language variant">
	<label id="vector-variants-dropdown-label" for="vector-variants-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet" aria-hidden="true"><span class="vector-dropdown-label-text">English</span>
	</label>
	<div class="vector-dropdown-content">


					
<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

				
	</div>
</div>

							</nav>
						</div>
						<div id="right-navigation" class="vector-collapsible">
							<nav aria-label="Views">
								
<div id="p-views" class="vector-menu vector-menu-tabs mw-portlet mw-portlet-views">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-view" class="selected vector-tab-noicon mw-list-item"><a href="../en/Display_Troubleshooting.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="vector-tab-noicon mw-list-item"><a href="/index.php?title=Display/Troubleshooting&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="vector-tab-noicon mw-list-item"><a href="/index.php?title=Display/Troubleshooting&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
		</ul>
		
	</div>
</div>

							</nav>
				
							<nav class="vector-page-tools-landmark" aria-label="Page tools">
								
<div id="vector-page-tools-dropdown" class="vector-dropdown vector-page-tools-dropdown">
	<input type="checkbox" id="vector-page-tools-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-tools-dropdown" class="vector-dropdown-checkbox " aria-label="Tools">
	<label id="vector-page-tools-dropdown-label" for="vector-page-tools-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet" aria-hidden="true"><span class="vector-dropdown-label-text">Tools</span>
	</label>
	<div class="vector-dropdown-content">


									<div id="vector-page-tools-unpinned-container" class="vector-unpinned-container">
						
<div id="vector-page-tools" class="vector-page-tools vector-pinnable-element">
	<div class="vector-pinnable-header vector-page-tools-pinnable-header vector-pinnable-header-unpinned" data-feature-name="page-tools-pinned" data-pinnable-element-id="vector-page-tools" data-pinned-container-id="vector-page-tools-pinned-container" data-unpinned-container-id="vector-page-tools-unpinned-container">
	<div class="vector-pinnable-header-label">Tools</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-page-tools.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-page-tools.unpin">hide</button>
</div>

	
<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions vector-has-collapsible-items" title="More options">
	<div class="vector-menu-heading">
		Actions
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Display_Troubleshooting.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Display/Troubleshooting&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Display/Troubleshooting&amp;action=history"><span>View history</span></a></li>
<li id="ca-cargo-purge" class="mw-list-item"><a href="/index.php?title=Display/Troubleshooting&amp;action=purge"><span>Purge cache</span></a></li>
		</ul>
		
	</div>
</div>

<div id="p-tb" class="vector-menu mw-portlet mw-portlet-tb">
	<div class="vector-menu-heading">
		General
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="t-whatlinkshere" class="mw-list-item"><a href="../Special:WhatLinksHere_Display_Troubleshooting.html" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li>
<li id="t-recentchangeslinked" class="mw-list-item"><a href="../Special:RecentChangesLinked_Display_Troubleshooting.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li>
<li id="t-specialpages" class="mw-list-item"><a href="../Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li>
<li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li>
<li id="t-permalink" class="mw-list-item"><a href="/index.php?title=Display/Troubleshooting&amp;oldid=67355" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li>
<li id="t-info" class="mw-list-item"><a href="/index.php?title=Display/Troubleshooting&amp;action=info" title="More information about this page"><span>Page information</span></a></li>
<li id="t-cargopagevalueslink" class="mw-list-item"><a href="/index.php?title=Display/Troubleshooting&amp;action=pagevalues" rel="cargo-pagevalues"><span>Cargo data</span></a></li>
		</ul>
		
	</div>
</div>

<div id="p-The_usual_wiki_links" class="vector-menu mw-portlet mw-portlet-The_usual_wiki_links">
	<div class="vector-menu-heading">
		The usual wiki links
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-Editor's-Guide" class="mw-list-item"><a href="../en/Help:Wiki_editor's_guide.html"><span>Editor's Guide</span></a></li>
<li id="n-recentchanges" class="mw-list-item"><a href="../Special:RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li>
<li id="n-randompage" class="mw-list-item"><a href="../Special:Random.html" title="Load a random page [x]" accesskey="x"><span>Random page</span></a></li>
<li id="n-Templates" class="mw-list-item"><a href="../en/PostmarketOS:Templates.html"><span>Templates</span></a></li>
		</ul>
		
	</div>
</div>

</div>

									</div>
				
	</div>
</div>

							</nav>
						</div>
					</div>
				</div>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From postmarketOS Wiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div id="contentSub" style="margin-top: -8px; margin-bottom: 18px;">
<span class="subpages">&lt; <a href="../en/Display.html" title="Display">Display</a></span>‎</div>
<meta property="mw:PageProp/toc">
<h1><span class="mw-headline" id="Generic_debugging_steps">Generic debugging steps</span></h1>
<h2>
<span id="Look_at_.7E.2F.xsession-errors_and_.7E.2F.xsession-errors.old"></span><span class="mw-headline" id="Look_at_~/.xsession-errors_and_~/.xsession-errors.old">Look at ~/.xsession-errors and ~/.xsession-errors.old</span>
</h2>
<p>When lightDM starts your session, it redirects its output in that file. Including if that's a Wayland session!
</p>
<p>If both files are empty, you can expect your graphical interface to have started without error. If they aren't created, lightDM may not have been started successfully. You can also try this: <a href="../en/Display_manager.html#CanGraphical_issue" title="Display manager">Display_manager#CanGraphical_issue</a> .
</p>
<h2><span class="mw-headline" id="Changing_the_panning">Changing the panning</span></h2>
<p>Some devices might have a framebuffer virtual size that's twice as big as the panel resolution, this is a common double buffering method. The application renders to one side of the display while the panning is set to
the other side. You can try changing the panning with the `panning` file in the sysfs directory.
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>/sys/class/graphics/fb0/virtual_size
<span class="go">720,1280</span>
<span class="gp">$ </span>cat<span class="w"> </span>/sys/class/graphics/fb0/pan
<span class="go">todo: add file contents here</span>
<span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/class/graphics/fb0/pan
</pre></div>
<h2><span class="mw-headline" id="LightDM_no_longer_starts_Xorg_on_device_without_GPU_driver">LightDM no longer starts Xorg on device without GPU driver</span></h2>
<p>Set <code>logind-check-graphical=false</code> in <code>/usr/share/lightdm/lightdm.conf.d/some-file.conf</code>.
</p>
<p>See also: <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmaports/-/merge_requests/3827">pmaports!3827</a>, <a rel="nofollow" class="external free" href="https://github.com/canonical/lightdm/commit/77a7c6b7b8ca896b98ef43826641bdd520650bfb">https://github.com/canonical/lightdm/commit/77a7c6b7b8ca896b98ef43826641bdd520650bfb</a>
</p>
<h1>
<span id="Generic_troubleshooting_.28any_manufacturer.29"></span><span class="mw-headline" id="Generic_troubleshooting_(any_manufacturer)">Generic troubleshooting (any manufacturer)</span>
</h1>
<h2><span class="mw-headline" id="Screen_does_not_refresh">Screen does not refresh</span></h2>
<p>Symptoms of this problem may, for instance, be that the desktop environment starts and is displayed with initial content, but is frozen at that moment and never updates. At first it may seem to be a touchscreen problem, but the lack of automatic changes (e.g. clock showing current time) can point of frozen display instead.
</p>
<p>Check if your screen refreshes when you do the following:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>/sys/class/graphics/fb0/modes<span class="w"> </span>&gt;<span class="w"> </span>/sys/class/graphics/fb0/mode
</pre></div>
<p>If it does, add <code>msm-fb-refresher</code> to the <code>depends=</code> of your device-package. It will basically do the same automatically. Despite the name, the tool is not specific to MSM at all, and is usually required for MediaTek-based mobile devices.
</p>
<p>(If the above command does <i>not</i> refresh your screen, you could try the <code>msm-fb-refresher</code> anyway.)
</p>
<table role="text container" style="color: inherit; background-color: #f6efe5; border: 1px solid #ac6600; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center; line-height: 1;"><span style="white-space: nowrap;"><span typeof="mw:File"><span title="Note"><img alt="Note" src="../Reference_icon.svg" decoding="async" width="20" height="20" class="mw-file-element"></span></span></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">Make sure you zap the device rootfs after enabling the msm refresher, otherwise it will only get installed as a service and not enabled by the postmarketos-base install script (you'll only see a second of splash-screen otherwise and the refresher won't be restarted after exiting the initramfs</td>
</tr></tbody></table>
<h2><span class="mw-headline" id="Colors_are_wrong_in_some_way">Colors are wrong in some way</span></h2>
<p>Different framebuffer modes exist where the order of colors and transparency differ. Typically you have R (red) G (green) B (blue) and A (transparency), and they might be supplied as RGBA, BGRA, ARGB or another variant. If the order is wrong you can have different issues:
</p>
<ul>
<li>Everything is red-ish: <a rel="nofollow" class="external text" href="https://imgur.com/a/izehE">example</a>
</li>
<li>Blue and red are swapped: <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmaports/uploads/4cfb043d46ef1c0fa0d50484a66062ea/image0__1_.jpg">example</a>
</li>
<li>Screen appears to show nothing (observed by switching from RGBA (which is correct) to ARGB)</li>
</ul>
<p>To try to find a fix you need to locate the place(s) where the order is defined or set, somewhere in drivers/video. If the suggested patches in the subsections below do not work for you then have a look in the <a href="../en/Display_Troubleshooting.html#Debugging_the_kernel_driver" class="mw-redirect" title="Troubleshooting:display">Debugging the kernel driver</a>-section.
</p>
<h3><span class="mw-headline" id="Qualcomm_MSM_devices">Qualcomm MSM devices</span></h3>
<p>On Qualcomm devices the correct file should be <code>drivers/video/msm/msm_fb.c</code> or <code>drivers/video/msm/mdss/mdss_fb.c</code>. Changing the mode can (hopefully) be done in one of the following ways:
</p>
<div class="mw-highlight mw-highlight-lang-diff mw-content-ltr" dir="ltr"><pre><span></span><span class="gh">diff --git a/drivers/video/msm/mdss/mdss_fb.c b/drivers/video/msm/mdss/mdss_fb.c</span>
<span class="gh">index 53112ca6..69673017 100644</span>
<span class="gd">--- a/drivers/video/msm/mdss/mdss_fb.c</span>
<span class="gi">+++ b/drivers/video/msm/mdss/mdss_fb.c</span>
<span class="gu">@@ -569,7 +569,7 @@ static int mdss_fb_probe(struct platform_device *pdev)</span>
<span class="w"> </span>	mfd-&gt;bl_level = 0;
<span class="w"> </span>	mfd-&gt;bl_scale = 1024;
	mfd-&gt;bl_min_lvl = 30;
<span class="gd">-	mfd-&gt;fb_imgType = MDP_RGBA_8888;</span>
<span class="gi">+	mfd-&gt;fb_imgType = MDP_RGB_888;</span>
<span class="w"> </span>
<span class="w"> </span>	mfd-&gt;pdev = pdev;
<span class="w"> </span>	if (pdata-&gt;next)
</pre></div>
<p>imgType could also be <code>MDP_RGBA_8888</code> like with <a rel="nofollow" class="external text" href="https://wiki.postmarketos.org/wiki/Motorola_Moto_E_2014_(motorola-condor)">motorola-condor</a> and probably some other MSM8210 devices
</p>
<p>Alternative patch (requires <code>CONFIG_FB_MSM_DEFAULT_DEPTH_ARGB8888=y</code> in the kernel config):
</p>
<div class="mw-highlight mw-highlight-lang-diff mw-content-ltr" dir="ltr"><pre><span></span>From [https://cascardo.eti.br/patches/0001-fix-video-argb-setting.patch 0001-fix-video-argb-setting.patch]
<span class="gh">diff --git a/drivers/video/msm/msm_fb.c b/drivers/video/msm/msm_fb.c</span>
<span class="gh">index 251a5cbb753d..dcd9262a88f4 100644</span>
<span class="gd">--- a/drivers/video/msm/msm_fb.c</span>
<span class="gi">+++ b/drivers/video/msm/msm_fb.c</span>
<span class="gu">@@ -1342,16 +1342,16 @@ static int msm_fb_register(struct msm_fb_data_type *mfd)</span>
<span class="w"> </span>		fix-&gt;xpanstep = 1;
<span class="w"> </span>		fix-&gt;ypanstep = 1;
<span class="w"> </span>		var-&gt;vmode = FB_VMODE_NONINTERLACED;
<span class="gd">-		var-&gt;blue.offset = 0;</span>
<span class="gd">-		var-&gt;green.offset = 8;</span>
<span class="gd">-		var-&gt;red.offset = 16;</span>
<span class="gi">+		var-&gt;blue.offset = 24;</span>
<span class="gi">+		var-&gt;green.offset = 16;</span>
<span class="gi">+		var-&gt;red.offset = 8;</span>
<span class="w"> </span>		var-&gt;blue.length = 8;
<span class="w"> </span>		var-&gt;green.length = 8;
<span class="w"> </span>		var-&gt;red.length = 8;
<span class="w"> </span>		var-&gt;blue.msb_right = 0;
<span class="w"> </span>		var-&gt;green.msb_right = 0;
<span class="w"> </span>		var-&gt;red.msb_right = 0;
<span class="gd">-		var-&gt;transp.offset = 24;</span>
<span class="gi">+		var-&gt;transp.offset = 0;</span>
<span class="w"> </span>		var-&gt;transp.length = 8;
<span class="w"> </span>		bpp = 4;
<span class="w"> </span>		break;
<span class="gu">@@ -1361,16 +1361,16 @@ static int msm_fb_register(struct msm_fb_data_type *mfd)</span>
<span class="w"> </span>		fix-&gt;xpanstep = 1;
<span class="w"> </span>		fix-&gt;ypanstep = 1;
<span class="w"> </span>		var-&gt;vmode = FB_VMODE_NONINTERLACED;
<span class="gd">-		var-&gt;blue.offset = 8;</span>
<span class="gd">-		var-&gt;green.offset = 16;</span>
<span class="gd">-		var-&gt;red.offset = 24;</span>
<span class="gi">+		var-&gt;blue.offset = 16;</span>
<span class="gi">+		var-&gt;green.offset = 8;</span>
<span class="gi">+		var-&gt;red.offset = 0;</span>
<span class="w"> </span>		var-&gt;blue.length = 8;
<span class="w"> </span>		var-&gt;green.length = 8;
<span class="w"> </span>		var-&gt;red.length = 8;
<span class="w"> </span>		var-&gt;blue.msb_right = 0;
<span class="w"> </span>		var-&gt;green.msb_right = 0;
<span class="w"> </span>		var-&gt;red.msb_right = 0;
<span class="gd">-		var-&gt;transp.offset = 0;</span>
<span class="gi">+		var-&gt;transp.offset = 24;</span>
<span class="w"> </span>		var-&gt;transp.length = 8;
<span class="w"> </span>		bpp = 4;
<span class="w"> </span>		break;
<span class="gu">@@ -2260,15 +2260,15 @@ static int msm_fb_check_var(struct fb_var_screeninfo *var, struct fb_info *info)</span>
<span class="w"> </span>		/* Figure out if the user meant RGBA or ARGB
<span class="w"> </span>		   and verify the position of the RGB components */
<span class="w"> </span>
<span class="gd">-		if (var-&gt;transp.offset == 24) {</span>
<span class="gd">-			if ((var-&gt;blue.offset != 0) ||</span>
<span class="gd">-			    (var-&gt;green.offset != 8) ||</span>
<span class="gd">-			    (var-&gt;red.offset != 16))</span>
<span class="gd">-				return -EINVAL;</span>
<span class="gd">-		} else if (var-&gt;transp.offset == 0) {</span>
<span class="gd">-			if ((var-&gt;blue.offset != 8) ||</span>
<span class="gi">+		if (var-&gt;transp.offset == 0) {</span>
<span class="gi">+			if ((var-&gt;blue.offset != 24) ||</span>
<span class="w"> </span>			    (var-&gt;green.offset != 16) ||
<span class="gd">-			    (var-&gt;red.offset != 24))</span>
<span class="gi">+			    (var-&gt;red.offset != 8))</span>
<span class="gi">+				return -EINVAL;</span>
<span class="gi">+		} else if (var-&gt;transp.offset == 24) {</span>
<span class="gi">+			if ((var-&gt;blue.offset != 16) ||</span>
<span class="gi">+			    (var-&gt;green.offset != 8) ||</span>
<span class="gi">+			    (var-&gt;red.offset != 0))</span>
<span class="w"> </span>				return -EINVAL;
<span class="w"> </span>		} else
<span class="w"> </span>			return -EINVAL;
<span class="gu">@@ -2365,7 +2365,7 @@ static int msm_fb_set_par(struct fb_info *info)</span>
<span class="w"> </span>		break;
<span class="w"> </span>
<span class="w"> </span>	case 32:
<span class="gd">-		if (var-&gt;transp.offset == 24)</span>
<span class="gi">+		if (var-&gt;transp.offset == 0)</span>
<span class="w"> </span>			mfd-&gt;fb_imgType = MDP_ARGB_8888;
<span class="w"> </span>		else
<span class="w"> </span>			mfd-&gt;fb_imgType = MDP_RGBA_8888;
</pre></div>
<p>You might also need to add the mode, as done for <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmaports/-/blob/64035ac46307bd27888efc0d3af841936e9dee7b/device/testing/linux-xiaomi-santoni/99_framebuffer.patch">linux-xiaomi-santoni</a>:
</p>
<div class="mw-highlight mw-highlight-lang-diff mw-content-ltr" dir="ltr"><pre><span></span><span class="gh">diff --git a/drivers/video/msm/mdss/mdss_fb.c b/drivers/video/msm/mdss/mdss_fb.c</span>
<span class="gh">index 075ee8a3880..b4531f66a06 100644</span>
<span class="gd">--- a/drivers/video/msm/mdss/mdss_fb.c</span>
<span class="gi">+++ b/drivers/video/msm/mdss/mdss_fb.c</span>
<span class="gu">@@ -868,7 +868,8 @@ static int mdss_fb_probe(struct platform_device *pdev)</span>
<span class="w"> </span>	mfd-&gt;bl_scale = 1024;
<span class="w"> </span>	mfd-&gt;bl_min_lvl = 30;
<span class="w"> </span>	mfd-&gt;ad_bl_level = 0;
<span class="gd">-	mfd-&gt;fb_imgType = MDP_RGBA_8888;</span>
<span class="gi">+	// Default framebuffer format.</span>
<span class="gi">+	mfd-&gt;fb_imgType = MDP_BGRA_8888;</span>
<span class="w"> </span>	mfd-&gt;calib_mode_bl = 0;
<span class="w"> </span>
<span class="w"> </span>	if (mfd-&gt;panel.type == MIPI_VIDEO_PANEL ||
<span class="gu">@@ -2143,6 +2144,25 @@ static int mdss_fb_register(struct msm_fb_data_type *mfd)</span>
<span class="w"> </span>		bpp = 4;
<span class="w"> </span>		break;
<span class="w"> </span>
<span class="gi">+	case MDP_BGRA_8888:</span>
<span class="gi">+		fix-&gt;type = FB_TYPE_PACKED_PIXELS;</span>
<span class="gi">+		fix-&gt;xpanstep = 1;</span>
<span class="gi">+		fix-&gt;ypanstep = 1;</span>
<span class="gi">+		var-&gt;vmode = FB_VMODE_NONINTERLACED;</span>
<span class="gi">+		var-&gt;blue.offset = 0;</span>
<span class="gi">+		var-&gt;green.offset = 8;</span>
<span class="gi">+		var-&gt;red.offset = 16;</span>
<span class="gi">+		var-&gt;blue.length = 8;</span>
<span class="gi">+		var-&gt;green.length = 8;</span>
<span class="gi">+		var-&gt;red.length = 8;</span>
<span class="gi">+		var-&gt;blue.msb_right = 0;</span>
<span class="gi">+		var-&gt;green.msb_right = 0;</span>
<span class="gi">+		var-&gt;red.msb_right = 0;</span>
<span class="gi">+		var-&gt;transp.offset = 24;</span>
<span class="gi">+		var-&gt;transp.length = 8;</span>
<span class="gi">+		bpp = 4;</span>
<span class="gi">+		break;</span>
<span class="gi">+</span>
<span class="w"> </span>	case MDP_YCRYCB_H2V1:
<span class="w"> </span>		fix-&gt;type = FB_TYPE_INTERLEAVED_PLANES;
<span class="w"> </span>		fix-&gt;xpanstep = 2;
</pre></div>
<p>Another possible workaround might be setting the default color depth to 16 bits per pixel (see <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmaports/merge_requests/132#note_133044017">this comment</a>).
</p>
<h3><span class="mw-headline" id="Exynos_devices">Exynos devices</span></h3>
<p>On newer exynos devices you typically need to edit a file in <code>drivers/video/fbdev/exynos/SOMETHING/decon_dsi.c</code>.
</p>
<p>To fix the problem where red and blue were swapped for dreamlte (exynos8895) the following patch worked:
</p>
<div class="mw-highlight mw-highlight-lang-diff mw-content-ltr" dir="ltr"><pre><span></span><span class="gh">diff --git a/drivers/video/fbdev/exynos/dpu/decon_dsi.c b/drivers/video/fbdev/exynos/dpu/decon_dsi.c</span>
<span class="gh">index eeaa2ba19778..3e597a145432 100644</span>
<span class="gd">--- a/drivers/video/fbdev/exynos/dpu/decon_dsi.c</span>
<span class="gi">+++ b/drivers/video/fbdev/exynos/dpu/decon_dsi.c</span>
<span class="gu">@@ -862,11 +862,11 @@ int decon_check_var(struct fb_var_screeninfo *var, struct fb_info *info)</span>
<span class="w"> </span>	case 24:
<span class="w"> </span>		/* our 24bpp is unpacked, so 32bpp */
<span class="w"> </span>		var-&gt;bits_per_pixel	= 32;
<span class="gd">-		var-&gt;red.offset		= 16;</span>
<span class="gi">+		var-&gt;red.offset		= 0;</span>
<span class="w"> </span>		var-&gt;red.length		= 8;
<span class="w"> </span>		var-&gt;green.offset	= 8;
<span class="w"> </span>		var-&gt;green.length	= 8;
<span class="gd">-		var-&gt;blue.offset	= 0;</span>
<span class="gi">+		var-&gt;blue.offset	= 16;</span>
<span class="w"> </span>		var-&gt;blue.length	= 8;
<span class="w"> </span>		break;
</pre></div>
<p>How this patch was found is described in the <a href="../en/Display_Troubleshooting.html#Debugging_the_kernel_driver" class="mw-redirect" title="Troubleshooting:display">Debugging the kernel driver</a>-section.
</p>
<h1>
<span id="Qualcomm_framebuffer_.28mdss.2C_mdp3.29"></span><span class="mw-headline" id="Qualcomm_framebuffer_(mdss,_mdp3)">Qualcomm framebuffer (mdss, mdp3)</span>
</h1>
<h2>
<span id="MSM_framebuffer_doesn.27t_work"></span><span class="mw-headline" id="MSM_framebuffer_doesn't_work">MSM framebuffer doesn't work</span>
</h2>
<p>We found out that removing the 3D driver support makes the MSM framebuffer work. See <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmbootstrap/-/merge_requests/66">#66</a>.
</p>
<pre>CONFIG_MSM_KGSL=n

-&gt; Device Drivers
    -&gt; Graphics support
        -&gt; MSM 3D Graphics driver</pre>
<p>On devices using the mdss_fb driver, adding <code>mdss-fb-init-hack</code> to the dependencies of the device package (<a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmaports/-/blob/7463d922936cfbb084ebdcb97e8968ac83f1ed4a/device/testing/device-sony-amami/APKBUILD#L9">example</a>) might help.
</p>
<h2><span class="mw-headline" id="Screen_output_flicker_and_inactivity">Screen output flicker and inactivity</span></h2>
<p>If you notice a very brief flicker upon boot, but immediately disappears and screen turns black, you might have a buggy framebuffer Qualcomm MDSS MDP3 driver.
</p>
<p>You can try patching the source code by removing the function assigned to the <code>mdp3_interface-&gt;off_fnc</code> in the <code>mdp3_ctrl.c</code> file.
</p>
<p>See example patch: <a rel="nofollow" class="external autonumber" href="https://gitlab.postmarketos.org/postmarketOS/pmaports/-/blob/64035ac46307bd27888efc0d3af841936e9dee7b/device/testing/linux-huawei-y530/05_fix_mdp3_ctrl_off.patch">[1]</a>
</p>
<h2><span class="mw-headline" id="Screen_output_messed_up">Screen output messed up</span></h2>
<p>If the output on the screen is not aligned correctly (<a rel="nofollow" class="external text" href="https://user-images.githubusercontent.com/315080/30261765-c28df28e-96d6-11e7-971a-fd031704a810.jpg">see picture</a>) it's probably because you have a wrong value in <code>/sys/class/graphics/fb0/bits_per_pixel</code>.
</p>
<p>You can try patching the source code by setting a different video mode (RGB/ARGB/RGBA/YCRYCB/...).
</p>
<p>This may also help, when your X11 is segfaulting (see <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmbootstrap/-/issues/779">#779</a>).
</p>
<p>See example patch: <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmaports/-/blob/64035ac46307bd27888efc0d3af841936e9dee7b/device/testing/linux-huawei-y530/06_fix_mdss_fb_rgb_mode.patch">06_fix_mdss_fb_rgb_mode.patch</a>
</p>
<h2><span class="mw-headline" id="Screen_is_blank_outside_of_Weston">Screen is blank outside of Weston</span></h2>
<p>Something like that should help, see <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmbootstrap/-/issues/603#note_85242254">#603</a>:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="m">0</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/class/graphics/fb0/blank
<span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="m">1</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/devices/fd900000.qcom,mdss_mdp/qcom,mdss_fb_primary.134/leds/lcd-backlight/brightness
</pre></div>
<h1><span class="mw-headline" id="Debugging_the_kernel_driver">Debugging the kernel driver</span></h1>
<p>Generally to understand what happens in the kernel you want to print messages to dmesg with information like error codes or the value of some variable. 
</p>
<p>The quickest way to try different kernel patches is to obtain the kernel source (<code>git clone</code> or download a source tar archive), add debug messages, build the kernel with envkernel.sh and then flash it. The whole build and flash procedure is described in <a href="../en/Compiling_kernels_with_envkernel.sh.html" title="Compiling kernels with envkernel.sh">Compiling kernels with envkernel.sh</a>. Compiling and flashing only the kernel is faster than compiling and re-installing the kernel and rootfs everytime, which is done when you run <code>pmbootstrap install [--android-recovery-zip]</code>.
</p>
<p>To add debug messages you need to find interesting places where to add those though. If you have a display issue then <code>drivers/video/</code> should be where to look.
</p>
<h2><span class="mw-headline" id="Example:_error_in_Xorg.0.log">Example: error in Xorg.0.log</span></h2>
<p>In <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmbootstrap/-/issues/1618">pmbootstrap#1618</a> the screen just showed noise, and /var/log/Xorg.0.log contained lots of these errors: <code>(EE) FBDEV(0): FBIOPUTCMAP: Invalid argument</code>. It was desired to get more information about the error (what exactly is the invalid argument?). 
</p>
<p><code>grep</code>ing for FBIOPUTCMAP in the kernel source showed that the error comes from drivers/video/fbmem.c, and so some suitable debug messages could be:
</p>
<div class="mw-highlight mw-highlight-lang-diff mw-content-ltr" dir="ltr"><pre><span></span><span class="gh">diff --git a/drivers/video/fbmem.c b/drivers/video/fbmem.c</span>
<span class="gh">index 3e6371dc9038..a3ccb86baec6 100755</span>
<span class="gd">--- a/drivers/video/fbmem.c</span>
<span class="gi">+++ b/drivers/video/fbmem.c</span>
<span class="gu">@@ -1096,9 +1096,15 @@ static long do_fb_ioctl(struct fb_info *info, unsigned int cmd,</span>
<span class="w"> </span>		ret = copy_to_user(argp, &amp;fix, sizeof(fix)) ? -EFAULT : 0;
<span class="w"> </span>		break;
<span class="w"> </span>	case FBIOPUTCMAP:
<span class="gd">-		if (copy_from_user(&amp;cmap, argp, sizeof(cmap)))</span>
<span class="gi">+			printk(KERN_ERR "PMOS DEBUG: calling copy_from_user...\n");</span>
<span class="gi">+		if (copy_from_user(&amp;cmap, argp, sizeof(cmap))) {</span>
<span class="gi">+			printk(KERN_ERR "PMOS DEBUG: copy_from_user failed!\n");</span>
<span class="w"> </span>			return -EFAULT;
<span class="gi">+		}</span>
<span class="gi">+		printk(KERN_ERR "PMOS DEBUG: copy_from_user ok!\n");</span>
<span class="gi">+		printk(KERN_ERR "PMOS DEBUG: calling fb_set_user_cmap...\n");</span>
<span class="w"> </span>		ret = fb_set_user_cmap(&amp;cmap, info);
<span class="gi">+		printk(KERN_ERR "PMOS DEBUG: fb_set_user_cmap returned %d\n", ret);</span>
<span class="w"> </span>		break;
<span class="w"> </span>	case FBIOGETCMAP:
<span class="w"> </span>		if (copy_from_user(&amp;cmap, argp, sizeof(cmap)))
</pre></div>
<h2><span class="mw-headline" id="Example:_red_and_blue_colors_are_swapped">Example: red and blue colors are swapped</span></h2>
<p>In <a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmaports/-/issues/916">pmaports#916</a> red and blue were switched on the display. As described in <a href="../en/Display_Troubleshooting.html#Colors_are_wrong_in_some_way" class="mw-redirect" title="Troubleshooting:display">Colors are wrong in some way</a> this most likely meant that that the framebuffer mode had to be changed somewhere. <code>grep</code>ing for <code>BGRA</code>, <code>RGBA</code> and <code>red\.offset</code> in drivers/video/ showed quite a lot of places to investigate. Since this was on an exynos device files in <code>drivers/video/fbdev/exynos</code> seemed especially interesting.
</p>
<p>Since for many Qualcomm devices it was possible to simply change the mode from BGRA to RGBA or vice-versa, the first thing tried was this patch:
</p>
<div class="mw-highlight mw-highlight-lang-diff mw-content-ltr" dir="ltr"><pre><span></span><span class="gh">diff --git a/drivers/video/fbdev/exynos/decon_8890/decon_core.c b/drivers/video/fbdev/exynos/decon_8890/decon_core.c</span>
<span class="gh">index 2b65c68d8c74..388e94077847 100644</span>
<span class="gd">--- a/drivers/video/fbdev/exynos/decon_8890/decon_core.c</span>
<span class="gi">+++ b/drivers/video/fbdev/exynos/decon_8890/decon_core.c</span>
<span class="gu">@@ -3924,7 +3924,8 @@ static int decon_probe(struct platform_device *pdev)</span>
<span class="w"> </span>               decon-&gt;vpp_used[decon-&gt;default_idma] = true;
<span class="w"> </span>               memset(&amp;config, 0, sizeof(struct decon_win_config));
<span class="w"> </span>               config.vpp_parm.addr[0] = fbinfo-&gt;fix.smem_start;
<span class="gd">-               config.format = DECON_PIXEL_FORMAT_RGBA_8888;</span>
<span class="gi">+               pr_err("PMOS DEBUG: decon_8890/decon_core: setting format to BGRA\n");</span>
<span class="gi">+               config.format = DECON_PIXEL_FORMAT_BGRA_8888;</span>
<span class="w"> </span>               config.src.w = fbinfo-&gt;var.xres;
<span class="w"> </span>               config.src.h = fbinfo-&gt;var.yres;
<span class="w"> </span>               config.src.f_w = fbinfo-&gt;var.xres;
<span class="gh">diff --git a/drivers/video/fbdev/exynos/dpu/decon_core.c b/drivers/video/fbdev/exynos/dpu/decon_core.c</span>
<span class="gh">index 152c86e06d74..662c0dc1a74f 100644</span>
<span class="gd">--- a/drivers/video/fbdev/exynos/dpu/decon_core.c</span>
<span class="gi">+++ b/drivers/video/fbdev/exynos/dpu/decon_core.c</span>
<span class="gu">@@ -4076,7 +4076,8 @@ static int decon_initial_display(struct decon_device *decon, bool is_colormap)</span>
<span class="w"> </span>       set_bit(decon-&gt;dt.dft_idma, &amp;decon-&gt;prev_used_dpp);
<span class="w"> </span>       memset(&amp;config, 0, sizeof(struct decon_win_config));
<span class="w"> </span>       config.dpp_parm.addr[0] = fbinfo-&gt;fix.smem_start;
<span class="gd">-       config.format = DECON_PIXEL_FORMAT_BGRA_8888;</span>
<span class="gi">+       pr_err("PMOS DEBUG: decon_8890/decon_dsi: setting format to RGBA\n");</span>
<span class="gi">+       config.format = DECON_PIXEL_FORMAT_RGBA_8888;</span>
<span class="w"> </span>       config.src.w = fbinfo-&gt;var.xres;
<span class="w"> </span>       config.src.h = fbinfo-&gt;var.yres;
<span class="w"> </span>       config.src.f_w = fbinfo-&gt;var.xres;
<span class="gh">diff --git a/drivers/video/fbdev/exynos/dual_dpu/decon_core.c b/drivers/video/fbdev/exynos/dual_dpu/decon_core.c</span>
<span class="gh">index d02af9c7e30a..1b9aa3ee57b1 100644</span>
<span class="gd">--- a/drivers/video/fbdev/exynos/dual_dpu/decon_core.c</span>
<span class="gi">+++ b/drivers/video/fbdev/exynos/dual_dpu/decon_core.c</span>
<span class="gu">@@ -3735,7 +3735,8 @@ static int decon_initial_display(struct decon_device *decon, bool is_colormap)</span>
<span class="w"> </span>       set_bit(decon-&gt;dt.dft_idma, &amp;decon-&gt;prev_used_dpp);
<span class="w"> </span>       memset(&amp;config, 0, sizeof(struct decon_win_config));
<span class="w"> </span>       config.dpp_parm.addr[0] = fbinfo-&gt;fix.smem_start;
<span class="gd">-       config.format = DECON_PIXEL_FORMAT_BGRA_8888;</span>
<span class="gi">+       pr_err("PMOS DEBUG: dual_dpu/decon_core: setting format to RGBA\n");</span>
<span class="gi">+       config.format = DECON_PIXEL_FORMAT_RGBA_8888;</span>
<span class="w"> </span>       config.src.w = fbinfo-&gt;var.xres;
<span class="w"> </span>       config.src.h = fbinfo-&gt;var.yres;
<span class="w"> </span>       config.src.f_w = fbinfo-&gt;var.xres;
</pre></div>
<p>After compiling, flashing and booting the kernel, the colors were still wrong, and none of the messages showed up in dmesg, so this not the right places to set the mode. Next focus was therefore on the grep results of <code>red\.offset</code> in <code>drivers/video/fbdev/exynos/</code>. <code>red.offset</code> was being set in <code>drivers/video/fbdev/exynos/decon_8890/decon_dsi.c</code>, <code>drivers/video/fbdev/exynos/dpu/decon_dsi.c</code> and <code>drivers/video/fbdev/exynos/dual_dpu/decon_dsi.c</code> so this patch was added:
</p>
<div class="mw-highlight mw-highlight-lang-diff mw-content-ltr" dir="ltr"><pre><span></span><span class="gh">diff --git a/drivers/video/fbdev/exynos/decon_8890/decon_dsi.c b/drivers/video/fbdev/exynos/decon_8890/decon_dsi.c</span>
<span class="gh">index 8703b56108ac..101d1460ee98 100644</span>
<span class="gd">--- a/drivers/video/fbdev/exynos/decon_8890/decon_dsi.c</span>
<span class="gi">+++ b/drivers/video/fbdev/exynos/decon_8890/decon_dsi.c</span>
<span class="gu">@@ -187,6 +187,8 @@ int decon_check_var(struct fb_var_screeninfo *var, struct fb_info *info)</span>
<span class="w"> </span>       var-&gt;transp.offset = 0;
<span class="w"> </span>       var-&gt;transp.length = 0;
<span class="w"> </span>
<span class="gi">+       pr_err("PMOS_DEBUG: decon_8890/decon_dsi: bits_per_pixel %d\n", var-&gt;bits_per_pixel);</span>
<span class="gi">+</span>
<span class="w"> </span>       switch (var-&gt;bits_per_pixel) {
<span class="w"> </span>       case 1:
<span class="w"> </span>       case 2:
<span class="gh">diff --git a/drivers/video/fbdev/exynos/dpu/decon_dsi.c b/drivers/video/fbdev/exynos/dpu/decon_dsi.c</span>
<span class="gh">index eeaa2ba19778..70a645fd8f4b 100644</span>
<span class="gd">--- a/drivers/video/fbdev/exynos/dpu/decon_dsi.c</span>
<span class="gi">+++ b/drivers/video/fbdev/exynos/dpu/decon_dsi.c</span>
<span class="gu">@@ -812,6 +812,8 @@ int decon_check_var(struct fb_var_screeninfo *var, struct fb_info *info)</span>
<span class="w"> </span>       var-&gt;transp.offset = 0;
<span class="w"> </span>       var-&gt;transp.length = 0;
<span class="w"> </span>
<span class="gi">+       pr_err("PMOS_DEBUG: dpu/decon_dsi: bits_per_pixel %d\n", var-&gt;bits_per_pixel);</span>
<span class="gi">+</span>
<span class="w"> </span>       switch (var-&gt;bits_per_pixel) {
<span class="w"> </span>       case 1:
<span class="w"> </span>       case 2:
<span class="gh">diff --git a/drivers/video/fbdev/exynos/dual_dpu/decon_dsi.c b/drivers/video/fbdev/exynos/dual_dpu/decon_dsi.c</span>
<span class="gh">index d01b913bc8e0..30d7391b1bfa 100644</span>
<span class="gd">--- a/drivers/video/fbdev/exynos/dual_dpu/decon_dsi.c</span>
<span class="gi">+++ b/drivers/video/fbdev/exynos/dual_dpu/decon_dsi.c</span>
<span class="gu">@@ -815,6 +815,8 @@ int decon_check_var(struct fb_var_screeninfo *var, struct fb_info *info)</span>
<span class="w"> </span>       var-&gt;transp.offset = 0;
<span class="w"> </span>       var-&gt;transp.length = 0;
<span class="w"> </span>
<span class="gi">+       pr_err("PMOS_DEBUG: dual_dpu/decon_dsi: bits_per_pixel %d\n", var-&gt;bits_per_pixel);</span>
<span class="gi">+</span>
<span class="w"> </span>       switch (var-&gt;bits_per_pixel) {
<span class="w"> </span>       case 1:
<span class="w"> </span>       case 2:
</pre></div>
<p>After compiling, flashing and booting the kernel only the message from <code>dpu/decon_dsi.c</code> appeared in dmesg, and bits_per_pixel was 32.
</p>
<p>In the same file we have
</p>
<div class="mw-highlight mw-highlight-lang-c mw-content-ltr" dir="ltr"><pre><span></span><span class="w">	</span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">var</span><span class="o">-&gt;</span><span class="n">bits_per_pixel</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="p">[...]</span>

<span class="w">	</span><span class="k">case</span><span class="w"> </span><span class="mi">32</span><span class="p">:</span>
<span class="w">	</span><span class="k">case</span><span class="w"> </span><span class="mi">28</span><span class="p">:</span>
<span class="w">	</span><span class="k">case</span><span class="w"> </span><span class="mi">25</span><span class="p">:</span>
<span class="w">		</span><span class="n">var</span><span class="o">-&gt;</span><span class="n">transp</span><span class="p">.</span><span class="n">length</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="n">var</span><span class="o">-&gt;</span><span class="n">bits_per_pixel</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">24</span><span class="p">;</span>
<span class="w">		</span><span class="n">var</span><span class="o">-&gt;</span><span class="n">transp</span><span class="p">.</span><span class="n">offset</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="mi">24</span><span class="p">;</span>
<span class="w">		</span><span class="cm">/* drop through */</span>
<span class="w">	</span><span class="k">case</span><span class="w"> </span><span class="mi">24</span><span class="p">:</span>
<span class="w">		</span><span class="cm">/* our 24bpp is unpacked, so 32bpp */</span>
<span class="w">		</span><span class="n">var</span><span class="o">-&gt;</span><span class="n">bits_per_pixel</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="mi">32</span><span class="p">;</span>
<span class="w">		</span><span class="n">var</span><span class="o">-&gt;</span><span class="n">red</span><span class="p">.</span><span class="n">offset</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span>
<span class="w">		</span><span class="n">var</span><span class="o">-&gt;</span><span class="n">red</span><span class="p">.</span><span class="n">length</span><span class="w">		</span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="w">		</span><span class="n">var</span><span class="o">-&gt;</span><span class="n">green</span><span class="p">.</span><span class="n">offset</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="w">		</span><span class="n">var</span><span class="o">-&gt;</span><span class="n">green</span><span class="p">.</span><span class="n">length</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="w">		</span><span class="n">var</span><span class="o">-&gt;</span><span class="n">blue</span><span class="p">.</span><span class="n">offset</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">		</span><span class="n">var</span><span class="o">-&gt;</span><span class="n">blue</span><span class="p">.</span><span class="n">length</span><span class="w">	</span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="w">		</span><span class="k">break</span><span class="p">;</span>
</pre></div>
<p>Each pixel is 32 bit, and they are unpacked in the order BGRA, since blue.offset=0, green.offset=8, red.offset=16 and transp.offset=24. Since we want to swap blue&lt;-&gt;red we change those offsets:
</p>
<div class="mw-highlight mw-highlight-lang-diff mw-content-ltr" dir="ltr"><pre><span></span><span class="gh">diff --git a/drivers/video/fbdev/exynos/dpu/decon_dsi.c b/drivers/video/fbdev/exynos/dpu/decon_dsi.c</span>
<span class="gh">index eeaa2ba19778..3e597a145432 100644</span>
<span class="gd">--- a/drivers/video/fbdev/exynos/dpu/decon_dsi.c</span>
<span class="gi">+++ b/drivers/video/fbdev/exynos/dpu/decon_dsi.c</span>
<span class="gu">@@ -862,11 +862,11 @@ int decon_check_var(struct fb_var_screeninfo *var, struct fb_info *info)</span>
<span class="w"> </span>	case 24:
<span class="w"> </span>		/* our 24bpp is unpacked, so 32bpp */
<span class="w"> </span>		var-&gt;bits_per_pixel	= 32;
<span class="gd">-		var-&gt;red.offset		= 16;</span>
<span class="gi">+		var-&gt;red.offset		= 0;</span>
<span class="w"> </span>		var-&gt;red.length		= 8;
<span class="w"> </span>		var-&gt;green.offset	= 8;
<span class="w"> </span>		var-&gt;green.length	= 8;
<span class="gd">-		var-&gt;blue.offset	= 0;</span>
<span class="gi">+		var-&gt;blue.offset	= 16;</span>
<span class="w"> </span>		var-&gt;blue.length	= 8;
<span class="w"> </span>		break;
</pre></div>
<p>And after compiling, flashing and booting the kernel the problem is solved!
</p>
<h1><span class="mw-headline" id="See_also">See also</span></h1>
<ul>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmaports/-/issues/211">pmaports#211</a>: framebuffer: red and blue are swapped on devices using MSM8974</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmaports/-/issues/297">pmaports#297</a>: alternative patch to fix refresh rate for kernel 3.4.113 android_kernel_oppo_msm8974 and similar</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmaports/-/issues/916">pmaports#916</a>: red and blue are swapped on dreamlte (exynos8895)</li>
<li><a rel="nofollow" class="external text" href="https://www.kernel.org/doc/html/latest/fb/api.html">Kernel documentation on the framebuffer api</a></li>
<li><a rel="nofollow" class="external text" href="https://wiki.postmarketos.org/wiki/HTC_One_XL_(htc-evita)#Other">Red screen issue on HTC-One XL</a></li>
</ul>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Troubleshooting.html" title="Category:Troubleshooting">Troubleshooting</a></li></ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=Display/Troubleshooting&amp;oldid=67355">https://wiki.postmarketos.org/index.php?title=Display/Troubleshooting&amp;oldid=67355</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 16 December 2024, at 19:26.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/About_postmarketOS.html">About postmarketOS Wiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/PostmarketOS:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="../poweredby_mediawiki.svg" alt="Powered by MediaWiki" width="88" height="31" loading="lazy"></a></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
