<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>OnePlus 6 (oneplus-enchilada) - postmarketOS</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.34.2">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="postmarketOS (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-OnePlus_6_oneplus-enchilada rootpage-OnePlus_6_oneplus-enchilada skin-vector action-view">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading" class="firstHeading" lang="en">OnePlus 6 (oneplus-enchilada)</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From postmarketOS</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">OnePlus 6</caption>
<tbody>
<tr class=""><td colspan="2" class="" style="text-align:center;">
<a href="../Op6-neofetch-phosh.jpeg" class="image"><img alt="Running Phosh" src="../Op6-neofetch-phosh.jpeg" decoding="async" width="200" height="300" srcset="../300px-Op6-neofetch-phosh.jpeg 1.5x ../400px-Op6-neofetch-phosh.jpeg 2x"></a><br><span style="">Running Phosh</span>
</td></tr>
<tr class="">
<th scope="row" style="text-align:left;">Manufacturer</th>
    <td class="" style="">
OnePlus</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Name</th>
    <td class="" style="">
6</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Codename</th>
    <td class="" style="">
oneplus-enchilada</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Model</th>
    <td class="" style="">
ONEPLUS A6000</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Released</th>
    <td class="" style="">
2018</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Category</th>
    <td class="" style="">
community</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Original software</th>
    <td class="" style="">
Android</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="The version the device was shipped with.">Original version</abbr></th>
    <td class="" style="">
8.0</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="The most recent supported version from the manufacturer.">Extended version</abbr></th>
    <td class="" style="">
11 on Linux 4.9 (OxygenOS 11.1.2.2)</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">postmarketOS kernel</th>
    <td class="" style="">
Mainline</td>
</tr>
<tr><th colspan="2" class="" style="text-align:center;">Hardware</th></tr>
<tr class="">
<th scope="row" style="text-align:left;">Chipset</th>
    <td class="" style="">
<a href="../en/Qualcomm_Snapdragon_845_(SDM845).html" title="Qualcomm Snapdragon 845 (SDM845)">Qualcomm Snapdragon 845 (SDM845)</a>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">CPU</th>
    <td class="" style="">
Octa-core (4x 2.8 GHz Kryo 385 Gold &amp; 4x 1.7 GHz Kryo 385 Silver)</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPU</th>
    <td class="" style="">
Adreno 630</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Display</th>
    <td class="" style="">
1080 x 2280 AMOLED</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Storage</th>
    <td class="" style="">
64/128/256 GB</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Memory</th>
    <td class="" style="">
6/8 GB</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Architecture</th>
    <td class="" style="">
aarch64</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Type</th>
    <td class="" style="">
handset</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Unixbench Whet/Dhry score</th>
    <td class="" style="">
6029.9</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Features</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="After connecting the device with USB to your PC, you can connect to it via telnet (initramfs) or SSH (booted system).">USB Networking</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="It is possible to flash the device with `pmbootstrap flasher`.">Flashing</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Touchscreen</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Display works. Ideally with sleep mode and brightness control.">Display</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">WiFi</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Full disk encryption and unlocking with osk-sdl.">FDE</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Instead of a Linux kernel fork, it is possible to run mainline.">Mainline</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Charging and battery level reporting works">Battery</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">3D Acceleration</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Audio playback, microphone, headset and buttons.">Audio</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Bluetooth</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Camera</th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPS</th>
    <td class="" style="">
<div class="feature feature-partial">Partial</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Mobile data</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">SMS</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Calls</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">USB OTG</th>
    <td class="" style="">
<div class="feature feature-partial">Partial</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">NFC</th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Sensors</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Auto screen rotation works in desktops e.g. Phosh or Plasma Mobile">Accelerometer</abbr></th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Magnetometer</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ambient Light</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Proximity</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Also known as flip cover sensor">Hall Effect</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Barometer</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Power Sensor</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Misc</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;">Camera Flash</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Keyboard</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Touchpad</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Full-sized USB-A port works (Usually applicable to SBCs and laptops).">USB-A</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Video and audio output with HDMI or Display Port works.">HDMI/DP</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ir TX</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ir RX</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Stylus</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Haptics</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ethernet</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">FOSS bootloader</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<p><br>
</p>
<p><br>
</p>
<table class="infobox" style="float: right; width: 22em; color: inherit; background-color: #f7fff7; border: 3px solid #8a8;"><tbody><tr><td>
<b>This device is based on the <a href="../en/Qualcomm_Snapdragon_845_(SDM845).html" title="Qualcomm Snapdragon 845 (SDM845)">Snapdragon 845</a>.</b><br>See the SoC page for common tips, guides and troubleshooting steps</td></tr></tbody></table>
<p>The OnePlus 6 is an incredibly powerful and efficient mobile device, well regarded and (bar the notch) an excellent portable work horse, getting mainline Linux working means not only freedom from proprietary software, but also continual security patches and the ability to boot any mobile or desktop Linux distro.
</p>
<p>After the OnePlus 6 reached End-of-Life by OnePlus in December 2021, running newer Linux kernel versions is the only way to ensure that the device can continue to be safe and usable for years to come. The Snapdragon 845 is still an incredibly capable SoC, likewise the OnePlus 6 is a well-built and perfectly adequate device. That the millions of sold units have been dropped, destined for Landfill (or at best recycling) by OnePlus is abhorrant, join us in doing our best to continue to make devices like the OnePlus 6 safe and usable.
</p>
<p>The phone is currently capable of booting modern Linux with only a few patches, check the table on the right (or above on mobile) for the hardware support checklist.
</p>
<p>Despite being able to run an up to date kernel, we are still dependant on the now aging firmware for features like the bootloader, modem, wifi and bluetooth to function, whilst it is relatively unlikely that a vulnerability is discovered in this firmware, it is absolutely a possibility. Until OnePlus release the signing keys used to sign new versions of the firmware - allowing us to potentially make use of future security patches - we're stuck with what we've got.
</p>
<div id="toc" class="toc">
<input type="checkbox" role="button" id="toctogglecheckbox" class="toctogglecheckbox" style="display:none"><div class="toctitle" lang="en" dir="ltr">
<h2>Contents</h2>
<span class="toctogglespan"><label class="toctogglelabel" for="toctogglecheckbox"></label></span>
</div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#How_to_enter_flash_mode"><span class="tocnumber">1</span> <span class="toctext">How to enter flash mode</span></a></li>
<li class="toclevel-1 tocsection-2">
<a href="#Installing"><span class="tocnumber">2</span> <span class="toctext">Installing</span></a>
<ul>
<li class="toclevel-2 tocsection-3">
<a href="#Prerequisites"><span class="tocnumber">2.1</span> <span class="toctext">Prerequisites</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="#Upgrade"><span class="tocnumber">2.1.1</span> <span class="toctext">Upgrade</span></a></li>
<li class="toclevel-3 tocsection-5"><a href="#Unlock_the_bootloader"><span class="tocnumber">2.1.2</span> <span class="toctext">Unlock the bootloader</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6"><a href="#Pre-built_images"><span class="tocnumber">2.2</span> <span class="toctext">Pre-built images</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Manual_build"><span class="tocnumber">2.3</span> <span class="toctext">Manual build</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Dual_booting"><span class="tocnumber">3</span> <span class="toctext">Dual booting</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Fastboot_bugs"><span class="tocnumber">4</span> <span class="toctext">Fastboot bugs</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Upgrading"><span class="tocnumber">5</span> <span class="toctext">Upgrading</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Building"><span class="tocnumber">6</span> <span class="toctext">Building</span></a></li>
<li class="toclevel-1 tocsection-12">
<a href="#Info"><span class="tocnumber">7</span> <span class="toctext">Info</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Hacking"><span class="tocnumber">7.1</span> <span class="toctext">Hacking</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Partition_map"><span class="tocnumber">7.2</span> <span class="toctext">Partition map</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#Upgrading_firmware_without_Android_installed"><span class="tocnumber">8</span> <span class="toctext">Upgrading firmware without Android installed</span></a></li>
<li class="toclevel-1 tocsection-16">
<a href="#The_big_list_of_issues"><span class="tocnumber">9</span> <span class="toctext">The big list of issues</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#Tri-state_key_support"><span class="tocnumber">9.1</span> <span class="toctext">Tri-state key support</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Phosh_clock_hidden_by_notch"><span class="tocnumber">9.2</span> <span class="toctext">Phosh clock hidden by notch</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#OTG_doesn.27t_work"><span class="tocnumber">9.3</span> <span class="toctext">OTG doesn't work</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#Third_party_displays_and_touch_panel_issues"><span class="tocnumber">10</span> <span class="toctext">Third party displays and touch panel issues</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="#GPS"><span class="tocnumber">11</span> <span class="toctext">GPS</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#Camera"><span class="tocnumber">12</span> <span class="toctext">Camera</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#Sensors"><span class="tocnumber">13</span> <span class="toctext">Sensors</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="#TrustZone"><span class="tocnumber">14</span> <span class="toctext">TrustZone</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="#Fastboot_flashing_issues"><span class="tocnumber">15</span> <span class="toctext">Fastboot flashing issues</span></a></li>
<li class="toclevel-1 tocsection-26">
<a href="#Modem_bugs"><span class="tocnumber">16</span> <span class="toctext">Modem bugs</span></a>
<ul>
<li class="toclevel-2 tocsection-27"><a href="#Sim_not_appearing"><span class="tocnumber">16.1</span> <span class="toctext">Sim not appearing</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Dual_Sim"><span class="tocnumber">16.2</span> <span class="toctext">Dual Sim</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="#Renegade_Project"><span class="tocnumber">17</span> <span class="toctext">Renegade Project</span></a></li>
<li class="toclevel-1 tocsection-30">
<a href="#Community_Info"><span class="tocnumber">18</span> <span class="toctext">Community Info</span></a>
<ul>
<li class="toclevel-2 tocsection-31"><a href="#postmarketOS_users_that_own_the_device"><span class="tocnumber">18.1</span> <span class="toctext">postmarketOS users that own the device</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Maintainers"><span class="tocnumber">18.2</span> <span class="toctext">Maintainers</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-33">
<a href="#See_also"><span class="tocnumber">19</span> <span class="toctext">See also</span></a>
<ul>
<li class="toclevel-2 tocsection-34"><a href="#Internal_pages"><span class="tocnumber">19.1</span> <span class="toctext">Internal pages</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#External_links"><span class="tocnumber">19.2</span> <span class="toctext">External links</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="How_to_enter_flash_mode">How to enter flash mode</span></h2>
<p>Unplug from USB and hold <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Power</span> and <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Volume Up</span> until you see a screen showing the word <code>START</code> and information about the device.
</p>
<p>For the <a href="../en/OnePlus_6T_(oneplus-fajita).html" title="OnePlus 6T (oneplus-fajita)">OnePlus 6T</a>, hold <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Power</span> and <b>both</b> volume buttons.
</p>
<table role="text container" style="color: inherit; background-color: #D3E4FA; border: 1px solid #0B6B9F; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Notice" src="../Notice.png" decoding="async" title="Notice" width="20" height="20" srcset="../Notice.png 1.5x ../Notice.png 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">If you're struggling to enter fastboot, ensure that you have unplugged the USB cable and do not release the button combination until after the <code>START</code> text appears on screen</td>
</tr></tbody></table>
<h2><span class="mw-headline" id="Installing">Installing</span></h2>
<table role="text container" style="color: inherit; background-color: #D3E4FA; border: 1px solid #0B6B9F; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Notice" src="../Notice.png" decoding="async" title="Notice" width="20" height="20" srcset="../Notice.png 1.5x ../Notice.png 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">The bootloader is the only firmware that postmarketOS doesn't install itself, all other firmware (devicetree, gpu, modem etc) is supplied by postmarketOS. In contrast to custom Android ROMs, it is <strong>incredibly unlikely</strong> that any bugs or issues you encounter are caused by whatever OS you previously had installed on the device.</td>
</tr></tbody></table>
<h3><span class="mw-headline" id="Prerequisites">Prerequisites</span></h3>
<p>To install prebuilt images, you will need:
</p>
<p>1. A computer with fastboot
</p>
<p>This can be obtained by installed the <code>android-tools</code> package on Linux or by installing the <a rel="nofollow" class="external text" href="https://developer.android.com/studio/releases/platform-tools">Android SDK Platform-Tools</a> on Windows, Mac (or Linux).
</p>
<h4><span class="mw-headline" id="Upgrade">Upgrade</span></h4>
<p>Before installing postmarketOS, it's recommended that you upgrade your device to the latest release of OxygenOS (OnePlus's version of Android). This is not a requirement but is heavily recommended. Try this first if you encounter issues with fastboot.
</p>
<h4><span class="mw-headline" id="Unlock_the_bootloader">Unlock the bootloader</span></h4>
<p>Before installing postmarketOS you have to unlock your bootloader. For the T-Mobile version of the device in the US, refer to Google for guides on obtaining an unlock code. If your device is not carrier locked, the following is all that's needed to unlock the bootloader:
</p>
<p>1. Open setting, go to "About" and tap on the "Build number" box ~10 times until the "You are now a developer" toast message appears.
</p>
<p>2. Go back to the main settings page, go to "System" and then "Developer options" (it might be hiding behind a dropdown menu). Toggle the switch to "Enable OEM unlocking"
</p>
<p>3. Refer to "How to enter flash mode" above to get into fastboot mode, then re-attach your USB cable. Run the following command on your host:
</p>
<pre>fastboot oem unlock
</pre>
<p>If you see <code>&lt; waiting for any device &gt;</code>, try running as <code>sudo</code> and restart your device into fastboot mode again by selecting "Restart Bootloader" on the device.
</p>
<p>4. Read the message displayed on your device screen. Once read, confirm the unlock if you're willing to proceed. <b>THIS WILL ERASE YOUR DEVICE'S INTERNAL STORAGE</b>.
</p>
<p>All done! You can now continue with this guide.
</p>
<h3><span class="mw-headline" id="Pre-built_images">Pre-built images</span></h3>
<p>Follow the <a href="../en/Installation.html" title="Installation">installation</a> article to download image files, note that the device code-names are <code>oneplus-enchilada</code> for the OnePlus 6 and <code>oneplus-fajita</code> for the 6T.
</p>
<p>Once downloaded, decompress the files with <code>unxz</code>. On Windows you can use a tool like 7zip.
</p>
<p>Finally, use fastboot to flash:
</p>
<table role="text container" style="color: inherit; background-color: #D3E4FA; border: 1px solid #0B6B9F; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Notice" src="../Notice.png" decoding="async" title="Notice" width="20" height="20" srcset="../Notice.png 1.5x ../Notice.png 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">Erasing the dtbo partition will make Android (and <b>ALL</b> Android-based software like Ubuntu Touch or TWRP recovery) unbootable on the current slot (<a href="../en/Android_AB_Slots.html" title="Android AB Slots">read this page if you're not sure what that means</a>). You can re-flash an Android ROM via fastboot by extracting the payload.bin from the OTA zip and using a tool like <a rel="nofollow" class="external text" href="https://github.com/tobyxdd/android-ota-payload-extractor">android-ota-payload-extractor</a> to get the individual partition images. It is almost never necessary to resort to extreme measures like "MSM Download tool" to reflash the device via EDL</td>
</tr></tbody></table>
<pre>fastboot erase dtbo
fastboot flash boot [the file that ends in -boot.img]
fastboot flash userdata [the other file]
</pre>
<p>If you see <code>&lt; waiting for any device &gt;</code>, try running as <code>sudo</code> and restart your device into fastboot mode again.
</p>
<p>It can be effective to select "Restart Bootloader" on the phone's bootloader after each command succeeds, to avoid above "waiting for device" connection problem.
</p>
<p><br>
</p>
<h3><span class="mw-headline" id="Manual_build">Manual build</span></h3>
<p>The vendor is OnePlus, the codename is "enchilada" for the OnePlus 6 and "fajita" for the OnePlus 6T.
</p>
<p>Follow the <a href="../en/Pmbootstrap.html" title="Pmbootstrap">pmbootstrap</a> article, until you have done the install action (note that `--fde` stands for full-disk-encryption - this can also be left out).
</p>
<pre>pmbootstrap install --fde
</pre>
<p>Reboot back into flash mode as explained above. (If you encounter weird behaviour like the command getting stuck before the flashing starts, reboot into flash mode or select "Restart Bootloader" on the phone itself)
</p>
<p>By default the rootfs will be flashed to system, this doesn't leave much free space for your applications / data, if you don't mind factory resetting the device you can instead flash to userdata by specifying the partition like below.
</p>
<pre>fastboot erase dtbo
pmbootstrap flasher flash_rootfs --partition userdata
pmbootstrap flasher flash_kernel
</pre>
<p>Reboot and you're good to go!
</p>
<p>If you have flashing or booting issues, try first flashing the latest OxygenOS to the slot you want to install postmarketOS to (ie, flash in TWRP from your other slot). If you still have no luck, try flashing OxygenOS 9 as the bootloader can be more forgiving.
</p>
<h2><span class="mw-headline" id="Dual_booting">Dual booting</span></h2>
<p>(See <a href="../en/OnePlus_6_(oneplus-enchilada)_Dual_Booting_and_Custom_Partitioning.html" title="OnePlus 6 (oneplus-enchilada)/Dual Booting and Custom Partitioning">OnePlus_6_(oneplus-enchilada)/Dual_Booting_and_Custom_Partitioning</a>)
</p>
<h2><span class="mw-headline" id="Fastboot_bugs">Fastboot bugs</span></h2>
<p>If you encounter "weird" errors from fastboot, such as "device does not support slots":
</p>
<p>Once the device is in fastboot mode unplug it, run your fastboot / flasher command and wait for the "&lt;waiting for device&gt;" message, now choose "reboot bootloader" on the device and press the power button to select, plug in the device while it reboots.
</p>
<h2><span class="mw-headline" id="Upgrading">Upgrading</span></h2>
<p>Upgrading can be done through Alpines package manager "apk", to upgrade everything simply open a terminal and run <code>sudo apk upgrade -a</code>. This includes kernel upgrades.
</p>
<h2><span class="mw-headline" id="Building">Building</span></h2>
<p>Feel like helping? Want to learn kernel development?
</p>
<p>Check out the mainlining guide <a href="../en/SDM845_Mainlining.html" title="SDM845 Mainlining">SDM845 Mainlining</a> for detailed SDM845 specific instructions on initial device porting and building.
</p>
<p>Feel free to contact @caleb (or anyone) in the <a href="../en/Matrix_and_IRC.html" title="Matrix and IRC">#postmarketos-mainline</a> matrix channel if you're stuck.
</p>
<h2><span class="mw-headline" id="Info">Info</span></h2>
<h3><span class="mw-headline" id="Hacking">Hacking</span></h3>
<p>See <a href="../en/OnePlus_6_(oneplus-enchilada)_Hacking.html" title="OnePlus 6 (oneplus-enchilada)/Hacking">Hacking</a> for details.
</p>
<h3><span class="mw-headline" id="Partition_map">Partition map</span></h3>
<div class="toccolours mw-collapsible mw-collapsed" style="width: 1000px; overflow: auto;">
<p><code>oneplus-enchilada:~$ ls -lah /dev/disk/by-partlabel/ </code>
</p>
<div class="mw-collapsible-content">
<pre>total 0      
drwxr-xr-x    2 root     root        2.0K Jan  7  1970 .
drwxr-xr-x    8 root     root         160 Jan  7  1970 ..
lrwxrwxrwx    1 root     root          10 Jan  7  1970 ALIGN_TO_128K_1 -&gt; ../../sdd1
lrwxrwxrwx    1 root     root          10 Jan  7  1970 ALIGN_TO_128K_2 -&gt; ../../sdf1
lrwxrwxrwx    1 root     root          11 Jan  7  1970 ImageFv -&gt; ../../sde72
lrwxrwxrwx    1 root     root          11 Jan  7  1970 LOGO_a -&gt; ../../sde20
lrwxrwxrwx    1 root     root          11 Jan  7  1970 LOGO_b -&gt; ../../sde48
lrwxrwxrwx    1 root     root          10 Jan  7  1970 abl_a -&gt; ../../sde8
lrwxrwxrwx    1 root     root          11 Jan  7  1970 abl_b -&gt; ../../sde36
lrwxrwxrwx    1 root     root          10 Jan  7  1970 aop_a -&gt; ../../sde1
lrwxrwxrwx    1 root     root          11 Jan  7  1970 aop_b -&gt; ../../sde29
lrwxrwxrwx    1 root     root          11 Jan  7  1970 apdp -&gt; ../../sde63
lrwxrwxrwx    1 root     root          10 Jan  7  1970 bluetooth_a -&gt; ../../sde5
lrwxrwxrwx    1 root     root          11 Jan  7  1970 bluetooth_b -&gt; ../../sde33
lrwxrwxrwx    1 root     root          11 Jan  7  1970 boot_a -&gt; ../../sde11
lrwxrwxrwx    1 root     root          11 Jan  7  1970 boot_aging -&gt; ../../sde58
lrwxrwxrwx    1 root     root          11 Jan  7  1970 boot_b -&gt; ../../sde39
lrwxrwxrwx    1 root     root          10 Jan  7  1970 cdt -&gt; ../../sdd2
lrwxrwxrwx    1 root     root          11 Jan  7  1970 cmnlib64_a -&gt; ../../sde13
lrwxrwxrwx    1 root     root          11 Jan  7  1970 cmnlib64_b -&gt; ../../sde41
lrwxrwxrwx    1 root     root          11 Jan  7  1970 cmnlib_a -&gt; ../../sde12
lrwxrwxrwx    1 root     root          11 Jan  7  1970 cmnlib_b -&gt; ../../sde40
lrwxrwxrwx    1 root     root          11 Jan  7  1970 config -&gt; ../../sda12
lrwxrwxrwx    1 root     root          10 Jan  7  1970 ddr -&gt; ../../sdd3
lrwxrwxrwx    1 root     root          11 Jan  7  1970 devcfg_a -&gt; ../../sde14
lrwxrwxrwx    1 root     root          11 Jan  7  1970 devcfg_b -&gt; ../../sde42
lrwxrwxrwx    1 root     root          11 Jan  7  1970 devinfo -&gt; ../../sde61
lrwxrwxrwx    1 root     root          11 Jan  7  1970 dip -&gt; ../../sde62
lrwxrwxrwx    1 root     root          10 Jan  7  1970 dsp_a -&gt; ../../sde9
lrwxrwxrwx    1 root     root          11 Jan  7  1970 dsp_b -&gt; ../../sde37
lrwxrwxrwx    1 root     root          11 Jan  7  1970 dtbo_a -&gt; ../../sde18
lrwxrwxrwx    1 root     root          11 Jan  7  1970 dtbo_b -&gt; ../../sde46
lrwxrwxrwx    1 root     root          10 Jan  7  1970 frp -&gt; ../../sda6
lrwxrwxrwx    1 root     root          10 Jan  7  1970 fsc -&gt; ../../sdf5
lrwxrwxrwx    1 root     root          10 Jan  7  1970 fsg -&gt; ../../sdf4
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_4j1ed_a -&gt; ../../sde21
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_4j1ed_b -&gt; ../../sde49
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_4u1ea_a -&gt; ../../sde22
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_4u1ea_b -&gt; ../../sde50
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs3_a -&gt; ../../sde23
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs3_b -&gt; ../../sde51
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs4_a -&gt; ../../sde24
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs4_b -&gt; ../../sde52
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs5_a -&gt; ../../sde25
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs5_b -&gt; ../../sde53
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs6_a -&gt; ../../sde26
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs6_b -&gt; ../../sde54
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs7_a -&gt; ../../sde27
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs7_b -&gt; ../../sde55
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs8_a -&gt; ../../sde28
lrwxrwxrwx    1 root     root          11 Jan  7  1970 fw_ufs8_b -&gt; ../../sde56
lrwxrwxrwx    1 root     root          10 Jan  7  1970 hyp_a -&gt; ../../sde3
lrwxrwxrwx    1 root     root          11 Jan  7  1970 hyp_b -&gt; ../../sde31
lrwxrwxrwx    1 root     root          11 Jan  7  1970 keymaster_a -&gt; ../../sde10
lrwxrwxrwx    1 root     root          11 Jan  7  1970 keymaster_b -&gt; ../../sde38
lrwxrwxrwx    1 root     root          10 Jan  7  1970 keystore -&gt; ../../sda5
lrwxrwxrwx    1 root     root          11 Jan  7  1970 limits -&gt; ../../sde67
lrwxrwxrwx    1 root     root          11 Jan  7  1970 logdump -&gt; ../../sde71
lrwxrwxrwx    1 root     root          11 Jan  7  1970 logfs -&gt; ../../sde69
lrwxrwxrwx    1 root     root          10 Jan  7  1970 mdtp_a -&gt; ../../sde7
lrwxrwxrwx    1 root     root          11 Jan  7  1970 mdtp_b -&gt; ../../sde35
lrwxrwxrwx    1 root     root          10 Jan  7  1970 mdtpsecapp_a -&gt; ../../sde6
lrwxrwxrwx    1 root     root          11 Jan  7  1970 mdtpsecapp_b -&gt; ../../sde34
lrwxrwxrwx    1 root     root          11 Jan  7  1970 minidump -&gt; ../../sde57
lrwxrwxrwx    1 root     root          10 Jan  7  1970 misc -&gt; ../../sda3
lrwxrwxrwx    1 root     root          10 Jan  7  1970 modem_a -&gt; ../../sde4
lrwxrwxrwx    1 root     root          11 Jan  7  1970 modem_b -&gt; ../../sde32
lrwxrwxrwx    1 root     root          10 Jan  7  1970 modemst1 -&gt; ../../sdf2
lrwxrwxrwx    1 root     root          10 Jan  7  1970 modemst2 -&gt; ../../sdf3
lrwxrwxrwx    1 root     root          11 Jan  7  1970 msadp -&gt; ../../sde64
lrwxrwxrwx    1 root     root          11 Jan  7  1970 odm_a -&gt; ../../sda15
lrwxrwxrwx    1 root     root          11 Jan  7  1970 odm_b -&gt; ../../sda16
lrwxrwxrwx    1 root     root          10 Jan  7  1970 oem_dycnvbk -&gt; ../../sda8
lrwxrwxrwx    1 root     root          10 Jan  7  1970 oem_stanvbk -&gt; ../../sda9
lrwxrwxrwx    1 root     root          11 Jan  7  1970 op1 -&gt; ../../sde59
lrwxrwxrwx    1 root     root          10 Jan  7  1970 op2 -&gt; ../../sda7
lrwxrwxrwx    1 root     root          10 Jan  7  1970 param -&gt; ../../sda4
lrwxrwxrwx    1 root     root          10 Jan  7  1970 persist -&gt; ../../sda2
lrwxrwxrwx    1 root     root          11 Jan  7  1970 qupfw_a -&gt; ../../sde15
lrwxrwxrwx    1 root     root          11 Jan  7  1970 qupfw_b -&gt; ../../sde43
lrwxrwxrwx    1 root     root          11 Jan  7  1970 reserve1 -&gt; ../../sda10
lrwxrwxrwx    1 root     root          11 Jan  7  1970 reserve2 -&gt; ../../sda11
lrwxrwxrwx    1 root     root          11 Jan  7  1970 sec -&gt; ../../sde60
lrwxrwxrwx    1 root     root          11 Jan  7  1970 splash -&gt; ../../sde66
lrwxrwxrwx    1 root     root          11 Jan  7  1970 spunvm -&gt; ../../sde65
lrwxrwxrwx    1 root     root          10 Jan  7  1970 ssd -&gt; ../../sda1
lrwxrwxrwx    1 root     root          11 Jan  7  1970 sti -&gt; ../../sde70
lrwxrwxrwx    1 root     root          11 Jan  7  1970 storsec_a -&gt; ../../sde19
lrwxrwxrwx    1 root     root          11 Jan  7  1970 storsec_b -&gt; ../../sde47
lrwxrwxrwx    1 root     root          11 Jan  7  1970 system_a -&gt; ../../sda13
lrwxrwxrwx    1 root     root          11 Jan  7  1970 system_b -&gt; ../../sda14
lrwxrwxrwx    1 root     root          11 Jan  7  1970 toolsfv -&gt; ../../sde68
lrwxrwxrwx    1 root     root          10 Jan  7  1970 tz_a -&gt; ../../sde2
lrwxrwxrwx    1 root     root          11 Jan  7  1970 tz_b -&gt; ../../sde30
lrwxrwxrwx    1 root     root          11 Jan  7  1970 userdata -&gt; ../../sda17
lrwxrwxrwx    1 root     root          11 Jan  7  1970 vbmeta_a -&gt; ../../sde17
lrwxrwxrwx    1 root     root          11 Jan  7  1970 vbmeta_b -&gt; ../../sde45
lrwxrwxrwx    1 root     root          11 Jan  7  1970 vendor_a -&gt; ../../sde16
lrwxrwxrwx    1 root     root          11 Jan  7  1970 vendor_b -&gt; ../../sde44
lrwxrwxrwx    1 root     root          10 Jan  7  1970 xbl_a -&gt; ../../sdb1
lrwxrwxrwx    1 root     root          10 Jan  7  1970 xbl_b -&gt; ../../sdc1
lrwxrwxrwx    1 root     root          10 Jan  7  1970 xbl_config_a -&gt; ../../sdb2
lrwxrwxrwx    1 root     root          10 Jan  7  1970 xbl_config_b -&gt; ../../sdc2
</pre>
</div>
</div>
<h2><span class="mw-headline" id="Upgrading_firmware_without_Android_installed">Upgrading firmware without Android installed</span></h2>
<p>When you install postmarketOS and all you get is just blank screen after a reboot or you have some other problems it is possible that firmware was not upgraded. Follow these steps to upgrade firmware.
</p>
<ul>
<li>Download newest firmware from <a rel="nofollow" class="external text" href="https://www.oneplus.com/us/support/softwareupgrade">here</a>
</li>
<li>Extract payload.bin file from zip you downloaded in a previous step</li>
<li>Extract firmware with <a rel="nofollow" class="external text" href="https://github.com/ssut/payload-dumper-go">payload-dumper-go</a> or <a rel="nofollow" class="external text" href="https://github.com/sabpprook/payload_dumper">payload_dumper</a>
</li>
<li>Run command: <pre>payload-dumper-go payload.bin</pre>
</li>
<li>Enter fastboot mode</li>
<li>Unlock partitions for flashing</li>
</ul>
<pre>fastboot flashing unlock_critical
</pre>
<ul><li>Run below commands to update firmware</li></ul>
<pre>fastboot flash abl abl.img
fastboot flash aop aop.img
fastboot flash bluetooth bluetooth.img
fastboot flash cmnlib cmnlib.img
fastboot flash cmnlib64 cmnlib64.img
fastboot flash devcfg devcfg.img
fastboot flash dsp dsp.img
fastboot flash fw_4j1ed fw_4j1ed.img
fastboot flash fw_4u1ea fw_4u1ea.img
fastboot flash hyp hyp.img
fastboot flash keymaster keymaster.img
fastboot flash LOGO LOGO.img
fastboot flash --slot=all modem modem.img
fastboot flash oem_stanvbk oem_stanvbk.img
fastboot flash qupfw qupfw.img
fastboot flash storsec storsec.img
fastboot flash tz tz.img
fastboot flash xbl xbl.img
fastboot flash xbl_config xbl_config.img
</pre>
<h2><span class="mw-headline" id="The_big_list_of_issues">The big list of issues</span></h2>
<p>In no particular order...
</p>
<h3><span class="mw-headline" id="Tri-state_key_support">Tri-state key support</span></h3>
<p>First support was in userspace: <a rel="nofollow" class="external free" href="https://github.com/michele-perrone/postmarketos-oneplus6-tristatekey">https://github.com/michele-perrone/postmarketos-oneplus6-tristatekey</a>
</p>
<p>A kernel device driver for the tri-state key has now been developed, and it emits EV_SW with codes 17/18/19 for the top/middle/bottom states.
</p>
<p>It has been suggested that <a rel="nofollow" class="external text" href="https://lore.kernel.org/linux-arm-msm/YvQyOhgSGjQLHHvv@google.com/">the kernel driver is converted to using the ABS_MISC codes</a> rather than introduce more "generic" input events.
</p>
<p>The next step is to write <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/hkdm">hkdm</a> configs for it but this may need to wait for the driver to get upstreamed. hkdm itself needs support for EV_SW devices added.
</p>
<h3><span class="mw-headline" id="Phosh_clock_hidden_by_notch">Phosh clock hidden by notch</span></h3>
<p>One can get around this quirk by tweaking the file <code>~/.config/gtk-3.0/gtk.css</code> with something such as:
</p>
<pre>.phosh-topbar-clock {
  padding-left: 130px;
}
</pre>
<p>to move the clock slightly to the right of the notch.
</p>
<p>The rounded corners on the 6T can be annoying as well.
</p>
<h3>
<span id="OTG_doesn't_work"></span><span class="mw-headline" id="OTG_doesn.27t_work">OTG doesn't work</span>
</h3>
<p>"OTG" (USB-C role switching to host mode) is blocked on USB-C power delivery support in the charger driver. Host mode can be forced by modifying the DTS when building a kernel, but it isn't clear what this fixes or may break (e.g. charging).
</p>
<p>See <a rel="nofollow" class="external text" href="https://matrix.to/#/!xgUMIsYnSIXklwbhrG:postmarketos.org/%24DEx89n6NY1ERE6TrCKe6Q_tkTOwiylXpKzDwOFY7cC8?via=postmarketos.org&amp;via=matrix.org&amp;via=kde.org">this matrix post</a> by <a href="../User:Kalube.html" title="User:Kalube">User:Kalube</a>:
</p>
<blockquote>
<p>no, OTG isn't really a thing anymore anyway - it's technically specific to micro USB, usb-c has role-switching where a device can either be a host device or a peripheral device. Right now we force peripheral mode always. Once support for the full USB-C power delivery system is implemented in the charger driver, we can negotiate a role with the other device, e.g. if it's a powered dock we want to charge but also be the host device.
</p>
<p>Once that's done we can implement DP alt mode on top which requires talking to the dwc3 driver I think, and configuring some external orientation switch for the USB SBU pins which are directional and required by displayport
</p>
<p>that's all the missing pieces, that will give us displayport on the SHIFT6mq, neither the pocophone F1 nor OnePlus 6 support DP alt mode
</p>
</blockquote>
<p>Host mode can be enabled by changing the dtb, to do this install dtc and decompile the appropriate file for you device like so:
</p>
<pre># apk add dtc
# cd /boot/dtbs/qcom
# dtc sdm845-oneplus-&lt;model&gt;.dtb -o temp.dts
</pre>
<p>Now edit the temp.dts file and change dr_mode from "peripheral" to "host", recompile it and run mkinitfs to regenerate and flash the boot image:
</p>
<pre># dtc temp.dts -o sdm845-oneplus-&lt;model&gt;.dtb
# mkinitfs
# reboot
</pre>
<p>To revert the changes just do the same thing again but change the line back to peripheral, kernel updates will also revert it.
</p>
<p>The phone won't supply its own power, so you need either a powered hub or an extension cable wired up to 5v. Some hubs may refuse to work without power being supplied from the port however.
</p>
<h2><span class="mw-headline" id="Third_party_displays_and_touch_panel_issues">Third party displays and touch panel issues</span></h2>
<p>Some manufacturer realised they could cheap out on touch controllers, so 3rd party touch panels don't actually implement the synaptics rmi4 spec properly. The rmi4 driver will need some hacks to deal with this.
</p>
<p>My regular 6 with a display replacement also seems to fail to init the display after its been reset.
</p>
<p>RMI4 attempting to probe on a fake touch IC will look something like the following:
</p>
<pre>[    3.502580] rmi4_i2c 12-0020: registering I2C-connected sensor
[    6.081770] rmi4_f01 rmi4-00.fn01: found RMI device, manufacturer: unknown, product: , fw id: 0
[    6.094861] rmi4_f12 rmi4-00.fn12: Behavior of F12 without register descriptors is undefined.
</pre>
<h2><span class="mw-headline" id="GPS">GPS</span></h2>
<p>Depending on the carrier config, GPS with ModemManager can work:
</p>
<p><code>mmcli -m any --location-enable-gps-nmea</code> 
</p>
<p><code>mmcli -m any --location-enable-gps-raw</code>
</p>
<p>followed by
</p>
<p><code>mmcli -m any --location-get</code> 
which returns NMEA phrases. Keep in mind that modem only works when a sim card is inserted.
</p>
<p>Normally, information about which satellites are where to expect (satellite almanac of orbit) is retrieved from the GPS satellites themselves and that can take at least roughly 12 min with a good signal, however here is were A-GPS (assisted GPS) steps in by providing internet services to augment GPS with those generic data.
</p>
<p>The carrier config selected by ModemManager (<code>mmcli -m any | grep 'carrier config'</code>) also contains configuration for A-GPS. Whether the config is complete in that regard can be checked with 
<code>mmcli -m any --location-status</code>
as it should contain <i>assistance servers</i>. If not, you might experience not continuous and only infrequent GPS fixes and other problems regarding GPS.
</p>
<p>See <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/issues/1505#note_1161541916">this comment thread</a> for more details.
</p>
<p>Some apps like <b>osmin</b> need geoclue to gather location info:
</p>
<p><code>/usr/libexec/geoclue-2.0/demos/agent</code>
</p>
<h2><span class="mw-headline" id="Camera">Camera</span></h2>
<p>Have to dump sensor init sequence from downstream and pray, need more time for tweaking this but it should be possible to make it work
</p>
<p>Relevant info can also be found in <a rel="nofollow" class="external text" href="https://gitlab.com/sdm845-mainline/linux/-/issues/21">sdm845-mainline!21</a>.
</p>
<h2><span class="mw-headline" id="Sensors">Sensors</span></h2>
<p>Initial sensor support is/will be added in <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/4050">pmaports!4050</a>
</p>
<h2><span class="mw-headline" id="TrustZone">TrustZone</span></h2>
<p>Drivers to communicate with the QSEE (Qualcomm Secure Execution Environment) are not on mainline and you can't flash OP-TEE because XBL_SEC checks the signature. Those drivers are called QSEECOM in the CAF kernel but there is the need to standardize them using the generic interface defined in <code>include/uapi/linux/tee.h</code>. You can use the OP-TEE implementation as an example. More documentation here <a rel="nofollow" class="external free" href="https://www.kernel.org/doc/html/latest/staging/tee.html">https://www.kernel.org/doc/html/latest/staging/tee.html</a>.
</p>
<p>Having a TrustZone is useful to do a lot of things related to security, but mainly fingerprint management, secure encryption involved in NFC, useful to emulate contactless smart cards, and Widevine L1 to watch premium streaming services with the best resolution!
</p>
<p>Regarding DRMs and userland, on Waydroid or Android mainline you need to develop <code>oemcrypto.so</code> with the support of the standard API for the TEE; manufacturers implement it with their custom interfaces. Look at this <a rel="nofollow" class="external free" href="https://source.android.com/devices/drm#drm-plugins">https://source.android.com/devices/drm#drm-plugins</a>.
</p>
<p>On GNU/Linux, you need to implement/enable Widevine L1 on players. For example on Firefox, if you want to watch Netflix or other in-browser streaming services, but you might also want to use an extension like <a rel="nofollow" class="external free" href="https://github.com/lkmvip/netflix-4K-DDplus">https://github.com/lkmvip/netflix-4K-DDplus</a> to spoof the device and so make Netflix give you the encrypted stream.
Another good implementation opportunity is on FFMPEG/VLC, it would be cool to make VLC able to stream Netflix and also having the possibility to save decrypted streams.
</p>
<h2><span class="mw-headline" id="Fastboot_flashing_issues">Fastboot flashing issues</span></h2>
<p>The fastboot implementation leaves some to be desired... If you encounter issues flashing with fastboot getting stuck or displaying weird errors like <code>device does not support slots</code>, prepare the fastboot flash command in your terminal, on the device choose the "reboot bootloader" option from fastboot, press the power button to confirm and then run the command while the device reboots.
</p>
<p>You'll see a "waiting for device" message in your terminal, the flashing should start as soon as the device gets back into fastboot mode.
</p>
<h2><span class="mw-headline" id="Modem_bugs">Modem bugs</span></h2>
<p>The recent enablement of ModemManager enables SMS and mobile data to work on supported SDM845 devices including the OnePlus 6 and 6T. It isn't possible to test these extensively due to the number of region specific and carrier specific issues that could arise.
</p>
<p>If you're encountering modem issues, perform the following steps to collect logs and submit them so that I or someone else can review:
</p>
<p>On your device with SIM card inserted:
</p>
<pre>sudo service modemmanager stop
sudo service msm-modem-uim-selection restart
sudo ModemManager --debug 2&gt;&amp;1 | tee mm.log
</pre>
<p>If your device requires SIM unlocking, perform that in Phosh settings, wait for a few seconds and then stop modemmanager again.
</p>
<p>Create a new issue <a rel="nofollow" class="external text" href="https://gitlab.freedesktop.org/mobile-broadband/ModemManager">in ModemManager here</a> to explain your issue, include a link to a pastebin containing the logs you captured (they're in mm.log in your home directory on device). At the bottom of your issue add <code>Cc: @calebccff</code> so that I'll be notified.
</p>
<p>Please also include the output of <code>uname -a</code> and <code>sudo qmicli -d qrtr://0 --uim-get-card-status</code> in your issue.
</p>
<h3><span class="mw-headline" id="Sim_not_appearing">Sim not appearing</span></h3>
<p>Some SIM cards or modem firmwares might take longer to initialize. If the SIM card does not appear, but <code>sudo qmicli -d qrtr://0 --uim-get-card-status</code> shows that the card is present (<code>Card state: 'present'</code>), one possible solution is to increase the wait time for the SIM card to appear after starting the modem. Edit the file: <code>/etc/conf.d/msm-modem-uim-selection</code> and change: <code>sim_wait_time=1</code> to <code>sim_wait_time=30</code> and reboot.
</p>
<h3><span class="mw-headline" id="Dual_Sim">Dual Sim</span></h3>
<p>Some users have reported issues with dual SIM causing modemmanager issues, whilst modemmanager should automatically select the first SIM, it lacks proper dual SIM support and sometimes can get confused. Currently the best workaround is to make sure you only have one SIM card inserted.
</p>
<h2><span class="mw-headline" id="Renegade_Project">Renegade Project</span></h2>
<p>Has support in main tree, can boot PostmarketOS.
</p>
<p>See also <a href="../en/OnePlus_6_(oneplus-enchilada)_Dual_Booting_and_Custom_Partitioning.html#Dual_booting_pmos_with_other_uefi_based_os_.28like_openbsd_.2C_netbsd_.2C_freebsd.2Cwindows.2Cetc.29_via_Renegade_Project" title="OnePlus 6 (oneplus-enchilada)/Dual Booting and Custom Partitioning">OnePlus 6 (oneplus-enchilada)/Dual Booting and Custom Partitioning#Dual booting pmos with other uefi based os (like openbsd , netbsd , freebsd,windows,etc) via Renegade Project</a> and <a rel="nofollow" class="external text" href="https://renegade-project.tech/en/devices/OnePlus/sdm845">Oneplus 6/6T Renegade Project Page</a>
</p>
<h2><span class="mw-headline" id="Community_Info">Community Info</span></h2>
<h3><span class="mw-headline" id="postmarketOS_users_that_own_the_device">postmarketOS users that own the device</span></h3>
<div style="-webkit-column-count: 2; -moz-column-count: 2; column-count: 2;"><ul style="margin-top: 0;">
<li>
<a href="../User:Aleksander.html" title="User:Aleksander">Aleksander</a> (<span class="cargoFieldName">Notes:</span> WWAN stack tinkering)</li>
<li><a href="../User:Antonok.html" title="User:Antonok">Antonok</a></li>
<li>
<a href="../User:BenTheTechGuy.html" title="User:BenTheTechGuy">BenTheTechGuy</a> (<span class="cargoFieldName">Notes:</span> Daily driver, LineageOS)</li>
<li><a href="../User:Blacklight.html" title="User:Blacklight">Blacklight</a></li>
<li>
<a href="../User:Breakfastisready.html" title="User:Breakfastisready">Breakfastisready</a> (<span class="cargoFieldName">Notes:</span> 128GB)</li>
<li>
<a href="../User:Chainbits.html" title="User:Chainbits">Chainbits</a> (<span class="cargoFieldName">Notes:</span> daily driver, available for testing)</li>
<li>
<a href="../User:DrGit.html" title="User:DrGit">DrGit</a> (<span class="cargoFieldName">Notes:</span> 128GB)</li>
<li>
<a href="../User:DrGit.html" title="User:DrGit">DrGit</a> (<span class="cargoFieldName">Notes:</span> 256GB)</li>
<li>
<a href="../User:DylanVanAssche.html" title="User:DylanVanAssche">DylanVanAssche</a> (<span class="cargoFieldName">Notes:</span> LineageOS)</li>
<li>
<a href="../User:E-v.html" title="User:E-v">E-v</a> (<span class="cargoFieldName">Notes:</span> [available for testing] 128 GB, dual boot and shared userdata with /e/OS Q)</li>
<li>
<a href="../User:Earboxer.html" title="User:Earboxer">Earboxer</a> (<span class="cargoFieldName">Notes:</span> sxmo-sway on pmOS edge. current daily driver(2023). Note: doas apk add sxmo-common-audio-pulse!)</li>
<li>
<a href="../User:EspiDev.html" title="User:EspiDev">EspiDev</a> (<span class="cargoFieldName">Notes:</span> 8/128 GB Plasma Mobile)</li>
<li>
<a href="../User:Frankwalter.html" title="User:Frankwalter">Frankwalter</a> (<span class="cargoFieldName">Notes:</span> [6GB/128GB] I bought it to experiment with Linux mobile, so I can help mainlining it and learn about drivers development in the process! (fajita))</li>
<li>
<a href="../User:Gbhdrew.html" title="User:Gbhdrew">Gbhdrew</a> (<span class="cargoFieldName">Notes:</span> About to start testing for daily use)</li>
<li>
<a href="../User:Giannidunk.html" title="User:Giannidunk">Giannidunk</a> (<span class="cargoFieldName">Notes:</span> 128 GB)</li>
<li>
<a href="../User:Hacker420.html" title="User:Hacker420">Hacker420</a> (<span class="cargoFieldName">Notes:</span> Daily driver, dualbooted with Android and pmOS on the other slot. (8/128))</li>
<li><a href="../User:Jrg.html" title="User:Jrg">Jrg</a></li>
<li>
<a href="../User:Kalube.html" title="User:Kalube">Kalube</a> (<span class="cargoFieldName">Notes:</span> 256GB postmarketOS daily driver)</li>
<li>
<a href="../User:Kalube.html" title="User:Kalube">Kalube</a> (<span class="cargoFieldName">Notes:</span> 3rd party touch screen to be fixed)</li>
<li>
<a href="../User:Kalube.html" title="User:Kalube">Kalube</a> (<span class="cargoFieldName">Notes:</span> lab rat)</li>
<li><a href="../User:Kbingham.html" title="User:Kbingham">Kbingham</a></li>
<li>
<a href="../User:Ksqeib.html" title="User:Ksqeib">Ksqeib</a> (<span class="cargoFieldName">Notes:</span> Using as Minecraft Server)</li>
<li>
<a href="../User:Langfingaz.html" title="User:Langfingaz">Langfingaz</a> (<span class="cargoFieldName">Notes:</span> Running PostmarketOS edge)</li>
<li><a href="../User:Linmob.html" title="User:Linmob">Linmob</a></li>
<li>
<a href="../User:Lolgzs.html" title="User:Lolgzs">Lolgzs</a> (<span class="cargoFieldName">Notes:</span> 128GB, PMOSdaily driver)</li>
<li>
<a href="../User:Memoryfile.html" title="User:Memoryfile">Memoryfile</a> (<span class="cargoFieldName">Notes:</span> spare phone running GNOME mobile)</li>
<li>
<a href="../User:No112.html" title="User:No112">No112</a> (<span class="cargoFieldName">Notes:</span> currently non-functional with a dangerous looking battery)</li>
<li>
<a href="../User:Okias.html" title="User:Okias">Okias</a> (<span class="cargoFieldName">Notes:</span> 8G/128G)</li>
<li><a href="../User:PanzerSajt.html" title="User:PanzerSajt">PanzerSajt</a></li>
<li>
<a href="../User:Plata.html" title="User:Plata">Plata</a> (<span class="cargoFieldName">Notes:</span> Plasma Mobile)</li>
<li><a href="../User:QC8086.html" title="User:QC8086">QC8086</a></li>
<li>
<a href="../User:Russanandres.html" title="User:Russanandres">Russanandres</a> (<span class="cargoFieldName">Notes:</span> Dualboot android + PMOS)</li>
<li>
<a href="../User:Sado1.html" title="User:Sado1">Sado1</a> (<span class="cargoFieldName">Notes:</span> one with pmOS, the other with incompatible replaced screen and Android)</li>
<li>
<a href="../User:SevralT.html" title="User:SevralT">SevralT</a> (<span class="cargoFieldName">Notes:</span> My second phone for Linux ;p)</li>
<li>
<a href="../User:Some_Chinese_Guy.html" title="User:Some Chinese Guy">Some Chinese Guy</a> (<span class="cargoFieldName">Notes:</span> daily driver)</li>
<li>
<a href="../User:Syboxez.html" title="User:Syboxez">Syboxez</a> (<span class="cargoFieldName">Notes:</span> (128G/8G) Daily driver on Slot B, tinker phone on Slot A)</li>
<li>
<a href="../User:ThatGeekZen.html" title="User:ThatGeekZen">ThatGeekZen</a> (<span class="cargoFieldName">Notes:</span> PMOS Daily Driver)</li>
<li>
<a href="../User:Thenightterrorx.html" title="User:Thenightterrorx">Thenightterrorx</a> (<span class="cargoFieldName">Notes:</span> Now running lineageOS,pmOS used as daily driver for a while, but call audio kept breaking)</li>
<li>
<a href="../User:TQMatvey.html" title="User:TQMatvey">TQMatvey</a> (<span class="cargoFieldName">Notes:</span> Third-party Touchscreen, dualboot linux and CrDroid)</li>
<li>
<a href="../User:WhyNotHugo.html" title="User:WhyNotHugo">WhyNotHugo</a> (<span class="cargoFieldName">Notes:</span> Running postmarketOS. Mostly for experimentation.)</li>
<li>
<a href="../User:Xanadul.html" title="User:Xanadul">Xanadul</a> (<span class="cargoFieldName">Notes:</span> 128 GB)</li>
</ul></div>
<p><br>
</p>
<h3><span class="mw-headline" id="Maintainers">Maintainers</span></h3>
<ul><li><a href="../User:Kalube.html" title="User:Kalube">Caleb</a></li></ul>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<h3><span class="mw-headline" id="Internal_pages">Internal pages</span></h3>
<ul class="mw-prefixindex-list">
<li><a href="../en/OnePlus_6_(oneplus-enchilada)_Dual_Booting_and_Custom_Partitioning.html" title="OnePlus 6 (oneplus-enchilada)/Dual Booting and Custom Partitioning">OnePlus 6 (oneplus-enchilada)/Dual Booting and Custom Partitioning</a></li>
<li><a href="../en/OnePlus_6_(oneplus-enchilada)_Hacking.html" title="OnePlus 6 (oneplus-enchilada)/Hacking">OnePlus 6 (oneplus-enchilada)/Hacking</a></li>
</ul>
<ul><li><a href="../en/OnePlus_6T_(oneplus-fajita).html" title="OnePlus 6T (oneplus-fajita)">OnePlus 6T (oneplus-fajita)</a></li></ul>
<h3><span class="mw-headline" id="External_links">External links</span></h3>
<ul>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/sdm845-mainline/linux">Kernel sources</a></li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/1221">pmaports!1221</a> Initial merge request.</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/1271">pmaports!1271</a> Updates to add panel mode and WiFi support.</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/2088">pmaports!2088</a> Move the OnePlus 6 to "community" devices category</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/1967">pmaports!1967</a> Switch to common linux-postmarketos-qcom-sdm845 kernel instead of device specific kernel</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/2206">pmaports!2206</a> Update to 5.12.8 and add support for the speaker / headphone jack on the OnePlus 6</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/2215">pmaports!2215</a> Support automatic kernel updates for Android devices (including A/B!)</li>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/tree/master/device/community/device-oneplus-enchilada">Enchilada device package</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/tree/master/device/community/device-oneplus-fajita">Fajita device package</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/tree/master/device/community/linux-postmarketos-qcom-sdm845">Kernel package</a></li>
<li><a rel="nofollow" class="external text" href="https://cast.postmarketos.org/episode/08-Interview-Caleb-Connolly-SDM-845-Mainlining/">postmarketOS podcast interview with Caleb about mainlining the OnePlus 6</a></li>
<li><a href="../en/Android_AB_Slots.html" title="Android AB Slots">Documentation on A/B slots</a></li>
</ul>
</div></div>
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Devices.html" title="Category:Devices">Devices</a></li>
<li><a href="/index.php?title=Category:Handset&amp;action=edit&amp;redlink=1" class="new" title="Category:Handset (page does not exist)">Handset</a></li>
<li><a href="../en/Category:Android.html" title="Category:Android">Android</a></li>
<li><a href="../en/Category:OnePlus.html" title="Category:OnePlus">OnePlus</a></li>
<li><a href="../en/Category:Devices_with_known_UART_pinout.html" title="Category:Devices with known UART pinout">Devices with known UART pinout</a></li>
</ul>
</div></div>
		<div class="visualClear"></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=OnePlus_6_(oneplus-enchilada)&amp;oldid=46053">https://wiki.postmarketos.org/index.php?title=OnePlus_6_(oneplus-enchilada)&amp;oldid=46053</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 29 June 2023, at 20:16.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../en/About_postmarketOS.html" class="mw-redirect" title="PostmarketOS:About">About postmarketOS</a></li>
								<li id="footer-places-disclaimer"><a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-mobileview"><a href="https://wiki.postmarketos.org/index.php?title=OnePlus_6_(oneplus-enchilada)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"></a>					</li>
										<li id="footer-poweredbyico">
						<a href="https://www.mediawiki.org/"><img src="../poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="" width="88" height="31"></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		

</body>
</html>
