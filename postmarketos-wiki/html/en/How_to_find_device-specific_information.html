<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   How to find device-specific information - postmarketOS
  </title>
  <link href="../PostmarketOSWikiOffline.css" rel="stylesheet"/>
  <meta content="" name="ResourceLoaderDynamicStyles"/>
  <meta content="MediaWiki 1.34.2" name="generator"/>
  <link href="/favicon.ico" rel="shortcut icon"/>
  <link href="/opensearch_desc.php" rel="search" title="postmarketOS (en)" type="application/opensearchdescription+xml"/>
  <link href="https://wiki.postmarketos.org/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
  <link href="https://creativecommons.org/licenses/by-sa/4.0/" rel="license"/>
  <link href="/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="postmarketOS Atom feed" type="application/atom+xml"/>
 </head>
 <body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-How_to_find_device-specific_information rootpage-How_to_find_device-specific_information skin-vector action-view">
  <div class="mw-body" id="content" role="main" style="margin: 0">
   <a id="top">
   </a>
   <div class="mw-indicators mw-body-content">
   </div>
   <h1 class="firstHeading" id="firstHeading" lang="en">
    How to find device-specific information
   </h1>
   <div class="mw-body-content" id="bodyContent">
    <div class="noprint" id="siteSub">
     From postmarketOS
    </div>
    <div id="contentSub">
    </div>
    <div id="jump-to-nav">
    </div>
    <a class="mw-jump-link" href="#mw-head">
     Jump to navigation
    </a>
    <a class="mw-jump-link" href="#p-search">
     Jump to search
    </a>
    <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
     <div class="mw-parser-output">
      <div class="toc" id="toc">
       <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/>
       <div class="toctitle" dir="ltr" lang="en">
        <h2>
         Contents
        </h2>
        <span class="toctogglespan">
         <label class="toctogglelabel" for="toctogglecheckbox">
         </label>
        </span>
       </div>
       <ul>
        <li class="toclevel-1 tocsection-1">
         <a href="#Android">
          <span class="tocnumber">
           1
          </span>
          <span class="toctext">
           Android
          </span>
         </a>
         <ul>
          <li class="toclevel-2 tocsection-2">
           <a href="#Generic_device_information">
            <span class="tocnumber">
             1.1
            </span>
            <span class="toctext">
             Generic device information
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-3">
           <a href="#Fastboot_.28boot.img.29_flash_offsets">
            <span class="tocnumber">
             1.2
            </span>
            <span class="toctext">
             Fastboot (boot.img) flash offsets
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-4">
           <a href="#Kernel_version">
            <span class="tocnumber">
             1.3
            </span>
            <span class="toctext">
             Kernel version
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-5">
           <a href="#Device_Architecture">
            <span class="tocnumber">
             1.4
            </span>
            <span class="toctext">
             Device Architecture
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-6">
           <a href="#Device_code_name">
            <span class="tocnumber">
             1.5
            </span>
            <span class="toctext">
             Device code name
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-7">
           <a href="#LineageOS_kernel_source_repository">
            <span class="tocnumber">
             1.6
            </span>
            <span class="toctext">
             LineageOS kernel source repository
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-8">
           <a href="#Other_locations_for_kernel_repositories">
            <span class="tocnumber">
             1.7
            </span>
            <span class="toctext">
             Other locations for kernel repositories
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-9">
           <a href="#Kernel_defconfig_.28default_config.29">
            <span class="tocnumber">
             1.8
            </span>
            <span class="toctext">
             Kernel defconfig (default config)
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-10">
           <a href="#Misc_info_from_BoardConfig.mk">
            <span class="tocnumber">
             1.9
            </span>
            <span class="toctext">
             Misc info from BoardConfig.mk
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-11">
           <a href="#Firmware_files">
            <span class="tocnumber">
             1.10
            </span>
            <span class="toctext">
             Firmware files
            </span>
           </a>
          </li>
          <li class="toclevel-2 tocsection-12">
           <a href="#Device_tree_source_.28dts.29">
            <span class="tocnumber">
             1.11
            </span>
            <span class="toctext">
             Device tree source (dts)
            </span>
           </a>
          </li>
         </ul>
        </li>
       </ul>
      </div>
      <h1>
       <span class="mw-headline" id="Android">
        Android
       </span>
      </h1>
      <h2>
       <span class="mw-headline" id="Generic_device_information">
        Generic device information
       </span>
      </h2>
      <ul>
       <li>
        <a class="external text" href="https://github.com/LineageOS/lineage_wiki/blob/master/_data/devices/" rel="nofollow">
         LineageOS devices database
        </a>
        (hardware specs: architecture, screen resolution, ... and key combinations for flash/recovery mode)
       </li>
       <li>
        Use the "cat /proc/cpuinfo" in terminal to get some CPU information.
       </li>
      </ul>
      <h2>
       <span id="Fastboot_(boot.img)_flash_offsets">
       </span>
       <span class="mw-headline" id="Fastboot_.28boot.img.29_flash_offsets">
        Fastboot (boot.img) flash offsets
       </span>
      </h2>
      <table role="text container" style="color: inherit; background-color: #f6efe5; border: 1px solid #ac6600; margin: 4px 0; border-collapse: collapse;">
       <tbody>
        <tr>
         <td style="padding: 2px 0 2px 0.9em; text-align: center;">
          <span style="white-space: nowrap;">
           <img alt="Note" decoding="async" height="20" src="../Reference_icon.svg" srcset="../Reference_icon.svg 1.5x ../Reference_icon.svg 2x" title="Note" width="20"/>
          </span>
         </td>
         <td style="padding: 0.35em 0.9em; width: 100%;">
          <code>
           pmbootstrap bootimg_analyze
          </code>
          automatizes this and directly gives you what you need to put in the
          <code>
           deviceinfo
          </code>
          file (
          <a href="../en/Porting_to_a_new_device.html#Flash_method" title="Porting to a new device">
           more
          </a>
          ). The information below is only kept for reference, but do yourself a favor and use the automated version instead.
         </td>
        </tr>
       </tbody>
      </table>
      <p>
       <i>
        If you can't find a full ROM image for your device, consider extracting the boot.img file directly from your device
        <a class="external text" href="https://wiki.postmarketos.org/wiki/Using_prebuilt_kernels" rel="nofollow">
         with adb
        </a>
        .
       </i>
      </p>
      <ol>
       <li>
        Find the download link for a full image on
        <a class="external free" href="https://download.lineageos.org/" rel="nofollow">
         https://download.lineageos.org/
        </a>
       </li>
       <li>
        <p>
         Run the following commands (replace the download link accordingly)
        </p>
        <pre class="shell">pmbootstrap build mkbootimg-osm0sis
pmbootstrap chroot
apk add mkbootimg-osm0sis
su - user
mkdir /tmp/bootimg_info
cd /tmp/bootimg_info
wget "https://mirrorbits.lineageos.org/full/hammerhead/20170530/lineage-14.1-20170530-nightly-hammerhead-signed.zip"
unzip *.zip
unpackbootimg -i boot.img</pre>
       </li>
       <li>
        <p>
         Example output:
        </p>
        <pre>Android magic found at: 0
BOARD_KERNEL_CMDLINE console=ttyHSL0,115200,n8 androidboot.hardware=hammerhead
user_debug=31 maxcpus=2 msm_watchdog_v2.enable=1
androidboot.bootdevice=msm_sdcc.1 buildvariant=userdebug
BOARD_KERNEL_BASE 00008000
BOARD_RAMDISK_OFFSET 02900000
BOARD_SECOND_OFFSET 00f00000
BOARD_TAGS_OFFSET 02700000
BOARD_PAGE_SIZE 2048
BOARD_SECOND_SIZE 0
BOARD_DT_SIZE 0</pre>
       </li>
      </ol>
      <p>
       Translate the variables as follows into your deviceinfo:
      </p>
      <ul>
       <li>
        <code>
         BOARD_KERNEL_CMDLINE
        </code>
        -&gt;
        <code>
         deviceinfo_kernel_cmdline
        </code>
       </li>
       <li>
        <code>
         BOARD_KERNEL_BASE
        </code>
        -&gt;
        <code>
         deviceinfo_flash_offset_kernel
        </code>
       </li>
       <li>
        <code>
         BOARD_RAMDISK_OFFSET
        </code>
        -&gt;
        <code>
         deviceinfo_flash_offset_ramdisk
        </code>
       </li>
       <li>
        <code>
         BOARD_SECOND_OFFSET
        </code>
        -&gt;
        <code>
         deviceinfo_flash_offset_second
        </code>
       </li>
       <li>
        <code>
         BOARD_TAGS_OFFSET
        </code>
        -&gt;
        <code>
         deviceinfo_flash_offset_tags
        </code>
       </li>
       <li>
        <code>
         BOARD_PAGE_SIZE
        </code>
        -&gt;
        <code>
         deviceinfo_flash_pagesize
        </code>
       </li>
       <li>
        <code>
         BOARD_SECOND_SIZE
        </code>
        and
        <code>
         BOARD_DT_SIZE
        </code>
        can both be ignored
       </li>
       <li>
        (contents of the extracted
        <code>
         boot.img-base
        </code>
        file) -&gt;
        <code>
         deviceinfo_flash_offset_base
        </code>
        (defaults to
        <code>
         0x10000000
        </code>
        )
       </li>
      </ul>
      <p>
       <br/>
      </p>
      <hr/>
      <p>
       <i>
        NOTE: Some useful info can be pulled via fastboot too (in case you have the device at hand) by executing
        <code>
         fastboot getvar all
        </code>
       </i>
      </p>
      <h2>
       <span class="mw-headline" id="Kernel_version">
        Kernel version
       </span>
      </h2>
      <ul>
       <li>
        <a class="external text" href="https://stackoverflow.com/a/12151781" rel="nofollow">
         Look at the Makefile inside the kernel repository
        </a>
       </li>
      </ul>
      <h2>
       <span class="mw-headline" id="Device_Architecture">
        Device Architecture
       </span>
      </h2>
      <ul>
       <li>
        You can find the architecture while the device is running another kernel (e.g. original Android or TWRP). Run
        <code>
         adb shell
        </code>
        to gain access to the console on the device, and type
        <code>
         uname -m
        </code>
        .
       </li>
       <li>
        pmOS supports the
        <code>
         armhf
        </code>
        ,
        <code>
         armv7
        </code>
        , and
        <code>
         aarch64
        </code>
        architectures. If the output is
        <code>
         armv7l
        </code>
        , for example, you should use
        <code>
         armv7
        </code>
        as your device architecture.
       </li>
      </ul>
      <h2>
       <span class="mw-headline" id="Device_code_name">
        Device code name
       </span>
      </h2>
      <ul>
       <li>
        <a class="external text" href="https://wiki.lineageos.org/devices/" rel="nofollow">
         LineageOS List
        </a>
       </li>
       <li>
        <a class="external text" href="https://www.droidviews.com/codenames-of-samsung-galaxy-devices/" rel="nofollow">
         List for Samsung Galaxy Devices
        </a>
       </li>
       <li>
        <a class="external text" href="https://storage.googleapis.com/play_public/supported_devices.html" rel="nofollow">
         List of supported devices of Android by Google
        </a>
       </li>
       <li>
        <a class="external text" href="https://github.com/jaredrummler/AndroidDeviceNames" rel="nofollow">
         Android library to get device name
        </a>
        (json database file replaced with binary db file)
       </li>
      </ul>
      <h2>
       <span class="mw-headline" id="LineageOS_kernel_source_repository">
        LineageOS kernel source repository
       </span>
      </h2>
      <ul>
       <li>
        Find out the code name of your device (see above)
       </li>
       <li>
        Usually, you can find the
        <i>
         kernel
        </i>
        source repository by typing in the code name of your device into the
        <a class="external text" href="https://github.com/LineageOS?utf8=%E2%9C%93&amp;q=&amp;type=&amp;language=" rel="nofollow">
         LineageOS GitHub page
        </a>
       </li>
       <li>
        If you can't find it, but you found a repository starting with
        <code>
         android_device_
        </code>
        , open that repository and look into the
        <code>
         lineage.dependencies
        </code>
        file. It lists other LineageOS repositories there - open these repositories, until you finally find the repository with "kernel" in the name. Example:
        <a class="external text" href="https://github.com/LineageOS/android_device_htc_evita/blob/cm-14.1/lineage.dependencies#L3" rel="nofollow">
         First
        </a>
        ,
        <a class="external text" href="https://github.com/LineageOS/android_device_htc_s4-common/blob/630a97ee53f1b6a43f02f9fb3841db026967f5ed/lineage.dependencies#L11" rel="nofollow">
         Second
        </a>
        ,
        <a class="external text" href="https://github.com/LineageOS/android_kernel_htc_msm8960" rel="nofollow">
         Third: Kernel repo!
        </a>
       </li>
      </ul>
      <h2>
       <span class="mw-headline" id="Other_locations_for_kernel_repositories">
        Other locations for kernel repositories
       </span>
      </h2>
      <ul>
       <li>
        <a class="external text" href="https://github.com/cyanogenmod" rel="nofollow">
         CyanogenMod
        </a>
        (same instructions as for LinageOS)
       </li>
       <li>
        <a class="external text" href="https://legacyxperia.github.io/" rel="nofollow">
         legacyxperia project
        </a>
       </li>
       <li>
        <a class="external text" href="http://opensource.samsung.com/reception.do" rel="nofollow">
         Samsung Opensource Release Center
        </a>
       </li>
       <li>
        <a class="external text" href="http://opensource.lge.com" rel="nofollow">
         LG Electronics Open Source Distribution system
        </a>
       </li>
       <li>
        <a class="external text" href="https://github.com/MiCode/Xiaomi_Kernel_OpenSource" rel="nofollow">
         Xiaomi Open Source Kernel Repository
        </a>
       </li>
       <li>
        <a class="external text" href="https://github.com/TeamWin?utf8=%E2%9C%93&amp;q=kernel&amp;type=&amp;language=" rel="nofollow">
         TWRP
        </a>
       </li>
       <li>
        Download a working recovery OS (TWRP/CWM), and
        <a class="external text" href="https://stackoverflow.com/a/37689814" rel="nofollow">
         extract the Linux version string from the kernel
        </a>
        , then search for that kernel on GitHub / on the web
       </li>
       <li>
        <a class="external text" href="https://github.com/rockchip-linux/kernel/" rel="nofollow">
         Rockchip Linux
        </a>
        (Note there are multiple branches for different versions of the Linux Kernel, and
        <code>
         release
        </code>
        branches might work better than
        <code>
         develop
        </code>
        branches)
       </li>
      </ul>
      <h2>
       <span id="Kernel_defconfig_(default_config)">
       </span>
       <span class="mw-headline" id="Kernel_defconfig_.28default_config.29">
        Kernel defconfig (default config)
       </span>
      </h2>
      <table role="text container" style="color: inherit; background-color: #f6efe5; border: 1px solid #ac6600; margin: 4px 0; border-collapse: collapse;">
       <tbody>
        <tr>
         <td style="padding: 2px 0 2px 0.9em; text-align: center;">
          <span style="white-space: nowrap;">
           <img alt="Note" decoding="async" height="20" src="../Reference_icon.svg" srcset="../Reference_icon.svg 1.5x ../Reference_icon.svg 2x" title="Note" width="20"/>
          </span>
         </td>
         <td style="padding: 0.35em 0.9em; width: 100%;">
          Sometimes the Android build process uses more than one kernel config and merges them, see
          <a class="external text" href="https://github.com/postmarketOS/pmbootstrap/issues/1307#issuecomment-377407456" rel="nofollow">
           #1307 (comment)
          </a>
         </td>
        </tr>
       </tbody>
      </table>
      <ul>
       <li>
        <code>
         DEFCONFIG=
        </code>
        line inside the
        <code>
         build.config
        </code>
        inside the kernel repository (if available) (
        <a class="external text" href="https://github.com/LineageOS/android_kernel_lge_hammerhead/blob/cm-14.1/build.config#L4" rel="nofollow">
         example
        </a>
        )
       </li>
       <li>
        <a class="external text" href="https://source.android.com/source/building-kernels" rel="nofollow">
         Official listing
        </a>
       </li>
       <li>
        If you found the
        <code>
         android_device_
        </code>
        repository (as shown in
        <i>
         LineageOS kernel source repository
        </i>
        above), look for a
        <code>
         TARGET_KERNEL_CONFIG
        </code>
        line in the
        <a class="external text" href="https://github.com/LineageOS/android_device_htc_evita/blob/25b93bf95fac520fa1952a8b756b536d4fd4fcab/BoardConfig.mk#L42" rel="nofollow">
         BoardConfig.mk
        </a>
        .
       </li>
       <li>
        If you've got the stock
        <code>
         boot.img
        </code>
        , you can try to extract the config from this kernel, either on your pc using
        <a class="external text" href="https://github.com/torvalds/linux/blob/master/scripts/extract-ikconfig" rel="nofollow">
         this script
        </a>
        or by booting in postmarketOS with a
        <a class="external text" href="https://wiki.postmarketos.org/wiki/Using_prebuilt_kernels" rel="nofollow">
         prebuilt kernel
        </a>
        and then
        <a class="external text" href="https://superuser.com/questions/287371/obtain-kernel-config-from-currently-running-linux-system" rel="nofollow">
         extracting the config from the running system
        </a>
        .
       </li>
      </ul>
      <p>
       <br/>
       In the case where you have located the kernel source for your device but there is no
       <code>
        build.config
       </code>
       , have a look at the
       <code>
        arch/arm/configs/
       </code>
       directory. E.g. for Moto G 2014 "titan" that uses android_kernel_motorola_msm8226 you have a
       <a class="external text" href="https://github.com/LineageOS/android_kernel_motorola_msm8226/blob/cm-14.1/arch/arm/configs/titan_defconfig" rel="nofollow">
        titan_defconfig
       </a>
       file there.
      </p>
      <h2>
       <span class="mw-headline" id="Misc_info_from_BoardConfig.mk">
        Misc info from BoardConfig.mk
       </span>
      </h2>
      <p>
       <a class="external text" href="https://github.com/LineageOS/android_device_lge_hammerhead/blob/4bacb98a5dc736a6c832fe1e03d3bbe7320cd7f5/BoardConfig.mk#L25-L30" rel="nofollow">
        Example
       </a>
       , contains the following information:
      </p>
      <ul>
       <li>
        kernel commandline
       </li>
       <li>
        ramdisk offset, tags offset, pagesize, base
       </li>
       <li>
        boot partition size
       </li>
      </ul>
      <h2>
       <span class="mw-headline" id="Firmware_files">
        Firmware files
       </span>
      </h2>
      <p>
       See
       <a href="../en/Firmware.html" title="Firmware">
        Firmware
       </a>
       .
      </p>
      <h2>
       <span id="Device_tree_source_(dts)">
       </span>
       <span class="mw-headline" id="Device_tree_source_.28dts.29">
        Device tree source (dts)
       </span>
      </h2>
      <p>
       If you can't find the proper dts anywhere, and typical sources like LineageOS or TWRP are just appending a binary blob (dtb, device tree blob), it should be possible to decompile that blob and add it as patch to your linux package. It was done like this in
       <a class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/573" rel="nofollow">
        pmaports!573
       </a>
       for example. From a license perspective, this should also be fine, because the Linux kernel is released under the GPLv2.
      </p>
     </div>
    </div>
    <div class="catlinks" data-mw="interface" id="catlinks">
     <div class="mw-normal-catlinks" id="mw-normal-catlinks">
      <a href="../Special:Categories.html" title="Special:Categories">
       Category
      </a>
      :
      <ul>
       <li>
        <a href="../en/Category:Guide.html" title="Category:Guide">
         Guide
        </a>
       </li>
      </ul>
     </div>
    </div>
    <div class="visualClear">
    </div>
   </div>
  </div>
  <div id="footer" role="contentinfo" style="margin: 0">
   <ul id="footer-info">
    <li>
     Retrieved from "
     <a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=How_to_find_device-specific_information&amp;oldid=18502">
      https://wiki.postmarketos.org/index.php?title=How_to_find_device-specific_information&amp;oldid=18502
     </a>
     "
    </li>
    <li id="footer-info-lastmod">
     This page was last edited on 10 April 2021, at 09:59.
    </li>
    <li id="footer-info-copyright">
     Content is available under
     <a class="external" href="https://creativecommons.org/licenses/by-sa/4.0/" rel="nofollow">
      Creative Commons Attribution-ShareAlike
     </a>
     unless otherwise noted.
    </li>
    <br/>
   </ul>
   <ul id="footer-places">
    <li id="footer-places-privacy">
     <a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">
      Privacy policy
     </a>
    </li>
    <li id="footer-places-about">
     <a class="mw-redirect" href="../en/About_postmarketOS.html" title="PostmarketOS:About">
      About postmarketOS
     </a>
    </li>
    <li id="footer-places-disclaimer">
     <a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">
      Disclaimers
     </a>
    </li>
    <li id="footer-places-mobileview">
     <a class="noprint stopMobileRedirectToggle" href="https://wiki.postmarketos.org/index.php?title=How_to_find_device-specific_information&amp;mobileaction=toggle_view_mobile">
      Mobile view
     </a>
    </li>
   </ul>
   <ul class="noprint" id="footer-icons">
    <li id="footer-copyrightico">
     <a href="https://creativecommons.org/licenses/by-sa/4.0/">
      <img alt="Creative Commons Attribution-ShareAlike" height="31" src="../cc-by-sa.png" width="88"/>
     </a>
    </li>
    <li id="footer-poweredbyico">
     <a href="https://www.mediawiki.org/">
      <img alt="Powered by MediaWiki" height="31" src="../poweredby_mediawiki_88x31.png" srcset="" width="88"/>
     </a>
    </li>
   </ul>
   <div style="clear: both;">
   </div>
  </div>
 </body>
</html>
