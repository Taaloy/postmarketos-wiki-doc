<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Samsung Galaxy Note 9 (Exynos) (samsung-crownlte) - postmarketOS</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.34.2">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="postmarketOS (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Samsung_Galaxy_Note_9_Exynos_samsung-crownlte rootpage-Samsung_Galaxy_Note_9_Exynos_samsung-crownlte skin-vector action-view">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading" class="firstHeading" lang="en">Samsung Galaxy Note 9 (Exynos) (samsung-crownlte)</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From postmarketOS</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Samsung Galaxy Note 9</caption>
<tbody>
<tr class=""><td colspan="2" class="" style="text-align:center;">
<a href="../Samsung-crownlte.jpg" class="image"><img alt="xfce4, onboard, neofetch" src="../Samsung-crownlte.jpg" decoding="async" width="200" height="300" srcset="../300px-Samsung-crownlte.jpg 1.5x ../400px-Samsung-crownlte.jpg 2x"></a><br><span style="">xfce4, onboard, neofetch</span>
</td></tr>
<tr class="">
<th scope="row" style="text-align:left;">Manufacturer</th>
    <td class="" style="">
Samsung</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Name</th>
    <td class="" style="">
Galaxy Note 9</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Codename</th>
    <td class="" style="">
samsung-crownlte</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Released</th>
    <td class="" style="">
2018</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Category</th>
    <td class="" style="">
testing</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Original software</th>
    <td class="" style="">
Android 8.1</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">postmarketOS kernel</th>
    <td class="" style="">
4.9.218</td>
</tr>
<tr><th colspan="2" class="" style="text-align:center;">Hardware</th></tr>
<tr class="">
<th scope="row" style="text-align:left;">Chipset</th>
    <td class="" style="">
Samsung Exynos 9810</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">CPU</th>
    <td class="" style="">
4x2.7 GHz Cortex-A55 &amp; 4x1.7 GHz Mongoose M3</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPU</th>
    <td class="" style="">
Mali-G72 MP18</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Display</th>
    <td class="" style="">
1440x2960 Super AMOLED</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Storage</th>
    <td class="" style="">
128/512 GB UFS 2.1</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Memory</th>
    <td class="" style="">
6/8 GB</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Architecture</th>
    <td class="" style="">
aarch64</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Unixbench Whet/Dhry score</th>
    <td class="" style="">
6053.8</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Features</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="After connecting the device with USB to your PC, you can connect to it via telnet (initramfs) or SSH (booted system).">USB Networking</abbr></th>
    <td class="" style="">
<div class="feature feature-partial">Partial</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="It is possible to flash the device with `pmbootstrap flasher`.">Flashing</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Touchscreen</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Display works. Ideally with sleep mode and brightness control.">Display</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">WiFi</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Full disk encryption and unlocking with osk-sdl.">FDE</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Instead of a Linux kernel fork, it is possible to run mainline.">Mainline</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Charging and battery level reporting works">Battery</abbr></th>
    <td class="" style="">
<div class="feature feature-partial">Partial</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">3D Acceleration</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Audio playback, microphone, headset and buttons.">Audio</abbr></th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Bluetooth</th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Camera</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPS</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Mobile data</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">SMS</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Calls</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">USB OTG</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">NFC</th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Sensors</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Auto screen rotation works in desktops e.g. Phosh or Plasma Mobile">Accelerometer</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Magnetometer</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ambient Light</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Proximity</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Used as flip cover sensor, keyboard slide out sensor, etc.">Hall Effect</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Misc</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;">Ir TX</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">TrustZone</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<p><br>
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="Contributors">Contributors</span></h2>
<ul><li>
<a href="../User:Rom4nik.html" title="User:Rom4nik">rom4nik</a> - porting</li></ul>
<h2><span class="mw-headline" id="Users_owning_this_device">Users owning this device</span></h2>
<div style="-webkit-column-count: 2; -moz-column-count: 2; column-count: 2;"><ul style="margin-top: 0;">
<li>
<a href="../User:Rom4nik.html" title="User:Rom4nik">Rom4nik</a> (<span class="cargoFieldName">Notes:</span> 6/128 model)</li>
</ul></div>
<p><br>
</p>
<h2>
<span id="How_to_enter_recovery/Odin_mode"></span><span class="mw-headline" id="How_to_enter_recovery.2FOdin_mode">How to enter recovery/Odin mode</span>
</h2>
<ul>
<li>Press and hold <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Bixby Key</span> + <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Volume Down</span> simultaneously while device is powered off, then plug USB cable in for Odin mode.</li>
<li>Press and hold <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Bixby Key</span> + <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Volume Up</span> + <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Power</span> simultaneously while device is powered off for recovery mode.</li>
<li>Press and hold <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Volume Down</span> + <span class="nowrap" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Power</span> simultaneously for 7-8 seconds while device is powered on to force reboot. Once time is up immediately release the keys and press one of combinations above before boot logo appears, otherwise device will boot normally.</li>
</ul>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>1. Unlock bootloader.
</p>
<p>2. Flash using Heimdall:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> pmbootstrap install
<span class="gp">$</span> pmbootstrap flasher flash_rootfs
</pre></div>
<p>or follow <a href="../en/Installation_from_recovery_mode.html" title="Installation from recovery mode">Installation_from_recovery_mode</a> instead.
</p>
<p><br>
</p>
<h2><span class="mw-headline" id="USB_networking">USB networking</span></h2>
<h3><span class="mw-headline" id="RNDIS">RNDIS</span></h3>
<p>Similarly to <a href="../en/Samsung_Galaxy_S8_(samsung-dreamlte).html" title="Samsung Galaxy S8 (samsung-dreamlte)">Samsung_Galaxy_S8_(samsung-dreamlte)</a>, RNDIS interface fails to come up without additional setup in initfs-hook.sh, making no appearances in dmesg on host. With <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/blob/4d327313e40b48bdb9ac0c6e07f0b36cc2be4ff8/device/testing/device-samsung-dream/initfs-hook.sh">this hook</a>, RNDIS interface appears in dmesg:
</p>
<pre>[279777.979155] usb 1-2: new high-speed USB device number 87 using xhci_hcd
[279778.121336] usb 1-2: New USB device found, idVendor=18d1, idProduct=d001, bcdDevice= 4.09
[279778.121349] usb 1-2: New USB device strings: Mfr=5, Product=6, SerialNumber=7
[279778.121355] usb 1-2: Product: Samsung Galaxy Note 9
[279778.121359] usb 1-2: Manufacturer: Samsung
[279778.121362] usb 1-2: SerialNumber: postmarketOS
[279778.126491] rndis_host 1-2:1.0 usb0: register 'rndis_host' at usb-0000:00:14.0-2, RNDIS device, 4a:cd:d6:82:45:85
[279778.165343] rndis_host 1-2:1.0 enp0s20f0u2: renamed from usb0
</pre>
<p>and in ip addr on PC:
</p>
<pre>79: enp0s20f0u2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UNKNOWN group default qlen 1000
    link/ether 2a:8a:39:88:72:b8 brd ff:ff:ff:ff:ff:ff
    inet6 fe80::198c:608d:4538:79a/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
</pre>
<p>Here's pmOS_init.log output:
</p>
<pre>Setup usb network
  Setting up an USB gadget through android_usb
/init: line 394: can't create /sys/class/android_usb/android0/idVendor: Permission denied
/init: line 395: can't create /sys/class/android_usb/android0/idProduct: Permission denied
sh: write error: No such device
  Setting up an USB gadget through configfs
mkdir: can't create directory '/config/usb_gadget/g1': File exists
  Couldn't create /config/usb_gadget/g1
mkdir: can't create directory '/config/usb_gadget/g1/functions/rndis.usb0': File exists
  Couldn't create /config/usb_gadget/g1/functions/rndis.usb0
mkdir: can't create directory '/config/usb_gadget/g1/configs/c.1': File exists
  Couldn't create /config/usb_gadget/g1/configs/c.1
ln: /config/usb_gadget/g1/configs/c.1/rndis.usb0: File exists
  Couldn't symlink rndis.usb0
Starting unudhcpd
  Using interface rndis0
  Starting the DHCP daemon
Trying to start server with parameters: Server IP addr: 172.16.42.1:67, client IP addr: 172.16.42.2, interface: rndis0
ERROR: boot partition not found!
Trying to bind to interface: rndis0
Server started!
Received DHCP DISCOVER from client: 2a:8a:39:88:72:b8

</pre>
<p>Please ignore missing boot partition error. Last line is repeated many times, assumedly due to many attempts by NetworkManager on my PC to obtain a DHCP lease. Despite that, DHCP doesn't actually work and static IP assignment results in "no route to host" on ping, ssh and telnet attempts. I guess that packets PC -&gt; phone go through, but not phone -&gt; PC? Needs more investigation.
</p>
<p>It should also be noted that <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/blob/99438870d66a02dff1da402cf2deb9700d0a813a/device/testing/device-samsung-dream/initfs-hook.sh">this hook</a> doesn't help at all - nothing in dmesg on PC.
</p>
<h4>
<span id="DHCP_server_takes_a_lot_of_time_to_start?"></span><span class="mw-headline" id="DHCP_server_takes_a_lot_of_time_to_start.3F">DHCP server takes a lot of time to start?</span>
</h4>
<p><del>This is more of a note to self, but: if you're dumping the log to SD card by cat /tmp/init_pmOS.log &gt;&gt; /sdcard/init_pmOS.log once a second, DHCP DISCOVER entries appear after ~ 150 seconds. No idea why. Maybe they'll appear in NCM approach too?</del>
</p>
<p>Actually, it's the DHCP server that starts after ~ 150 seconds - the following block appears:
</p>
<pre>Trying to bind to interface: rndis0
Server started!
Received DHCP DISCOVER from client: 2a:8a:39:88:72:b8
Received DHCP DISCOVER from client: 2a:8a:39:88:72:b8
Received DHCP DISCOVER from client: 2a:8a:39:88:72:b8
...
</pre>
<p>PC still doesn't get a DHCP lease.
</p>
<h4><span class="mw-headline" id="Lack_of_MAC_addresses_in_ARP_table">Lack of MAC addresses in ARP table</span></h4>
<p>Both phone and PC has (incomplete) where MAC address of the other device should be.
</p>
<h4><span class="mw-headline" id="Miraculous_broken_telnet_connection">Miraculous broken telnet connection</span></h4>
<p>I'd also like to note that some time ago, somehow, I managed to get RNDIS working (not sure if DHCP or manual assignment) and was able to telnet into the device (with debug-shell hook), but pressing Return inside shell caused a disconnection. I was able to reconnect a few times without having to reboot the device or anything like that. I could type and autocomplete using Tab to poke around the initramfs, but not much more. Best thing is, I really have no idea how I achieved this - I remember that mere rebuilding of device package broke this. There was some hefty initfs-hook involved I think. I put this section here as a glimmer of hope for anyone else who might want to try working on this phone.
</p>
<p><a rel="nofollow" class="external text" href="https://matrix.to/#/!zpvMifoucHSiUsVFgl:postmarketos.org/%24JzocNBn__WKc0zPzV9Bx1QlW4iMsjYwnpNV0MWw0hwA">Here</a> is my message on #postmarketos asking for help understanding what happened. Not much luck, sadly.
</p>
<h3><span class="mw-headline" id="CDC_NCM">CDC NCM</span></h3>
<p>Here's a very rough initfs-hook that brings up NCM interface somewhat:
</p>
<pre># prevent automatic network setup
touch /tmp/_setup_usb_network

# adapted from samsung-dream, required for android0 to appear
CONFIGFS=/config/usb_gadget
mkdir $CONFIGFS/g1
mkdir $CONFIGFS/g1/functions/ncm.usb0
mkdir $CONFIGFS/g1/configs/c.1
ln -s $CONFIGFS/g1/functions/ncm.usb0 $CONFIGFS/g1/configs/c.1

# adapted from LineageOS
echo 0 &gt; /sys/class/android_usb/android0/enable
echo 0x685d &gt; $CONFIGFS/g1/idProduct
echo 0x04e8 &gt; $CONFIGFS/g1/idVendor
echo ncm &gt; /sys/class/android_usb/android0/functions
echo 2 &gt; $CONFIGFS/g1/bDeviceClass
echo "10c00000.dwc3" &gt; $CONFIGFS/g1/UDC
echo 1 &gt; /sys/class/android_usb/android0/enable
</pre>
<p>samsung-dream reference is <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/blob/4d327313e40b48bdb9ac0c6e07f0b36cc2be4ff8/device/testing/device-samsung-dream/initfs-hook.sh">this hook</a>, LineageOS reference is <a rel="nofollow" class="external text" href="https://github.com/LineageOS/android_device_samsung_universal9810-common/blob/7561e665d888d0d122932015d2dbd3e9b1eb3b0d/rootdir/etc/init.usb_accessory.rc#L87-L94">this part of init.usb_accessory.rc</a>.
</p>
<p>dmesg output on PC:
</p>
<pre>[279564.808997] usb 1-2: new high-speed USB device number 84 using xhci_hcd                                                                                                                                                                                                   
[279564.951002] usb 1-2: New USB device found, idVendor=04e8, idProduct=685d, bcdDevice= 4.09                                                                                                                                                                                 
[279564.951016] usb 1-2: New USB device strings: Mfr=0, Product=0, SerialNumber=0
[279564.976909] cdc_ncm 1-2:1.0: MAC-Address: 4a:ad:cd:07:2e:77                                                                                                                                                                                                               
[279564.977850] cdc_ncm 1-2:1.0 usb0: register 'cdc_ncm' at usb-0000:00:14.0-2, CDC NCM, 4a:ad:cd:07:2e:77
</pre>
<p>ip addr output on PC:
</p>
<pre>76: enp0s20f0u2: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc fq_codel state DOWN group default qlen 1000
    link/ether 76:70:98:24:d4:d6 brd ff:ff:ff:ff:ff:ff
</pre>
<p>Notice the NO-CARRIER. Connectivity doesn't work - ncm0 interface on phone stays down without IP (but with MAC), possibly due to DHCP server function expecting one of following: rndis0, usb0 and eth0. After patching init_functions.sh to try ncm0, apparently IP assignment fails on that interface for some reason. Needs more investigation.
</p>
<p>Disabling DHCP server in deviceinfo and adding:
</p>
<pre>ifconfig ncm0 172.42.16.1
( unudhcpd -i ncm0 -s 172.16.42.1 -c 172.16.42.2 ) &amp;
</pre>
<p>to initfs-hook causes phone to show up in dmesg on PC this way:
</p>
<pre>[281483.275024] usb 1-2: new high-speed USB device number 96 using xhci_hcd
[281483.416922] usb 1-2: New USB device found, idVendor=04e8, idProduct=685d, bcdDevice= 4.09
[281483.416936] usb 1-2: New USB device strings: Mfr=0, Product=0, SerialNumber=0
[281483.445437] cdc_ncm 1-2:1.0: MAC-Address: 56:7e:e2:2c:02:98
[281483.446893] cdc_ncm 1-2:1.0 usb0: register 'cdc_ncm' at usb-0000:00:14.0-2, CDC NCM, 56:7e:e2:2c:02:98
[281483.474033] cdc_ncm 1-2:1.0 enp0s20f0u2: renamed from usb0
[281483.599245] IPv6: ADDRCONF(NETDEV_CHANGE): enp0s20f0u2: link becomes ready
</pre>
<p>and in ip addr on PC this way:
</p>
<pre>81: enp0s20f0u2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 06:8a:54:d1:8c:ba brd ff:ff:ff:ff:ff:ff
    inet6 fe80::198c:608d:4538:79a/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
</pre>
<p>but DHCP assignment fails, <del>there are no DHCP DISCOVER entries in init_pmOS.log unlike with RNDIS,</del> and static IP assignment on PC leads to no pings, ssh, telnet, etc. just like with RNDIS above.
</p>
<p>After ~ 140 seconds some output from DHCP server suddenly appeared (just like with RNDIS), but it was a bit different:
</p>
<pre>Trying to bind to interface: ncm0
Server started!
Received DHCP DISCOVER from client: 8e:9f:b6:8e:9b:6e
Received DHCP REQUEST from client: 8e:9f:b6:8e:9b:6e
Received DHCP REQUEST from client: 8e:9f:b6:8e:9b:6e
Received DHCP REQUEST from client: 8e:9f:b6:8e:9b:6e
Received DHCP REQUEST from client: 8e:9f:b6:8e:9b:6e
Received DHCP REQUEST from client: 8e:9f:b6:8e:9b:6e
Received DHCP DISCOVER from client: 8e:9f:b6:8e:9b:6e
Received DHCP DISCOVER from client: 8e:9f:b6:8e:9b:6e
Received DHCP DISCOVER from client: 8e:9f:b6:8e:9b:6e
...
</pre>
<p>After that it took ~ 420 seconds for another batch of DISCOVERs (no REQUESTs) to appear.
</p>
<p><a href="../en/Fairphone_3_(fairphone-fp3).html" title="Fairphone 3 (fairphone-fp3)">Fairphone_3_(fairphone-fp3)</a> seems to be the only device in pmaports that uses NCM, but it didn't need any special tricks to get it running, unlike this phone.
</p>
<h3><span class="mw-headline" id="USB_OTG_with_external_NIC">USB OTG with external NIC</span></h3>
<p>I needed to enable CONFIG_USB_RTL8152 for my USB NIC. However, NIC shows up in kernel logs after ~ 30 seconds since boot, which is way past start_unudhcpd() from init_functions.sh. <del>Maybe enabling debug-shell and delaying boot in initfs-hook will help?</del>
</p>
<p><b>Yes it does.</b> Enabled debug-shell hook, added sleep 40 in initfs-hook.sh and it worked.
</p>
<ul>
<li>DHCP works</li>
<li>pings return</li>
<li>telnet works (and pressing Return doesn't result in segfaults)</li>
</ul>
<h2><span class="mw-headline" id="Display">Display</span></h2>
<h3><span class="mw-headline" id="Current_status">Current status</span></h3>
<ul>
<li>pmOS splash screen - works</li>
<li>console, fbkeyboard - screen is black, "echo 0 &gt; blank" shows splash screen, "echo 0,0 &gt; pan" and msm-fb-refresher doesn't help, <i>IIRC</i> disabling decon_release like <a rel="nofollow" class="external text" href="https://github.com/LONELY-WOLF/crownlte-linux-os/commit/5e26ce9a50556e787a5d407a78720aecb5986b60">here</a> didn't help either
<ul><li>Maybe needs CONFIG_FRAMEBUFFER_CONSOLE=y? This causes kernel panic after 6 seconds though.</li></ul>
</li>
<li>i3wm, lxqt, mate, sxmo-de-dwm, xfce4 - screen works with just msm-fb-refresher
<ul><li>I guess all X11 based UIs will work?</li></ul>
</li>
<li>weston - won't work anymore since upstream dropped the fbdev backend (<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/issues/1431">pmaports#1431</a>, <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/2950">pmaports!2950</a>) and AFAIK there is no <a href="../en/Direct_Rendering_Management.html" title="Direct Rendering Management">Direct Rendering Management</a> support in vendor kernel</li>
<li>sxmo-de-sway, sway, phosh - won't work since fbdev is <a rel="nofollow" class="external text" href="https://github.com/swaywm/wlroots/pull/2410">not supported by wlroots</a> and AFAIK there is no DRM support in vendor kernel</li>
</ul>
<h3><span class="mw-headline" id="Todo">Todo</span></h3>
<ul><li>You can refresh the screen manually with "echo 0,0 &gt; /sys/class/graphics/fb0/pan" or use msm-fb-refresher. When reading <a href="../en/Troubleshooting:display.html#Screen_does_not_refresh" title="Troubleshooting:display">Troubleshooting:display#Screen_does_not_refresh</a> I was under the impression that msm-fb-refresher wouldn't be helpful, since "cat modes &gt; mode" didn't refresh screen on this phone. Maybe this note could be added to that wiki page, if true?</li></ul>
<h2><span class="mw-headline" id="Serial_debugging">Serial debugging</span></h2>
<p>Kernel config has CONFIG_MUIC_MAX77705 enabled. Kernel code (android_kernel_samsung_universal9810/drivers/muic/max77705-muic.c) has this:
</p>
<pre>static const struct max77705_muic_vps_data muic_vps_table[] = {
	{
		.adc		= MAX77705_UIADC_523K,
		.vbvolt		= VB_LOW,
		.chgtyp		= CHGTYP_NO_VOLTAGE,
		.muic_switch	= COM_UART,
		.vps_name	= "JIG UART OFF",
		.attached_dev	= ATTACHED_DEV_JIG_UART_OFF_MUIC,
	},
	{
		.adc		= MAX77705_UIADC_523K,
		.vbvolt		= VB_HIGH,
		.chgtyp		= CHGTYP_DONTCARE,
		.muic_switch	= COM_UART,
		.vps_name	= "JIG UART OFF/VB",
		.attached_dev	= ATTACHED_DEV_JIG_UART_OFF_VB_MUIC,
	},
	{
		.adc		= MAX77705_UIADC_619K,
		.vbvolt		= VB_LOW,
		.chgtyp		= CHGTYP_NO_VOLTAGE,
		.muic_switch	= COM_UART,
		.vps_name	= "JIG UART ON",
		.attached_dev	= ATTACHED_DEV_JIG_UART_ON_MUIC,
	},
	{
		.adc		= MAX77705_UIADC_619K,
		.vbvolt		= VB_HIGH,
		.chgtyp		= CHGTYP_DONTCARE,
		.muic_switch	= COM_UART,
		.vps_name	= "JIG UART ON/VB",
		.attached_dev	= ATTACHED_DEV_JIG_UART_ON_VB_MUIC,

</pre>
<p>Perhaps a serial cable could be made? <a href="../en/Serial_debugging:Cable_schematics.html#Samsung_Galaxy_S7_and_S5" title="Serial debugging:Cable schematics">Serial_debugging:Cable_schematics#Samsung_Galaxy_S7_and_S5</a>
</p>
<h2><span class="mw-headline" id="USB_OTG">USB OTG</span></h2>
<p>Tested, works: mouse, RTL8152 based NIC, DAC (Fiio E10K).
</p>
<h3><span class="mw-headline" id="Issues">Issues</span></h3>
<ul>
<li>It seems that OTG starts working ~ 30 seconds after boot.</li>
<li>If phone was rebooted due to kernel panic, OTG <b>adapter</b> needs to be reconnected.</li>
<li>Xfce battery status icon shows battery as charging whenever OTG adapter is plugged in.</li>
</ul>
<h2><span class="mw-headline" id="Battery">Battery</span></h2>
<p>Charge level reporting and charging works on Xfce, using either wired or wireless charger.
</p>
<p>charging-sdl has been disabled in postmarketos-mkinitfs (<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/issues/1064">pmaports#1064</a>, <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/2111">pmaports!2111</a>). I tried doing <a href="../en/Charging-sdl.html#Charge_mode_not_detected" title="Charging-sdl">Charging-sdl#Charge mode not detected</a>, but couldn't get the modified init_functions.sh to appear in initramfs flashed to device.
</p>
<p>diff between kernel cmdline when booted into TWRP by button press and when booted into pmOS by charger:
</p>
<pre>$ diff cmdline_twrp cmdline_charger
41,42c41,42
&lt; sec_debug.reset_reason=9
&lt; sec_reset.reset_reason=9
---
&gt; sec_debug.reset_reason=7
&gt; sec_reset.reset_reason=7
44c44
&lt; sec_debug.pwronsrc=0x1
---
&gt; sec_debug.pwronsrc=0x4
</pre>
<p>When booted by charger, touch screen, stylus and USB OTG doesn't work.
</p>
<h2><span class="mw-headline" id="Audio">Audio</span></h2>
<p>So far broken. Without firmware there's only Star-Madera output device available.
</p>
<p>samsung-abox complains in dmesg about lack of following firmware: AP_AUDIO_SLSI.bin APBargeIn_AUDIO_SLSI.bin APBiBF_AUDIO_SLSI.bin APDV_AUDIO_SLSI.bin calliope_dram.bin calliope_iva.bin calliope_sram.bin dsm.bin dsm_tune.bin SoundBoosterParam.bin, all from /vendor/firmware. I've also patched /drivers/base/firmware_class.c to include /lib/firmware/postmarketos in fw_path.
</p>
<p>abox_rdma output device appears in Xfce volume control once firmware is loaded (which sometimes happens automatically after a few minutes). Manual restart of PulseAudio (killall pulseaudio) sometimes forces firmware to be loaded, sometimes it fails with e.g. <code>samsung-abox-rdma 17c51000.abox_rdma: ASoC: can't open platform 17c51000.abox_rdma: -16
</code> or <code>samsung-abox 17c50000.abox: Invalid calliope state: 0</code> in dmesg. Once it works, killing PulseAudio one more time causes a kernel panic. One time I've had the kernel panic after opening Xfce audio mixer while Xfce audio widget already had abox_rdma on output list.
</p>
<p>There's /etc/SoundBoosterParam.txt in vendor partition, but I'm not sure if it's important.
</p>
<h2><span class="mw-headline" id="Bluetooth">Bluetooth</span></h2>
<p>By default soft blocked in rfkill. Unblocking it and restarting bluetoothd doesn't fix <code>No default controller available</code> in bluetoothctl.
</p>
<h2><span class="mw-headline" id="Unixbench">Unixbench</span></h2>
<pre>========================================================================
   BYTE UNIX Benchmarks (Version 5.1.3)

   System: samsung-crownlte: Linux
   OS: Linux -- 4.9.218 -- #2-postmarketOS SMP PREEMPT Wed Mar 2 17:43:34 UTC 2022
   Machine: aarch64 (unknown)
   Language: en_US.utf8 (charmap=, collate=)
   11:42:14 up 16 min,  0 users,  load average: 13.10, 12.52, 8.48; runlevel 

------------------------------------------------------------------------
Benchmark Run: Fri Mar 04 2022 11:42:14 - 11:47:03
8 CPUs in system; running 1 parallel copy of tests

Dhrystone 2 using register variables       15519098.8 lps   (10.0 s, 7 samples)
Double-Precision Whetstone                     4379.0 MWIPS (10.1 s, 7 samples)

System Benchmarks Partial Index              BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0   15519098.8   1329.8
Double-Precision Whetstone                       55.0       4379.0    796.2
                                                                   ========
System Benchmarks Index Score (Partial Only)                         1029.0

------------------------------------------------------------------------
Benchmark Run: Fri Mar 04 2022 11:47:03 - 11:51:58
8 CPUs in system; running 8 parallel copies of tests

Dhrystone 2 using register variables       85154028.8 lps   (10.0 s, 7 samples)
Double-Precision Whetstone                    27623.8 MWIPS (9.8 s, 7 samples)

System Benchmarks Partial Index              BASELINE       RESULT    INDEX
Dhrystone 2 using register variables         116700.0   85154028.8   7296.8
Double-Precision Whetstone                       55.0      27623.8   5022.5
                                                                   ========
System Benchmarks Index Score (Partial Only)                         6053.8
</pre>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/tree/master/device/testing/device-samsung-crownlte">Device package</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/tree/master/device/testing/linux-samsung-crownlte">Kernel package</a></li>
<li><a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/tree/master/device/testing/firmware-samsung-crownlte">Firmware package</a></li>
<li>Another kernel port with plenty of working features (including USB networking): <a rel="nofollow" class="external text" href="https://forum.xda-developers.com/t/linux-porting-native-linux-to-galaxy-note9.3936077/">XDA thread</a>, <a rel="nofollow" class="external text" href="https://github.com/LONELY-WOLF/crownlte-linux-os/commits">GitHub repo</a>
</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/1699">pmaports!1699</a> - samsung-dream2lte MR, has USB networking discussion</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/1725">pmaports!1725</a> - Combined samsung-dream MR</li>
<li>
<a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/1843">pmaports!1843</a> - samsung-dream color order fix and different networking setup in initfs-hook.sh (the one that also works for crownlte)</li>
</ul>

</div></div>
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Devices.html" title="Category:Devices">Devices</a></li></ul>
</div></div>
		<div class="visualClear"></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=Samsung_Galaxy_Note_9_(Exynos)_(samsung-crownlte)&amp;oldid=27530">https://wiki.postmarketos.org/index.php?title=Samsung_Galaxy_Note_9_(Exynos)_(samsung-crownlte)&amp;oldid=27530</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 6 May 2022, at 14:19.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../en/About_postmarketOS.html" class="mw-redirect" title="PostmarketOS:About">About postmarketOS</a></li>
								<li id="footer-places-disclaimer"><a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-mobileview"><a href="https://wiki.postmarketos.org/index.php?title=Samsung_Galaxy_Note_9_(Exynos)_(samsung-crownlte)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"></a>					</li>
										<li id="footer-poweredbyico">
						<a href="https://www.mediawiki.org/"><img src="../poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="" width="88" height="31"></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		

</body>
</html>
