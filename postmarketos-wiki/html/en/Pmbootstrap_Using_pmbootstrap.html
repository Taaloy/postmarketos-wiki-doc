<!DOCTYPE html>
<html class="client-nojs vector-feature-language-in-header-enabled vector-feature-language-in-main-page-header-disabled vector-feature-sticky-header-disabled vector-feature-page-tools-pinned-disabled vector-feature-toc-pinned-clientpref-1 vector-feature-main-menu-pinned-disabled vector-feature-limited-width-clientpref-1 vector-feature-limited-width-content-enabled vector-feature-custom-font-size-clientpref-0 vector-feature-appearance-pinned-clientpref-1 vector-feature-night-mode-disabled skin-theme-clientpref-day vector-toc-available" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>pmbootstrap/Using pmbootstrap - postmarketOS Wiki</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.43.1">
<meta name="robots" content="max-image-preview:standard">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=0.25, maximum-scale=5.0">
<link rel="search" type="application/opensearchdescription+xml" href="/rest.php/v1/search" title="postmarketOS Wiki (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Wiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="skin--responsive skin-vector skin-vector-search-vue mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Pmbootstrap_Using_pmbootstrap rootpage-Pmbootstrap_Using_pmbootstrap skin-vector-2022 action-view">
<a class="mw-jump-link" href="#bodyContent">Jump to content</a>
<div class="vector-header-container">
	<header class="vector-header mw-header">
		<div class="vector-header-start">
			<nav class="vector-main-menu-landmark" aria-label="Site">
				
<div id="vector-main-menu-dropdown" class="vector-dropdown vector-main-menu-dropdown vector-button-flush-left vector-button-flush-right">
	<input type="checkbox" id="vector-main-menu-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-main-menu-dropdown" class="vector-dropdown-checkbox " aria-label="Main menu">
	<label id="vector-main-menu-dropdown-label" for="vector-main-menu-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-menu mw-ui-icon-wikimedia-menu"></span>

<span class="vector-dropdown-label-text">Main menu</span>
	</label>
	<div class="vector-dropdown-content">


				<div id="vector-main-menu-unpinned-container" class="vector-unpinned-container">
		
<div id="vector-main-menu" class="vector-main-menu vector-pinnable-element">
	<div class="vector-pinnable-header vector-main-menu-pinnable-header vector-pinnable-header-unpinned" data-feature-name="main-menu-pinned" data-pinnable-element-id="vector-main-menu" data-pinned-container-id="vector-main-menu-pinned-container" data-unpinned-container-id="vector-main-menu-unpinned-container">
	<div class="vector-pinnable-header-label">Main menu</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-main-menu.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-main-menu.unpin">hide</button>
</div>

	
<div id="p-navigation" class="vector-menu mw-portlet mw-portlet-navigation">
	<div class="vector-menu-heading">
		Navigation
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-mainpage-description" class="mw-list-item"><a href="../en/Main_Page.html" title="Visit the main page [z]" accesskey="z"><span>Main page</span></a></li>
<li id="n-Devices" class="mw-list-item"><a href="../en/Devices.html"><span>Devices</span></a></li>
		</ul>
		
	</div>
</div>

	
	
</div>

				</div>

	</div>
</div>

		</nav>
			
<a href="../en/Main_Page.html" class="mw-logo">
	<img class="mw-logo-icon" src="/logo_50x50.svg" alt="" aria-hidden="true" height="50" width="50">
	<span class="mw-logo-container skin-invert">
		<strong class="mw-logo-wordmark">postmarketOS Wiki</strong>
	</span>
</a>

		</div>
		<div class="vector-header-end">
			
<div id="p-search" role="search" class="vector-search-box-vue  vector-search-box-collapses vector-search-box-show-thumbnail vector-search-box-auto-expand-width vector-search-box">
	<a href="../Special:Search.html" class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only search-toggle" title="Search postmarketOS Wiki [f]" accesskey="f"><span class="vector-icon mw-ui-icon-search mw-ui-icon-wikimedia-search"></span>

<span>Search</span>
	</a>
	<div class="vector-typeahead-search-container">
		<div class="cdx-typeahead-search cdx-typeahead-search--show-thumbnail cdx-typeahead-search--auto-expand-width">
			<form action="/index.php" id="searchform" class="cdx-search-input cdx-search-input--has-end-button">
				<div id="simpleSearch" class="cdx-search-input__input-wrapper" data-search-loc="header-moved">
					<div class="cdx-text-input cdx-text-input--has-start-icon">
						<input class="cdx-text-input__input" type="search" name="search" placeholder="Search postmarketOS Wiki" aria-label="Search postmarketOS Wiki" autocapitalize="sentences" title="Search postmarketOS Wiki [f]" accesskey="f" id="searchInput">
						<span class="cdx-text-input__icon cdx-text-input__start-icon"></span>
					</div>
					<input type="hidden" name="title" value="Special:Search">
				</div>
				<button class="cdx-button cdx-search-input__end-button">Search</button>
			</form>
		</div>
	</div>
</div>

			<nav class="vector-user-links vector-user-links-wide" aria-label="Personal tools">
	<div class="vector-user-links-main">
	
<div id="p-vector-user-menu-preferences" class="vector-menu mw-portlet emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

	
<div id="p-vector-user-menu-userpage" class="vector-menu mw-portlet emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

	<nav class="vector-appearance-landmark" aria-label="Appearance">
		
<div id="vector-appearance-dropdown" class="vector-dropdown " title="Change the appearance of the page's font size, width, and color">
	<input type="checkbox" id="vector-appearance-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-appearance-dropdown" class="vector-dropdown-checkbox " aria-label="Appearance">
	<label id="vector-appearance-dropdown-label" for="vector-appearance-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-appearance mw-ui-icon-wikimedia-appearance"></span>

<span class="vector-dropdown-label-text">Appearance</span>
	</label>
	<div class="vector-dropdown-content">


			<div id="vector-appearance-unpinned-container" class="vector-unpinned-container">
				
			</div>
		
	</div>
</div>

	</nav>
	
<div id="p-vector-user-menu-notifications" class="vector-menu mw-portlet emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

	
<div id="p-vector-user-menu-overflow" class="vector-menu mw-portlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			<li id="pt-login-2" class="user-links-collapsible-item mw-list-item user-links-collapsible-item">
<a data-mw="interface" href="/index.php?title=Special:UserLogin&amp;returnto=Pmbootstrap%2FUsing+pmbootstrap" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o" class=""><span>Log in</span></a>
</li>
<li id="pt-createaccount-2" class="user-links-collapsible-item mw-list-item user-links-collapsible-item">
<a data-mw="interface" href="../Special:RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory" class=""><span>Request account</span></a>
</li>

			
		</ul>
		
	</div>
</div>

	</div>
	
<div id="vector-user-links-dropdown" class="vector-dropdown vector-user-menu vector-button-flush-right vector-user-menu-logged-out user-links-collapsible-item" title="More options">
	<input type="checkbox" id="vector-user-links-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-user-links-dropdown" class="vector-dropdown-checkbox " aria-label="Personal tools">
	<label id="vector-user-links-dropdown-label" for="vector-user-links-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-ellipsis mw-ui-icon-wikimedia-ellipsis"></span>

<span class="vector-dropdown-label-text">Personal tools</span>
	</label>
	<div class="vector-dropdown-content">


		
<div id="p-personal" class="vector-menu mw-portlet mw-portlet-personal user-links-collapsible-item" title="User menu">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="pt-login" class="user-links-collapsible-item mw-list-item"><a href="/index.php?title=Special:UserLogin&amp;returnto=Pmbootstrap%2FUsing+pmbootstrap" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o"><span class="vector-icon mw-ui-icon-logIn mw-ui-icon-wikimedia-logIn"></span> <span>Log in</span></a></li>
<li id="pt-createaccount" class="user-links-collapsible-item mw-list-item"><a href="../Special:RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory"><span>Request account</span></a></li>
		</ul>
		
	</div>
</div>

	
	</div>
</div>

</nav>

		</div>
	</header>
</div>
<div class="mw-page-container">
	<div class="mw-page-container-inner">
		<div class="vector-sitenotice-container">
			<div id="siteNotice"></div>
		</div>
		<div class="vector-column-start">
			<div class="vector-main-menu-container">
		</div>
	<div class="vector-sticky-pinned-container">
				<nav id="mw-panel-toc" aria-label="Contents" data-event-name="ui.sidebar-toc" class="mw-table-of-contents-container vector-toc-landmark">
					<div id="vector-toc-pinned-container" class="vector-pinned-container">
					<div id="vector-toc" class="vector-toc vector-pinnable-element">
	<div class="vector-pinnable-header vector-toc-pinnable-header vector-pinnable-header-pinned" data-feature-name="toc-pinned" data-pinnable-element-id="vector-toc">
	<h2 class="vector-pinnable-header-label">Contents</h2>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-toc.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-toc.unpin">hide</button>
</div>


	<ul class="vector-toc-contents" id="mw-panel-toc-list">
		<li id="toc-mw-content-text" class="vector-toc-list-item vector-toc-level-1">
			<a href="#" class="vector-toc-link">
				<div class="vector-toc-text">Beginning</div>
			</a>
		</li>
		<li id="toc-Initialization" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Initialization">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">1</span>
				<span>Initialization</span>
			</div>
		</a>
		
		<ul id="toc-Initialization-sublist" class="vector-toc-list">
		</ul>
	</li>
	<li id="toc-Installing_postmarketOS" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Installing_postmarketOS">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">2</span>
				<span>Installing postmarketOS</span>
			</div>
		</a>
		
			<button aria-controls="toc-Installing_postmarketOS-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Installing postmarketOS subsection</span>
			</button>
		
		<ul id="toc-Installing_postmarketOS-sublist" class="vector-toc-list">
			<li id="toc-pmbootstrap_install" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#pmbootstrap_install">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1</span>
					<span>pmbootstrap install</span>
				</div>
			</a>
			
			<ul id="toc-pmbootstrap_install-sublist" class="vector-toc-list">
				<li id="toc-SD_card" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#SD_card">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.1</span>
					<span>SD card</span>
				</div>
			</a>
			
			<ul id="toc-SD_card-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Encrypted_Image_file" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Encrypted_Image_file">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.2</span>
					<span>Encrypted Image file</span>
				</div>
			</a>
			
			<ul id="toc-Encrypted_Image_file-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Android_recovery_zip" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Android_recovery_zip">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.1.3</span>
					<span>Android recovery zip</span>
				</div>
			</a>
			
			<ul id="toc-Android_recovery_zip-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-pmbootstrap_flasher" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#pmbootstrap_flasher">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2</span>
					<span>pmbootstrap flasher</span>
				</div>
			</a>
			
			<ul id="toc-pmbootstrap_flasher-sublist" class="vector-toc-list">
				<li id="toc-flash_rootfs" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#flash_rootfs">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.1</span>
					<span>flash_rootfs</span>
				</div>
			</a>
			
			<ul id="toc-flash_rootfs-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-flash_kernel" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#flash_kernel">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.2.2</span>
					<span>flash_kernel</span>
				</div>
			</a>
			
			<ul id="toc-flash_kernel-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Inspecting_generated_files" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Inspecting_generated_files">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">2.3</span>
					<span>Inspecting generated files</span>
				</div>
			</a>
			
			<ul id="toc-Inspecting_generated_files-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
	<li id="toc-Development_actions" class="vector-toc-list-item vector-toc-level-1 vector-toc-list-item-expanded">
		<a class="vector-toc-link" href="#Development_actions">
			<div class="vector-toc-text">
				<span class="vector-toc-numb">3</span>
				<span>Development actions</span>
			</div>
		</a>
		
			<button aria-controls="toc-Development_actions-sublist" class="cdx-button cdx-button--weight-quiet cdx-button--icon-only vector-toc-toggle">
				<span class="vector-icon mw-ui-icon-wikimedia-expand"></span>
				<span>Toggle Development actions subsection</span>
			</button>
		
		<ul id="toc-Development_actions-sublist" class="vector-toc-list">
			<li id="toc-Building_packages" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Building_packages">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1</span>
					<span>Building packages</span>
				</div>
			</a>
			
			<ul id="toc-Building_packages-sublist" class="vector-toc-list">
				<li id="toc-Entering_chroots" class="vector-toc-list-item vector-toc-level-3">
			<a class="vector-toc-link" href="#Entering_chroots">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.1.1</span>
					<span>Entering chroots</span>
				</div>
			</a>
			
			<ul id="toc-Entering_chroots-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
		</li>
		<li id="toc-Running_CI_scripts_locally" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Running_CI_scripts_locally">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.2</span>
					<span>Running CI scripts locally</span>
				</div>
			</a>
			
			<ul id="toc-Running_CI_scripts_locally-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Device_porting_assistance" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Device_porting_assistance">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.3</span>
					<span>Device porting assistance</span>
				</div>
			</a>
			
			<ul id="toc-Device_porting_assistance-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Repository_maintenance" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Repository_maintenance">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.4</span>
					<span>Repository maintenance</span>
				</div>
			</a>
			
			<ul id="toc-Repository_maintenance-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Logging" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Logging">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.5</span>
					<span>Logging</span>
				</div>
			</a>
			
			<ul id="toc-Logging-sublist" class="vector-toc-list">
			</ul>
		</li>
		<li id="toc-Clean_up" class="vector-toc-list-item vector-toc-level-2">
			<a class="vector-toc-link" href="#Clean_up">
				<div class="vector-toc-text">
					<span class="vector-toc-numb">3.6</span>
					<span>Clean up</span>
				</div>
			</a>
			
			<ul id="toc-Clean_up-sublist" class="vector-toc-list">
			</ul>
		</li>
	</ul>
	</li>
</ul>
</div>

					</div>
		</nav>
			</div>
		</div>
		<div class="mw-content-container">
			<main id="content" class="mw-body" style="margin: 0">
				<header class="mw-body-header vector-page-titlebar">
					<nav aria-label="Contents" class="vector-toc-landmark">
						
<div id="vector-page-titlebar-toc" class="vector-dropdown vector-page-titlebar-toc vector-button-flush-left">
	<input type="checkbox" id="vector-page-titlebar-toc-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-titlebar-toc" class="vector-dropdown-checkbox " aria-label="Toggle the table of contents">
	<label id="vector-page-titlebar-toc-label" for="vector-page-titlebar-toc-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet cdx-button--icon-only " aria-hidden="true"><span class="vector-icon mw-ui-icon-listBullet mw-ui-icon-wikimedia-listBullet"></span>

<span class="vector-dropdown-label-text">Toggle the table of contents</span>
	</label>
	<div class="vector-dropdown-content">


							<div id="vector-page-titlebar-toc-unpinned-container" class="vector-unpinned-container">
			</div>
		
	</div>
</div>

					</nav>
					<h1 id="firstHeading" class="firstHeading mw-first-heading">pmbootstrap/Using pmbootstrap</h1>
				</header>
				<div class="vector-page-toolbar">
					<div class="vector-page-toolbar-container">
						<div id="left-navigation">
							<nav aria-label="Namespaces">
								
<div id="p-associated-pages" class="vector-menu vector-menu-tabs mw-portlet mw-portlet-associated-pages">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-nstab-main" class="selected vector-tab-noicon mw-list-item"><a href="../en/Pmbootstrap_Using_pmbootstrap.html" title="View the content page [c]" accesskey="c"><span>Page</span></a></li>
<li id="ca-talk" class="new vector-tab-noicon mw-list-item"><a href="/index.php?title=Talk:Pmbootstrap/Using_pmbootstrap&amp;action=edit&amp;redlink=1" rel="discussion" class="new" title="Discussion about the content page (page does not exist) [t]" accesskey="t"><span>Discussion</span></a></li>
		</ul>
		
	</div>
</div>

								
<div id="vector-variants-dropdown" class="vector-dropdown emptyPortlet">
	<input type="checkbox" id="vector-variants-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-variants-dropdown" class="vector-dropdown-checkbox " aria-label="Change language variant">
	<label id="vector-variants-dropdown-label" for="vector-variants-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet" aria-hidden="true"><span class="vector-dropdown-label-text">English</span>
	</label>
	<div class="vector-dropdown-content">


					
<div id="p-variants" class="vector-menu mw-portlet mw-portlet-variants emptyPortlet">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			
		</ul>
		
	</div>
</div>

				
	</div>
</div>

							</nav>
						</div>
						<div id="right-navigation" class="vector-collapsible">
							<nav aria-label="Views">
								
<div id="p-views" class="vector-menu vector-menu-tabs mw-portlet mw-portlet-views">
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-view" class="selected vector-tab-noicon mw-list-item"><a href="../en/Pmbootstrap_Using_pmbootstrap.html"><span>Read</span></a></li>
<li id="ca-viewsource" class="vector-tab-noicon mw-list-item"><a href="/index.php?title=Pmbootstrap/Using_pmbootstrap&amp;action=edit" title="This page is protected.
You can view its source [e]" accesskey="e"><span>View source</span></a></li>
<li id="ca-history" class="vector-tab-noicon mw-list-item"><a href="/index.php?title=Pmbootstrap/Using_pmbootstrap&amp;action=history" title="Past revisions of this page [h]" accesskey="h"><span>View history</span></a></li>
		</ul>
		
	</div>
</div>

							</nav>
				
							<nav class="vector-page-tools-landmark" aria-label="Page tools">
								
<div id="vector-page-tools-dropdown" class="vector-dropdown vector-page-tools-dropdown">
	<input type="checkbox" id="vector-page-tools-dropdown-checkbox" role="button" aria-haspopup="true" data-event-name="ui.dropdown-vector-page-tools-dropdown" class="vector-dropdown-checkbox " aria-label="Tools">
	<label id="vector-page-tools-dropdown-label" for="vector-page-tools-dropdown-checkbox" class="vector-dropdown-label cdx-button cdx-button--fake-button cdx-button--fake-button--enabled cdx-button--weight-quiet" aria-hidden="true"><span class="vector-dropdown-label-text">Tools</span>
	</label>
	<div class="vector-dropdown-content">


									<div id="vector-page-tools-unpinned-container" class="vector-unpinned-container">
						
<div id="vector-page-tools" class="vector-page-tools vector-pinnable-element">
	<div class="vector-pinnable-header vector-page-tools-pinnable-header vector-pinnable-header-unpinned" data-feature-name="page-tools-pinned" data-pinnable-element-id="vector-page-tools" data-pinned-container-id="vector-page-tools-pinned-container" data-unpinned-container-id="vector-page-tools-unpinned-container">
	<div class="vector-pinnable-header-label">Tools</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-page-tools.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-page-tools.unpin">hide</button>
</div>

	
<div id="p-cactions" class="vector-menu mw-portlet mw-portlet-cactions vector-has-collapsible-items" title="More options">
	<div class="vector-menu-heading">
		Actions
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="ca-more-view" class="selected vector-more-collapsible-item mw-list-item"><a href="../en/Pmbootstrap_Using_pmbootstrap.html"><span>Read</span></a></li>
<li id="ca-more-viewsource" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Pmbootstrap/Using_pmbootstrap&amp;action=edit"><span>View source</span></a></li>
<li id="ca-more-history" class="vector-more-collapsible-item mw-list-item"><a href="/index.php?title=Pmbootstrap/Using_pmbootstrap&amp;action=history"><span>View history</span></a></li>
<li id="ca-cargo-purge" class="mw-list-item"><a href="/index.php?title=Pmbootstrap/Using_pmbootstrap&amp;action=purge"><span>Purge cache</span></a></li>
		</ul>
		
	</div>
</div>

<div id="p-tb" class="vector-menu mw-portlet mw-portlet-tb">
	<div class="vector-menu-heading">
		General
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="t-whatlinkshere" class="mw-list-item"><a href="../Special:WhatLinksHere_Pmbootstrap_Using_pmbootstrap.html" title="A list of all wiki pages that link here [j]" accesskey="j"><span>What links here</span></a></li>
<li id="t-recentchangeslinked" class="mw-list-item"><a href="../Special:RecentChangesLinked_Pmbootstrap_Using_pmbootstrap.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k"><span>Related changes</span></a></li>
<li id="t-specialpages" class="mw-list-item"><a href="../Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q"><span>Special pages</span></a></li>
<li id="t-print" class="mw-list-item"><a href="javascript:print();" rel="alternate" title="Printable version of this page [p]" accesskey="p"><span>Printable version</span></a></li>
<li id="t-permalink" class="mw-list-item"><a href="/index.php?title=Pmbootstrap/Using_pmbootstrap&amp;oldid=75156" title="Permanent link to this revision of this page"><span>Permanent link</span></a></li>
<li id="t-info" class="mw-list-item"><a href="/index.php?title=Pmbootstrap/Using_pmbootstrap&amp;action=info" title="More information about this page"><span>Page information</span></a></li>
<li id="t-cargopagevalueslink" class="mw-list-item"><a href="/index.php?title=Pmbootstrap/Using_pmbootstrap&amp;action=pagevalues" rel="cargo-pagevalues"><span>Cargo data</span></a></li>
		</ul>
		
	</div>
</div>

<div id="p-The_usual_wiki_links" class="vector-menu mw-portlet mw-portlet-The_usual_wiki_links">
	<div class="vector-menu-heading">
		The usual wiki links
	</div>
	<div class="vector-menu-content">
		
		<ul class="vector-menu-content-list">
			
			<li id="n-Editor's-Guide" class="mw-list-item"><a href="../en/Help:Wiki_editor's_guide.html"><span>Editor's Guide</span></a></li>
<li id="n-recentchanges" class="mw-list-item"><a href="../Special:RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r"><span>Recent changes</span></a></li>
<li id="n-randompage" class="mw-list-item"><a href="../Special:Random.html" title="Load a random page [x]" accesskey="x"><span>Random page</span></a></li>
<li id="n-Templates" class="mw-list-item"><a href="../en/PostmarketOS:Templates.html"><span>Templates</span></a></li>
		</ul>
		
	</div>
</div>

</div>

									</div>
				
	</div>
</div>

							</nav>
						</div>
					</div>
				</div>
				<div class="vector-column-end">
					<div class="vector-sticky-pinned-container">
						<nav class="vector-page-tools-landmark" aria-label="Page tools">
							<div id="vector-page-tools-pinned-container" class="vector-pinned-container">
				
							</div>
		</nav>
						<nav class="vector-appearance-landmark" aria-label="Appearance">
							<div id="vector-appearance-pinned-container" class="vector-pinned-container">
				<div id="vector-appearance" class="vector-appearance vector-pinnable-element">
	<div class="vector-pinnable-header vector-appearance-pinnable-header vector-pinnable-header-pinned" data-feature-name="appearance-pinned" data-pinnable-element-id="vector-appearance" data-pinned-container-id="vector-appearance-pinned-container" data-unpinned-container-id="vector-appearance-unpinned-container">
	<div class="vector-pinnable-header-label">Appearance</div>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-pin-button" data-event-name="pinnable-header.vector-appearance.pin">move to sidebar</button>
	<button class="vector-pinnable-header-toggle-button vector-pinnable-header-unpin-button" data-event-name="pinnable-header.vector-appearance.unpin">hide</button>
</div>


</div>

							</div>
		</nav>
					</div>
				</div>
				<div id="bodyContent" class="vector-body" aria-labelledby="firstHeading" data-mw-ve-target-container>
					<div class="vector-body-before-content">
							<div class="mw-indicators">
		</div>

						<div id="siteSub" class="noprint">From postmarketOS Wiki</div>
					</div>
					<div id="contentSub"><div id="mw-content-subtitle"></div></div>
					
					
					<div id="mw-content-text" class="mw-body-content">
<div class="mw-content-ltr mw-parser-output" lang="en" dir="ltr">
<div class="navigation" style="text-align:center;">
<span typeof="mw:File"><a href="../en/Pmbootstrap.html" title="Pmbootstrap"><img src="../Icon-numix-light-media-playback-start-rtl-symbolic.svg" decoding="async" width="25" height="25" class="mw-file-element"></a></span> <a href="../en/Pmbootstrap.html" title="Pmbootstrap">pmbootstrap</a>
</div>
<div class="navigation" style="text-align:center;">
<span typeof="mw:File"><a href="../en/Pmbootstrap_Installation.html" title="Pmbootstrap/Installation"><img src="../Icon-numix-light-media-playback-start-rtl-symbolic.svg" decoding="async" width="25" height="25" class="mw-file-element"></a></span> <a href="../en/Pmbootstrap_Installation.html" title="Pmbootstrap/Installation">Installation</a>
  | <a href="../en/Pmbootstrap_Troubleshooting.html" title="Pmbootstrap/Troubleshooting">Troubleshooting</a> <span typeof="mw:File"><a href="../en/Pmbootstrap_Troubleshooting.html" title="Pmbootstrap/Troubleshooting"><img src="../Icon-numix-light-media-playback-start-symbolic.svg" decoding="async" width="25" height="25" class="mw-file-element"></a></span>
</div>
<p>Frequent users may want to set up <a href="../en/Pmbootstrap_Tab_Completion.html" class="mw-redirect" title="Pmbootstrap: Tab Completion">tab completion</a> at this point, to be able to automatically complete your pmbootstrap commands and arguments with the tab key while writing them.
</p>
<meta property="mw:PageProp/toc">
<h2><span class="mw-headline" id="Initialization">Initialization</span></h2>
<span style="display:block; height: 40px; float: left;"><figure class="mw-halign-left" typeof="mw:File"><a href="../Material-design-icons-build.svg" class="mw-file-description"><img src="../Material-design-icons-build.svg" decoding="async" width="32" height="32" class="mw-file-element"></a><figcaption></figcaption></figure><a href="../en/Porting_to_a_new_device_Initialization.html" title="Porting to a new device/Initialization"><span style="border: 1px solid lightgray; background: #f8f8f8; padding: 5px; width:200px; height: 20px; line-height: 20px; display: inline-block; margin-left: 5px;">Initialization</span></a></span><p><span style="clear:left; display: block"></span>
</p>
<h2><span class="mw-headline" id="Installing_postmarketOS">Installing postmarketOS</span></h2>
<table role="text container" class="box-todo" style="color: inherit; background-color: #fdd1d1; border: 1px solid #b60000; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center; line-height: 1;"><span style="white-space: nowrap;"><span typeof="mw:File"><span title="TODO"><img alt="TODO" src="../Red_warning_icon.svg" decoding="async" width="20" height="20" class="mw-file-element"></span></span></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">
<b>TODO:</b> Merge with <a href="../en/Porting_to_a_new_device.html" title="Porting to a new device">Porting to a new device</a>.</td>
</tr></tbody></table>
<p>Depending on the device, the installation instructions may be quite different. You might need to unlock or flash a bootloader before continuing here, or you may need to use a specific install command. Make sure you read the installation section of your <a href="../en/Devices.html" title="Devices">device's wiki page</a> first.
</p>
<p>All device ports have in common that they run some form of the <code>pmbootstrap install</code> command at one point. It will build a chroot with the full installation as it will be placed on the device, copy it to an image file or write it directly to an SD card and ask you for the user and encryption password. Below are the most commonly used <code>pmbootstrap install</code> commands.
</p>
<p>All examples have <code>--fde</code> added to enable Full Disk Encryption. Omit it if you don't want to encrypt your device or if your device port isn't able to show the FDE prompt yet (see FDE column of the <a href="../en/All_devices.html" title="All devices">all devices</a> table).
</p>
<p>Find all available arguments (such as ones for choosing different filesystems etc.) with <code>pmbootstrap install --help</code>.
</p>
<h3><span class="mw-headline" id="pmbootstrap_install">pmbootstrap install</span></h3>
<h4><span class="mw-headline" id="SD_card">SD card</span></h4>
<p>Devices like the PinePhone, Samsung Galaxy S II, Nokia N900, various laptops etc. boot from an SD card, USB stick or other external storage. Find the name with <code>lsblk</code> first and <b>make sure it is the right one as you will overwrite everything on it.</b> Use a path without partition number at the end, such as <code>/dev/mmcblk0</code>.
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>install<span class="w"> </span>--sdcard<span class="o">=</span>/dev/mmcblk...<span class="w"> </span>--fde
</pre></div>
<p>If your device is able to boot from SD card without flashing anything (such as the PinePhone), you should now be able to insert it into your device and boot it up. You are done with installing postmarketOS, congratulations!
</p>
<p>To make Androids like the Samsung Galaxy S II boot from SD card, you will need to flash a boot.img file to the internal storage. Read on at <a href="#flash_kernel">#flash_kernel</a>.
</p>
<h4><span class="mw-headline" id="Encrypted_Image_file">Encrypted Image file</span></h4>
<p>Most Androids, the Librem 5 and other devices need to have an image file generated, that will then be flashed to the device while it is in a special flashing mode. To generate such an image, run:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>install<span class="w"> </span>--fde
</pre></div>
<p>Then read on at <a href="#pmbootstrap_flasher">#pmbootstrap flasher</a>.
</p>
<h4><span class="mw-headline" id="Android_recovery_zip">Android recovery zip</span></h4>
<p>A less reliable, but for some devices required method is using the Android recovery zip. The <a href="../en/Installation_from_recovery_mode.html" title="Installation from recovery mode">Installation from recovery mode</a> article explains how to generate the zip file and how to flash it.
</p>
<h3><span class="mw-headline" id="pmbootstrap_flasher">pmbootstrap flasher</span></h3>
<p>This action wraps various flash programs (e.g. fastboot and heimdall) with a common syntax, and automatically fills out the paths to the files generated earlier during <code>pmbootstrap install</code>. Bring your phone into the flashing mode, typically by holding a special button combination such as <span class="nowrap button-tmpl" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Power</span> + <span class="nowrap button-tmpl" title="This is not a clickable button; it illustrates the button one should find." style="padding:.2em .6em; border:1px solid; border-color:#AAA #555 #555 #AAA; border-radius: 3px; background-color: #F2F2F2;">Volume Down</span> while booting up. This should be described in your <a href="../en/Devices.html" title="Devices">device's wiki page</a>.
</p>
<p>If you specify partition names below, note that they are case sensitive. If flashing onto a Samsung device, you can use <code>heimdall print-pit</code> to verify the names.
</p>
<h4><span class="mw-headline" id="flash_rootfs">flash_rootfs</span></h4>
<table role="text container" class="box-warning" style="color: inherit; background-color: #fee7e6; border: 1px solid #d33; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center; line-height: 1;"><span style="white-space: nowrap;"><span typeof="mw:File"><span title="Warning"><img alt="Warning" src="../Red_warning_icon.svg" decoding="async" width="20" height="20" class="mw-file-element"></span></span></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">
<b>WARNING:</b> Doing this will ERASE ALL DATA on your device. Please backup all your personal data before continuing!</td>
</tr></tbody></table>
<p>Flash the rootfs to internal storage. You will need to do this, unless you plan to boot the rootfs from elsewhere, such as from SD card. <b>Beware that this will overwrite the existing installation/data on your phone!</b>
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>flasher<span class="w"> </span>flash_rootfs
</pre></div>
<p>For Androids, we don't change the partition layout. If the default partition (typically "system") is too small for the generated image, it is possible to flash to another partition. Just be sure to erase any previous installations of postmarketOS in other partitions, because the init script will start with the first one that it encounters. (To delete a previous version either use <code>fastboot format system</code> for fastboot compatible devices, or simply install the known working OS, e.g. Android, on it. And if you really know what you are doing, you might consider using <code>dd</code>). Using multiple partitions with LVM is planned (<a rel="nofollow" class="external text" href="https://gitlab.postmarketos.org/postmarketOS/pmbootstrap/-/issues/60">pmbootstrap#60</a>).
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>flasher<span class="w"> </span>flash_rootfs<span class="w"> </span>--partition<span class="w"> </span>userdata
</pre></div>
<h4><span class="mw-headline" id="flash_kernel">flash_kernel</span></h4>
<p>For Androids, you will also need to flash a <a href="../en/Glossary.html#boot.img" class="mw-redirect" title="Boot.img">boot.img</a> (kernel + initramfs). Instruct pmbootstrap to do so with:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>flasher<span class="w"> </span>flash_kernel
</pre></div>
<p>Afterwards you should be able to restart your phone and postmarketOS should boot up. You are done with installing postmarketOS, congratulations!
</p>
<h3><span class="mw-headline" id="Inspecting_generated_files">Inspecting generated files</span></h3>
<p>If you want to conveniently access the files generated by <code>pmbootstrap install</code>, let pmbootstrap create a bunch of symlinks with <code>export</code>.
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span><span class="nb">export</span>
<span class="gp gp-VirtualEnv">(rootfs_lg-mako)</span> <span class="go">install device-lg-mako</span>
<span class="gp gp-VirtualEnv">(rootfs_lg-mako)</span> <span class="go">install postmarketos-mkinitfs</span>
<span class="gp gp-VirtualEnv">(rootfs_lg-mako)</span> <span class="go">mkinitfs lg-mako</span>
<span class="go">Export symlinks to: /tmp/postmarketOS-export</span>
<span class="go"> * boot.img (Fastboot compatible boot.img file, contains initramfs and kernel)</span>
<span class="go"> * initramfs (Initramfs)</span>
<span class="go"> * initramfs-extra (Extra initramfs files in /boot)</span>
<span class="go"> * vmlinuz (Linux kernel)</span>
<span class="go"> * lg-mako.img (Rootfs with partitions for /boot and /)</span>
</pre></div>
<p>Run the following to extract the generated initramfs:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>initfs<span class="w"> </span>extract
</pre></div>
<h2><span class="mw-headline" id="Development_actions">Development actions</span></h2>
<h3><span class="mw-headline" id="Building_packages">Building packages</span></h3>
<p>Build any package from <a href="../en/Pmaports.git.html" title="Pmaports.git">pmaports.git</a>, for example <code>main/hello-world</code>. pmbootstrap will automatically pick one of the architectures that the APKBUILD can be built for, preferably the native architecture of the PC running pmbootstrap, or if that's not possible, the device's architecture. You can explicitly specify an architecture with <code>--arch</code>.
</p>
<p>pmbootstrap uses cross compilers as described in detail in the <a href="../en/Pmbootstrap_Cross_Compiling.html" class="mw-redirect" title="Pmbootstrap: Cross Compiling">cross compiling</a> article.
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>build<span class="w"> </span>hello-world
<span class="gp">$ </span>pmbootstrap<span class="w"> </span>build<span class="w"> </span>--arch<span class="o">=</span>armv7<span class="w"> </span>hello-world
</pre></div>
<p>If you edited the sources of an <code>APKBUILD</code>, update its checksums:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>checksum<span class="w"> </span>hello-world
</pre></div>
<p>To find out where your local <code>APKBUILD</code> copies are saved (for instance, in order to modify them), run:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>config<span class="w"> </span>aports
</pre></div>
<p>If you modify anything in there, you will need to update its checksums and then re-build as above.
</p>
<p><br>
To build a package from Alpine, it needs to be forked from Alpine's aports.git first:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>aportgen<span class="w"> </span>--fork-alpine<span class="w"> </span>megapixels
<span class="go">Generate aport: megapixels</span>
<span class="go">Checkout aports.git branch: master</span>
<span class="go">*** pmaport generated: /home/user/.local/var/pmbootstrap/cache_git/pmaports/temp/megapixels</span>
<span class="go">NOTE: chroot is still active (use 'pmbootstrap shutdown' as necessary)</span>
<span class="go">DONE!</span>
<span class="gp">$ </span>pmbootstrap<span class="w"> </span>build<span class="w"> </span>megapixels
</pre></div>
<p>It is also possible to specify a local source tree for building a package.
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>git<span class="w"> </span>clone<span class="w"> </span>https://gitlab.postmarketos.org/postmarketOS/megapixels/
<span class="gp">$ </span>pmbootstrap<span class="w"> </span>build<span class="w"> </span>megapixels<span class="w"> </span>--src<span class="o">=</span>megapixels
</pre></div>
<p>Generate a template for a new package:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>newapkbuild<span class="w"> </span><span class="s2">"https://gitlab.postmarketos.org/postmarketOS/osk-sdl/-/archive/0.52/osk-sdl-0.52.tar.bz2"</span>
</pre></div>
<h4><span class="mw-headline" id="Entering_chroots">Entering chroots</span></h4>
<p>Enter the armv7 building chroot:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>chroot<span class="w"> </span>-b<span class="w"> </span>armv7
</pre></div>
<p>Run a command inside a chroot:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>chroot<span class="w"> </span>--<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nb">test</span>
</pre></div>
<p>Safely delete all chroots:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>zap
</pre></div>
<h3><span class="mw-headline" id="Running_CI_scripts_locally">Running CI scripts locally</span></h3>
<p>Before a patch with modifications to pmaports (or other postmarketOS projects, such as pmbootstrap itself) gets accepted, it needs to pass the CI scripts. These run automatically when you submit the patch, but of course it makes sense to run it beforehand on your machine locally. That way you can fix up your patches until it passes and you have a shorter test iteration time than you would have with pushing it to the server every time.
</p>
<p>Navigate to the git repository that you have modified and run the <code>ci</code> action.
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>ci
<span class="go">Available CI scripts (15):</span>
<span class="go">* flake8: lint CI related python scripts/tests</span>
<span class="go">* apkbuild-lint: run apkbuild-lint on modified APKBUILDs</span>
<span class="go">* wiki: verify devices are documented in the wiki</span>
<span class="go">* ec: editorconfig-checker: lint for trailing whitespaces etc.</span>
<span class="go">* pytest: lint with various python tests</span>
<span class="go">* commits: check pkgver/pkgrel bumps, amount of changed pkgs etc</span>
<span class="go">* kconfig: check all kernel configs with 'pmbootstrap kconfig check'</span>
<span class="go">* grep: check various bad patterns with grep</span>
<span class="go">* shellcheck: lint all shell scripts</span>
<span class="go">* build-riscv64: build modified packages for this architecture (slow)</span>
<span class="go">* build-x86: build modified packages for this architecture (slow)</span>
<span class="go">* build-armhf: build modified packages for this architecture (slow)</span>
<span class="go">* build-aarch64: build modified packages for this architecture (slow)</span>
<span class="go">* build-x86_64: build modified packages for this architecture (slow)</span>
<span class="go">* build-armv7: build modified packages for this architecture (slow)</span>
<span class="go">Which script? [all]: </span>
<span class="go">*** (1/15) RUNNING CI SCRIPT: .ci/flake8.sh [pmbootstrap chroot] ***</span>
<span class="go">...</span>
</pre></div>
<p>See the <a href="../en/Pmbootstrap_CI.html" title="Pmbootstrap CI">pmbootstrap CI</a> article for more information on this feature.
</p>
<h3><span class="mw-headline" id="Device_porting_assistance">Device porting assistance</span></h3>
<p>Analyze Android <a href="../en/Glossary.html#boot.img" class="mw-redirect" title="Boot.img">boot.img</a> files (also works with recovery OS images like TWRP):
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>bootimg_analyze<span class="w"> </span>~/Downloads/twrp-3.7.0_9-0-FP2.img<span class="w"> </span>
<span class="go">NOTE: You will be prompted for your sudo/doas password, so we can set up a chroot to extract and analyze your boot.img file</span>
<span class="gp gp-VirtualEnv">(native)</span> <span class="go">install file unpackbootimg</span>
<span class="go">Put these variables in the deviceinfo file of your device:</span>

<span class="go">deviceinfo_kernel_cmdline="console=ttyHSL0,115200,n8 androidboot.hardware=qcom user_debug=31 msm_rtb.filter=0x3b7 ehci-hcd.park=3 androidboot.bootdevice=msm_sdcc.1"</span>
<span class="go">deviceinfo_generate_bootimg="true"</span>
<span class="go">deviceinfo_bootimg_qcdt="true"</span>
<span class="go">deviceinfo_bootimg_mtk_mkimage="false"</span>
<span class="go">deviceinfo_bootimg_dtb_second="false"</span>
<span class="go">deviceinfo_flash_pagesize="2048"</span>
<span class="go">deviceinfo_flash_offset_base="0x00000000"</span>
<span class="go">deviceinfo_flash_offset_kernel="0x00008000"</span>
<span class="go">deviceinfo_flash_offset_ramdisk="0x02000000"</span>
<span class="go">deviceinfo_flash_offset_second="0x00f00000"</span>
<span class="go">deviceinfo_flash_offset_tags="0x01e00000"</span>

<span class="go">NOTE: chroot is still active (use 'pmbootstrap shutdown' as necessary)</span>
<span class="go">DONE!</span>
</pre></div>
<p>Check kernel configs:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>kconfig<span class="w"> </span>check
</pre></div>
<p>Edit a kernel config:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>kconfig<span class="w"> </span>edit<span class="w"> </span>--arch<span class="o">=</span>aarch64<span class="w"> </span>linux-postmarketos-allwinner
</pre></div>
<h3><span class="mw-headline" id="Repository_maintenance">Repository maintenance</span></h3>
<p>Generate cross-compiler aports based on the latest version from Alpine's aports:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span><span class="s2">"</span><span class="k">$(</span>pmbootstrap<span class="w"> </span>config<span class="w"> </span>work<span class="k">)</span><span class="s2">"</span>/cache_git/pmaports/cross
<span class="gp">$ </span>pmbootstrap<span class="w"> </span>aportgen<span class="w"> </span>binutils-*<span class="w"> </span>gcc-*
</pre></div>
<p>Manually rebuild package index:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>index
</pre></div>
<p>List pmaports that don't have a binary package:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>repo_missing<span class="w"> </span>--arch<span class="o">=</span>armhf<span class="w"> </span>--overview
</pre></div>
<p>Increase the pkgrel for each aport where the binary package has outdated dependencies (e.g. after soname bumps):
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>pkgrel_bump<span class="w"> </span>--auto
</pre></div>
<h3><span class="mw-headline" id="Logging">Logging</span></h3>
<p>pmbootstrap writes all log output, and each shell command it runs to <code>log.txt</code> inside the work dir. Use the following command to follow the log in a second terminal:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>log
</pre></div>
<p>Use <code>-v</code> on any action to get verbose logging:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>-v<span class="w"> </span>build<span class="w"> </span>hello-world
</pre></div>
<p>Parse a single deviceinfo and return it as JSON:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>deviceinfo_parse<span class="w"> </span>pine64-pinephone
</pre></div>
<p>Parse a single APKBUILD and return it as JSON:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>apkbuild_parse<span class="w"> </span>hello-world
</pre></div>
<p>Parse a package from an APKINDEX and return it as JSON:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>apkindex_parse<span class="w"> </span><span class="nv">$WORK</span>/cache_apk_x86_64/APKINDEX.8b865e19.tar.gz<span class="w"> </span>hello-world
</pre></div>
<h3><span class="mw-headline" id="Clean_up">Clean up</span></h3>
<p>The <code>zap</code> action is used to clean up files generated while using pmbootstrap:
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="go">Remove all chroots:</span>
<span class="gp">$ </span>pmbootstrap<span class="w"> </span>zap

<span class="go">Remove all chroots and built packages:</span>
<span class="gp">$ </span>pmbootstrap<span class="w"> </span>zap<span class="w"> </span>-p

<span class="go">See all options:</span>
<span class="gp">$ </span>pmbootstrap<span class="w"> </span>zap<span class="w"> </span>--help
</pre></div>
<p>Removing and recreating chroots is relatively fast, as the Alpine packages that get installed into the chroots are still cached. Sometimes users ask how to completely remove everything related to pmbootstrap (all caches and the config file), this would be done as follows. You can do this if your pmbootstrap install is completely broken for some reason, and then cleanly re-install it as described in this article.
</p>
<div class="mw-highlight mw-highlight-lang-shell-session mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$ </span>pmbootstrap<span class="w"> </span>shutdown
<span class="gp">$ </span><span class="nb">export</span><span class="w"> </span><span class="nv">WORK</span><span class="o">=</span><span class="k">$(</span>pmbootstrap<span class="w"> </span>config<span class="w"> </span>work<span class="k">)</span>
<span class="gp"># </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">"</span><span class="nv">$WORK</span><span class="s2">"</span>
<span class="gp">$ </span>rm<span class="w"> </span>-f<span class="w"> </span>~/.config/pmbootstrap_v3.cfg
<span class="gp">$ </span>rm<span class="w"> </span>-f<span class="w"> </span>~/.local/bin/pmbootstrap
</pre></div>
<div class="navigation" style="text-align:center;">
<span typeof="mw:File"><a href="../en/Pmbootstrap.html" title="Pmbootstrap"><img src="../Icon-numix-light-media-playback-start-rtl-symbolic.svg" decoding="async" width="25" height="25" class="mw-file-element"></a></span> <a href="../en/Pmbootstrap.html" title="Pmbootstrap">pmbootstrap</a>
</div>
<div class="navigation" style="text-align:center;">
<span typeof="mw:File"><a href="../en/Pmbootstrap_Installation.html" title="Pmbootstrap/Installation"><img src="../Icon-numix-light-media-playback-start-rtl-symbolic.svg" decoding="async" width="25" height="25" class="mw-file-element"></a></span> <a href="../en/Pmbootstrap_Installation.html" title="Pmbootstrap/Installation">Installation</a>
  | <a href="../en/Pmbootstrap_Troubleshooting.html" title="Pmbootstrap/Troubleshooting">Troubleshooting</a> <span typeof="mw:File"><a href="../en/Pmbootstrap_Troubleshooting.html" title="Pmbootstrap/Troubleshooting"><img src="../Icon-numix-light-media-playback-start-symbolic.svg" decoding="async" width="25" height="25" class="mw-file-element"></a></span>
</div>
</div>
</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Todo_Items.html" title="Category:Todo Items">Todo Items</a></li>
<li><a href="../en/Category:Guide.html" title="Category:Guide">Guide</a></li>
</ul>
</div></div>
				</div>
			</main>
			
		</div>
		<div class="mw-footer-container">
			
<footer id="footer" class="mw-footer" style="margin: 0">
	<ul id="footer-info">
	<li data-nosnippet="">Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=Pmbootstrap/Using_pmbootstrap&amp;oldid=75156">https://wiki.postmarketos.org/index.php?title=Pmbootstrap/Using_pmbootstrap&amp;oldid=75156</a>"</li>
<li id="footer-info-lastmod"> This page was last edited on 7 May 2025, at 20:35.</li>
	<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
<br>
</ul>

	<ul id="footer-places">
	<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html">Privacy policy</a></li>
	<li id="footer-places-about"><a href="../en/About_postmarketOS.html">About postmarketOS Wiki</a></li>
	<li id="footer-places-disclaimers"><a href="../en/PostmarketOS:General_disclaimer.html">Disclaimers</a></li>
</ul>

	<ul id="footer-icons" class="noprint">
	<li id="footer-copyrightico"><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31" loading="lazy"></a></li>
	<li id="footer-poweredbyico"><a href="https://www.mediawiki.org/" class="cdx-button cdx-button--fake-button cdx-button--size-large cdx-button--fake-button--enabled"><img src="../poweredby_mediawiki.svg" alt="Powered by MediaWiki" width="88" height="31" loading="lazy"></a></li>
</ul>

</footer>

		</div>
	</div> 
</div> 
<div class="vector-settings" id="p-dock-bottom">
	<ul></ul>
</div>
</body>
</html>
