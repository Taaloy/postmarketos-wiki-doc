<!DOCTYPE html>
<html class="client-nojs" dir="ltr" lang="en">
 <head>
  <meta charset="utf-8"/>
  <title>
   3D Acceleration - postmarketOS
  </title>
  <link href="../PostmarketOSWikiOffline.css" rel="stylesheet"/>
  <meta content="" name="ResourceLoaderDynamicStyles"/>
  <meta content="MediaWiki 1.34.2" name="generator"/>
  <link href="/favicon.ico" rel="shortcut icon"/>
  <link href="/opensearch_desc.php" rel="search" title="postmarketOS (en)" type="application/opensearchdescription+xml"/>
  <link href="https://wiki.postmarketos.org/api.php?action=rsd" rel="EditURI" type="application/rsd+xml"/>
  <link href="https://creativecommons.org/licenses/by-sa/4.0/" rel="license"/>
  <link href="/index.php?title=Special:RecentChanges&amp;feed=atom" rel="alternate" title="postmarketOS Atom feed" type="application/atom+xml"/>
 </head>
 <body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-3D_Acceleration rootpage-3D_Acceleration skin-vector action-view">
  <div class="mw-body" id="content" role="main" style="margin: 0">
   <a id="top">
   </a>
   <div class="mw-indicators mw-body-content">
   </div>
   <h1 class="firstHeading" id="firstHeading" lang="en">
    3D Acceleration
   </h1>
   <div class="mw-body-content" id="bodyContent">
    <div class="noprint" id="siteSub">
     From postmarketOS
    </div>
    <div id="contentSub">
    </div>
    <div id="jump-to-nav">
    </div>
    <a class="mw-jump-link" href="#mw-head">
     Jump to navigation
    </a>
    <a class="mw-jump-link" href="#p-search">
     Jump to search
    </a>
    <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en">
     <div class="mw-parser-output">
      <table class="wikitable">
       <tbody>
        <tr>
         <th>
          GPU
         </th>
         <th>
          Used in
         </th>
         <th>
          Driver
         </th>
         <th>
          Issues
         </th>
        </tr>
        <tr>
         <td>
          Adreno
         </td>
         <td>
          Qualcomm
         </td>
         <td>
          <a class="external text" href="https://github.com/freedreno/freedreno/wiki" rel="nofollow">
           freedreno
          </a>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          Vivante
         </td>
         <td>
          HiSilicon, Marvell, NXP i.MX, Rockchip
         </td>
         <td>
          <a class="external text" href="https://github.com/etnaviv" rel="nofollow">
           etnaviv
          </a>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          Mali
         </td>
         <td>
          Allwinner, Exynos, HiSilicon, Intel, MediaTek, Rockchip, Spreadtrum, ST-Ericsson, WonderMedia
         </td>
         <td>
          <a class="external text" href="https://gitlab.freedesktop.org/lima" rel="nofollow">
           lima
          </a>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          Mali T/G
         </td>
         <td>
          Allwinner, Exynos, HiSilicon, Intel, MediaTek, Rockchip, Spreadtrum
         </td>
         <td>
          <a class="external text" href="https://gitlab.freedesktop.org/panfrost" rel="nofollow">
           panfrost
          </a>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          PowerVR
         </td>
         <td>
          Allwinner, Apple, Exynos, Intel, MediaTek, Rockchip, Spreadtrum, TI OMAP
         </td>
         <td>
          <a class="external text" href="https://git.ti.com/cgit/graphics/omap5-sgx-ddk-um-linux/" rel="nofollow">
           sgx-ddk
          </a>
          ,
          <a class="external text" href="https://github.com/openpvrsgx-devgroup/linux_openpvrsgx" rel="nofollow">
           openpvrsgx
          </a>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          Tegra 2/3/4
         </td>
         <td>
          Nvidia
         </td>
         <td>
          <a class="external text" href="https://github.com/grate-driver" rel="nofollow">
           grate
          </a>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          Tegra K1/X1
         </td>
         <td>
          Nvidia
         </td>
         <td>
          <a class="external text" href="https://cgit.freedesktop.org/mesa/mesa/commit/?id=1755f608f5201e0a23f00cc3ea1b01edd07eb6ef" rel="nofollow">
           nouveau
          </a>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          VideoCore IV
         </td>
         <td>
          Broadcom
         </td>
         <td>
          <a class="external text" href="https://github.com/anholt/mesa/wiki/VC4" rel="nofollow">
           vc4
          </a>
         </td>
         <td>
         </td>
        </tr>
        <tr>
         <td>
          VideoCore V/VI
         </td>
         <td>
          Broadcom
         </td>
         <td>
          <a class="external text" href="https://gitlab.freedesktop.org/mesa/mesa" rel="nofollow">
           v3d
          </a>
         </td>
         <td>
         </td>
        </tr>
       </tbody>
      </table>
      <div class="toc" id="toc">
       <input class="toctogglecheckbox" id="toctogglecheckbox" role="button" style="display:none" type="checkbox"/>
       <div class="toctitle" dir="ltr" lang="en">
        <h2>
         Contents
        </h2>
        <span class="toctogglespan">
         <label class="toctogglelabel" for="toctogglecheckbox">
         </label>
        </span>
       </div>
       <ul>
        <li class="toclevel-1 tocsection-1">
         <a href="#Adreno">
          <span class="tocnumber">
           1
          </span>
          <span class="toctext">
           Adreno
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-2">
         <a href="#Vivante">
          <span class="tocnumber">
           2
          </span>
          <span class="toctext">
           Vivante
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-3">
         <a href="#Mali">
          <span class="tocnumber">
           3
          </span>
          <span class="toctext">
           Mali
          </span>
         </a>
         <ul>
          <li class="toclevel-2 tocsection-4">
           <a href="#Mali_T628">
            <span class="tocnumber">
             3.1
            </span>
            <span class="toctext">
             Mali T628
            </span>
           </a>
          </li>
         </ul>
        </li>
        <li class="toclevel-1 tocsection-5">
         <a href="#Tegra">
          <span class="tocnumber">
           4
          </span>
          <span class="toctext">
           Tegra
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-6">
         <a href="#VideoCore">
          <span class="tocnumber">
           5
          </span>
          <span class="toctext">
           VideoCore
          </span>
         </a>
        </li>
        <li class="toclevel-1 tocsection-7">
         <a href="#PowerVR">
          <span class="tocnumber">
           6
          </span>
          <span class="toctext">
           PowerVR
          </span>
         </a>
        </li>
       </ul>
      </div>
      <h2>
       <span class="mw-headline" id="Adreno">
        Adreno
       </span>
      </h2>
      <h2>
       <span class="mw-headline" id="Vivante">
        Vivante
       </span>
      </h2>
      <h2>
       <span class="mw-headline" id="Mali">
        Mali
       </span>
      </h2>
      <p>
       There are two projects for open source Mali drivers.
      </p>
      <p>
       The lima driver is for the Mali Utgard GPUs, specifically the Mali 400 (2008) and the Mali 450 (2012)
      </p>
      <p>
       The panfrost drivers is for the Mali Midgard and Bifrost GPUs, except T604, T628 and G71.
      </p>
      <p>
       Mali T720 and older are limited to OpenGL 2.1 and OpenGL ES 2.0.
      </p>
      <h3>
       <span class="mw-headline" id="Mali_T628">
        Mali T628
       </span>
      </h3>
      <p>
       We have patched
       <a class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/tree/master/device/testing/linux-postmarketos-exynos5" rel="nofollow">
        linux-postmarketos-exynos5
       </a>
       kernel, but it is still needed for users to build patched mesa themselves.
      </p>
      <p>
       1. Run
       <code>
        pmbootstrap aportgen --fork-alpine mesa
       </code>
       .
      </p>
      <p>
       2. Go to
       <code>
        ~/.local/var/pmbootstrap/cache_git/pmaports/temp/mesa
       </code>
       .
      </p>
      <p>
       3. Create a file e.g.
       <code>
        enable-mali-t628.patch
       </code>
       . Fill it with this:
      </p>
      <div class="mw-highlight mw-content-ltr" dir="ltr">
       <pre><span></span><span class="gh">diff --git a/src/panfrost/lib/pan_props.c b/src/panfrost/lib/pan_props.c</span>
<span class="gh">index 5884a826..22d610a8 100644</span>
<span class="gd">--- a/src/panfrost/lib/pan_props.c</span>
<span class="gi">+++ b/src/panfrost/lib/pan_props.c</span>
<span class="gu">@@ -53,6 +53,7 @@</span>
 
 /* Table of supported Mali GPUs */
 const struct panfrost_model panfrost_model_list[] = {
<span class="gi">+        MODEL(0x620, "T620", "T62x", NO_ANISO, {}),</span>
         MODEL(0x720, "T720", "T72x", NO_ANISO, { .no_hierarchical_tiling = true }),
         MODEL(0x750, "T760", "T76x", NO_ANISO, {}),
         MODEL(0x820, "T820", "T82x", NO_ANISO, { .no_hierarchical_tiling = true }),
</pre>
      </div>
      <p>
       4. Add this file to
       <code>
        source
       </code>
       variable in
       <code>
        APKBUILD
       </code>
       file.
      </p>
      <p>
       6. Increase
       <code>
        pkgrel
       </code>
       variable in
       <code>
        APKBUILD
       </code>
       file.
      </p>
      <p>
       7. Run
       <code>
        pmbootstrap checksum mesa
       </code>
       .
      </p>
      <p>
       8. Run
       <code>
        pmbootstrap build --arch armv7 mesa
       </code>
       .
      </p>
      <p>
       Next time you run
       <code>
        pmbootstrap install --sdcard /dev/sdX
       </code>
       , you will get patched mesa installed.
      </p>
      <table role="text container" style="color: inherit; background-color: #f6efe5; border: 1px solid #ac6600; margin: 4px 0; border-collapse: collapse;">
       <tbody>
        <tr>
         <td style="padding: 2px 0 2px 0.9em; text-align: center;">
          <span style="white-space: nowrap;">
           <img alt="Note" decoding="async" height="20" src="../Reference_icon.svg" srcset="../Reference_icon.svg 1.5x ../Reference_icon.svg 2x" title="Note" width="20"/>
          </span>
         </td>
         <td style="padding: 0.35em 0.9em; width: 100%;">
          <b>
           Note:
          </b>
          After installation, you may need to remove
          <code>
           /etc/modprobe.d/mali.conf
          </code>
          file.
         </td>
        </tr>
       </tbody>
      </table>
      <table role="text container" style="color: inherit; background-color: #f6efe5; border: 1px solid #ac6600; margin: 4px 0; border-collapse: collapse;">
       <tbody>
        <tr>
         <td style="padding: 2px 0 2px 0.9em; text-align: center;">
          <span style="white-space: nowrap;">
           <img alt="Note" decoding="async" height="20" src="../Reference_icon.svg" srcset="../Reference_icon.svg 1.5x ../Reference_icon.svg 2x" title="Note" width="20"/>
          </span>
         </td>
         <td style="padding: 0.35em 0.9em; width: 100%;">
          <b>
           Note:
          </b>
          Your mesa may be replaced with new unpatched one after an upgrade in Alpine. In this case, you will have to rebuild it again. Your device package also may be upgraded, then you will have to remove
          <code>
           /etc/modprobe.d/mali.conf
          </code>
          file again.
         </td>
        </tr>
       </tbody>
      </table>
      <h2>
       <span class="mw-headline" id="Tegra">
        Tegra
       </span>
      </h2>
      <p>
       The opensource reverse-engineered driver for Tegra GPUs is Grate (anagram of "tegra"). It seems to work with Tegra 2, 3 and 4 GPUs
      </p>
      <p>
       The newer Tegra K1 and X1 use an 3D core that can be used with Nouveau instead with a seperate tegra display driver to handle the I/O
      </p>
      <h2>
       <span class="mw-headline" id="VideoCore">
        VideoCore
       </span>
      </h2>
      <p>
       There are two projects for open source VideoCore drivers.
      </p>
      <p>
       The vc4 driver is for Broadcom VideoCore IV GPUs.
      </p>
      <p>
       The v3d driver is for Broadcom VideoCore V and VideoCore VI GPUs.
      </p>
      <h2>
       <span class="mw-headline" id="PowerVR">
        PowerVR
       </span>
      </h2>
      <p>
       There is no FOSS driver for the PowerVR SGX5 series GPUs found on OMAP3 and OMAP4 TI SoCs. However, these GPUs do work on the mainline kernel when the kernel is built with the open parts of the TI drivers, and you also run a patched Mesa. This work cannot be integrated into pmaports, but is maintained in a separate pmos-compatible repository,
       <a class="external free" href="https://gitlab.com/pvrports" rel="nofollow">
        https://gitlab.com/pvrports
       </a>
      </p>
     </div>
    </div>
    <div class="catlinks" data-mw="interface" id="catlinks">
     <div class="mw-normal-catlinks" id="mw-normal-catlinks">
      <a href="../Special:Categories.html" title="Special:Categories">
       Category
      </a>
      :
      <ul>
       <li>
        <a href="../en/Category:Technical_Reference.html" title="Category:Technical Reference">
         Technical Reference
        </a>
       </li>
      </ul>
     </div>
    </div>
    <div class="visualClear">
    </div>
   </div>
  </div>
  <div id="footer" role="contentinfo" style="margin: 0">
   <ul id="footer-info">
    <li>
     Retrieved from "
     <a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=3D_Acceleration&amp;oldid=30036">
      https://wiki.postmarketos.org/index.php?title=3D_Acceleration&amp;oldid=30036
     </a>
     "
    </li>
    <li id="footer-info-lastmod">
     This page was last edited on 8 August 2022, at 12:01.
    </li>
    <li id="footer-info-copyright">
     Content is available under
     <a class="external" href="https://creativecommons.org/licenses/by-sa/4.0/" rel="nofollow">
      Creative Commons Attribution-ShareAlike
     </a>
     unless otherwise noted.
    </li>
    <br/>
   </ul>
   <ul id="footer-places">
    <li id="footer-places-privacy">
     <a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">
      Privacy policy
     </a>
    </li>
    <li id="footer-places-about">
     <a class="mw-redirect" href="../en/About_postmarketOS.html" title="PostmarketOS:About">
      About postmarketOS
     </a>
    </li>
    <li id="footer-places-disclaimer">
     <a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">
      Disclaimers
     </a>
    </li>
    <li id="footer-places-mobileview">
     <a class="noprint stopMobileRedirectToggle" href="https://wiki.postmarketos.org/index.php?title=3D_Acceleration&amp;mobileaction=toggle_view_mobile">
      Mobile view
     </a>
    </li>
   </ul>
   <ul class="noprint" id="footer-icons">
    <li id="footer-copyrightico">
     <a href="https://creativecommons.org/licenses/by-sa/4.0/">
      <img alt="Creative Commons Attribution-ShareAlike" height="31" src="../cc-by-sa.png" width="88"/>
     </a>
    </li>
    <li id="footer-poweredbyico">
     <a href="https://www.mediawiki.org/">
      <img alt="Powered by MediaWiki" height="31" src="../poweredby_mediawiki_88x31.png" srcset="" width="88"/>
     </a>
    </li>
   </ul>
   <div style="clear: both;">
   </div>
  </div>
 </body>
</html>
