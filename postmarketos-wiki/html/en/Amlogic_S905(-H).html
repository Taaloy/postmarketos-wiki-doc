<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Amlogic S905(-H) - postmarketOS</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.34.2">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="postmarketOS (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Amlogic_S905_-H rootpage-Amlogic_S905_-H skin-vector action-view">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading" class="firstHeading" lang="en">Amlogic S905(-H)</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From postmarketOS</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Amlogic S905/S905-H</caption>
<tbody>
<tr class=""><td colspan="2" class="" style="text-align:center;">
<a href="../Amlogic-s905.webp" class="image"><img alt="Amlogic S905" src="../Amlogic-s905.webp.png" decoding="async" width="200" height="195" srcset="../300px-Amlogic-s905.webp.png 1.5x ../400px-Amlogic-s905.webp.png 2x"></a><br><span style="">Amlogic S905</span>
</td></tr>
<tr class="">
<th scope="row" style="text-align:left;">Manufacturer</th>
    <td class="" style="">
Amlogic</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Name</th>
    <td class="" style="">
S905/S905-H</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Architecture</th>
    <td class="" style="">
aarch64</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">CPU</th>
    <td class="" style="">
4x 2 GHz Cortex-A53</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPU</th>
    <td class="" style="">
Mali-450</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Year</th>
    <td class="" style="">
2015</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Process</th>
    <td class="" style="">
28nm</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Mainline</th>
    <td class="" style="">
yes</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="A link to a git{hub,lab} organisation/repo where development happens">Community Page</abbr></th>
    <td class="" style="">
<a rel="nofollow" class="external free" href="https://linux-meson.com/">https://linux-meson.com/</a>
</td>
</tr>
<tr><th colspan="2" class="" style="text-align:center;">Components</th></tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="SMP (bring up secondary CPU cores), CPU frequency scaling, CPUidle">CPU</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">UART</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="eMMC, SD cards, UFS, ...">Storage</abbr></th>
    <td class="" style="">
<div class="feature feature-partial">Partial</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">USB</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Display</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPU</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Pinctrl</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">IÂ²C</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Serial Peripheral Interface">SPI</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Audio</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Hardware-accelerated video de/encoding">Video</abbr></th>
    <td class="" style="">
<div class="feature feature-partial">Partial</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Thermal</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">WiFi</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Bluetooth</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Calls, SMS, Internet">Modem</abbr></th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPS</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Camera</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Suspend</th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<p><br>
The Amlogic S905, also known as Meson GXBB, is a fairly capable high-end media player SoC mainly used in Android set-top boxes.
It's capable of hardware decoding up to 4K@60fps, for multiple formats including H.264, AVS+, and 10-bit, and part of the 
S9 family of Amlogic chipsets. It has great U-Boot and mainline Linux support, making it a great candidate for building a 
set-top box or single-board computer powered by postmarketOS.
</p>
<p>There's also the Amlogic S905-H SoC, which merely just includes Dolby licenses. 
</p>
<h2><span class="mw-headline" id="Devices">Devices</span></h2>
<table class="cargoTable noMerge sortable">
<thead><tr>
<th class="field_Device">Device</th>
<th class="field_Codename">Codename</th>
<th class="field_Chipset">Chipset</th>
<th class="field_Mainline">Mainline</th>
<th class="field_booting">booting</th>
</tr></thead>
<tbody>
<tr>
<td class="field_Device"><a href="../en/Videostrong_KII_Pro_(videostrong-kii-pro).html" title="Videostrong KII Pro (videostrong-kii-pro)">Videostrong KII Pro</a></td>
<td class="field_Codename">videostrong-kii-pro</td>
<td class="field_Chipset">Amlogic S905</td>
<td class="field_Mainline">Y</td>
<td class="field_booting">Yes</td>
</tr>
</tbody>
</table>
<h2><span class="mw-headline" id="Boot_process">Boot process</span></h2>
<p><i>See: <a href="../en/Amlogic.html#Boot_process" title="Amlogic">Amlogic#Boot process</a></i>
</p>
<p>BL1 looks for a valid and signed BL2 at different offsets depending on the storage media:
</p>
<ul>
<li>On eMMC: offset 0, header and checksum from offset 528 to 623, BL2 and FIP at offset 4608 onwards</li>
<li>On an SD card: offset 512, header and checksum from offset 16 to 111, BL2 and FIP at offset 4096 onwards</li>
</ul>
<p>There's a bug where, because of the zero-offset requirement on eMMC, MBR structures cannot coexist, requiring tweaks to 
allow an MBR parition table to coexist. Further reading: <a rel="nofollow" class="external free" href="https://github.com/LibreELEC/amlogic-boot-fip/pull/8">https://github.com/LibreELEC/amlogic-boot-fip/pull/8</a>
</p>
<p>BL2 is signed by using a proprietary utility from Amlogic called <code>aml_encrypt_gxb</code>, for example:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> aml_encrypt_gxb --bootsig --input boot_new.bin --output u-boot.img
</pre></div>
<p>There's a replacement for <code>aml_encrypt_gxb</code> called <code>amlbootsig</code>. See <a rel="nofollow" class="external free" href="https://github.com/afaerber/meson-tools">https://github.com/afaerber/meson-tools</a>. For example, one could use:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> amlbootsig boot_new.bin u-boot.img
</pre></div>
<p>It has been confirmed to work on ODROID-C2 and <a href="../en/Videostrong_KII_Pro_(videostrong-kii-pro).html" title="Videostrong KII Pro (videostrong-kii-pro)">Videostrong KII Pro (videostrong-kii-pro)</a>.
</p>
<h2><span class="mw-headline" id="Status">Status</span></h2>
<h3><span class="mw-headline" id="GPU_and_hardware_acceleration">GPU and hardware acceleration</span></h3>
<p>Works. Lima is used for hardware acceleration.
</p>
<h3><span class="mw-headline" id="IR_RX">IR RX</span></h3>
<p>Works. Aftermarket and original IR remotes are expected to work out of the box (as seen on <a href="../en/Videostrong_KII_Pro_(videostrong-kii-pro).html" title="Videostrong KII Pro (videostrong-kii-pro)">Videostrong KII Pro (videostrong-kii-pro)</a>). Doesn't require much configuration.
</p>
<h3><span class="mw-headline" id="Audio">Audio</span></h3>
<p>Works. Requires a device tree patch on the <a href="../en/Videostrong_KII_Pro_(videostrong-kii-pro).html" title="Videostrong KII Pro (videostrong-kii-pro)">Videostrong KII Pro (videostrong-kii-pro)</a>,  that adds the appropriate nodes (else the card is never pobed) which is slowly making its way upstream. HDMI audio works, but S/PDIF is untested.
</p>
<h3><span class="mw-headline" id="Hardware_decoding_and_encoding">Hardware decoding and encoding</span></h3>
<p><i>See: <a rel="nofollow" class="external free" href="https://libera.irclog.whitequark.org/linux-amlogic/2023-02-10">https://libera.irclog.whitequark.org/linux-amlogic/2023-02-10</a></i>
</p>
<p>The Amlogic S905(-H) supports hardware decoding up to 4K@60fps, but in the mainline kernel it's limited to 1080p.
Downstream kernels relied on lengthy hacks to get it working up to 4K, and thus they were not included in the mainline 
kernel (to their defense Amlogic did successfully enable 4K playback on 3.x kernels).
</p>
<p>To get hardware encoding to work, refer to <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/4071?commit_id=1904830a206a2e886b547cfd9f7fdde61221c52f#note_1386135438">this issue comment</a>. It boils down to:
</p>
<ul>
<li>Making sure CONFIG_VIDEO_MESON_VDEC is set: <code>zcat /proc/config.gz | grep CONFIG_VIDEO_MESON_VDEC</code> (See <a rel="nofollow" class="external text" href="https://gitlab.com/postmarketOS/pmaports/-/merge_requests/4071">pmaports!4071</a>)</li>
<li>Build FFmpeg from <a rel="nofollow" class="external free" href="https://github.com/jc-kynesim/rpi-ffmpeg/commits/dev/4.4/rpi_import_1">https://github.com/jc-kynesim/rpi-ffmpeg/commits/dev/4.4/rpi_import_1</a>
</li>
</ul>
<p>There are some issues, however:
</p>
<ul>
<li>Needs non-free firmware</li>
<li>10-bit media (e.g. 4K) won't work</li>
<li>MPEG1/2/4 support is broken</li>
</ul>
<p>So sometimes you may want to resort to using software decoding.
</p>
<p>Hardware encoding doesn't work yet.
</p>
<h3><span class="mw-headline" id="Suspend">Suspend</span></h3>
<table role="text container" style="color: inherit; background-color: #f6efe5; border: 1px solid #ac6600; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Note" src="../Reference_icon.svg" decoding="async" title="Note" width="20" height="20" srcset="../Reference_icon.svg 1.5x ../Reference_icon.svg 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">Does the S905(-H) have the ability to sleep?</td>
</tr></tbody></table>
<h3><span class="mw-headline" id="DVB">DVB</span></h3>
<p>Needs a demux driver.
</p>
<h3><span class="mw-headline" id="OTG">OTG</span></h3>
<p>Untested. Broken according to linux-meson.com
</p>
<h3><span class="mw-headline" id="U-Boot">U-Boot</span></h3>
<p>Most (all?) set-top boxes based on this SoC use U-Boot as their primary bootloader, but mainline U-Boot has great support for this 
SoC. Running mainline U-Boot as the primary bootloader and as the secondary bootloader works fine. If you want to use U-Boot as the 
primary bootloader, refer to <a href="../en/Videostrong_KII_Pro_(videostrong-kii-pro)_U-Boot_as_primary_bootloader.html" title="Videostrong KII Pro (videostrong-kii-pro)/U-Boot as primary bootloader">Videostrong KII Pro (videostrong-kii-pro)/U-Boot as primary bootloader</a>, replacing mentions of <code>wetek-play2</code>
with your device or one close enough (which have RAM timings that work on your device). Please note that BL2 and BL30 are proprietary; there's an on-going 
effort on porting mainline Arm Trusted Firmware-A to <a href="../en/Videostrong_KII_Pro_(videostrong-kii-pro).html" title="Videostrong KII Pro (videostrong-kii-pro)">Videostrong KII Pro (videostrong-kii-pro)</a>.
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="../en/Videostrong_KII_Pro_(videostrong-kii-pro).html" title="Videostrong KII Pro (videostrong-kii-pro)">Videostrong KII Pro (videostrong-kii-pro)</a></li>
<li><a href="../en/Amlogic.html" title="Amlogic">Amlogic</a></li>
<li><a href="../en/Amlogic_Porting_set_top_boxes.html" title="Amlogic/Porting set top boxes">Port STBs to postmarketOS</a></li>
<li><a rel="nofollow" class="external text" href="https://git.vitali64.duckdns.org/misc/trustedfirmware-a.git/">Bare-bones WIP BL2 port (DON'T USE IT IF YOU'RE A REGULAR USER)</a></li>
<li>
<a rel="nofollow" class="external text" href="https://github.com/hardkernel/u-boot/tree/be63a06fa3d50dd2410e2e722d1f8bafe7370abd/arch/arm/cpu/armv8/common/firmware">Old BL2 sources from before Amlogic made it proprietary (based on TF-A code)</a>
<ul><li><a rel="nofollow" class="external text" href="https://git.vitali64.duckdns.org/archive/amlogic-bl2.git/">Mirror</a></li></ul>
</li>
</ul>
</div></div>
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../en/Category:Socs.html" title="Category:Socs">Socs</a></li></ul>
</div></div>
		<div class="visualClear"></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=Amlogic_S905(-H)&amp;oldid=44479">https://wiki.postmarketos.org/index.php?title=Amlogic_S905(-H)&amp;oldid=44479</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 27 May 2023, at 08:40.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../en/About_postmarketOS.html" class="mw-redirect" title="PostmarketOS:About">About postmarketOS</a></li>
								<li id="footer-places-disclaimer"><a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-mobileview"><a href="https://wiki.postmarketos.org/index.php?title=Amlogic_S905(-H)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"></a>					</li>
										<li id="footer-poweredbyico">
						<a href="https://www.mediawiki.org/"><img src="../poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="" width="88" height="31"></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		

</body>
</html>
