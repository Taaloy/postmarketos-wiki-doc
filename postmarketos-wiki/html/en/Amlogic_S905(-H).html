<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Amlogic S905(-H) - postmarketOS</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.34.2">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="postmarketOS (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Amlogic_S905_-H rootpage-Amlogic_S905_-H skin-vector action-view">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading" class="firstHeading" lang="en">Amlogic S905(-H)</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From postmarketOS</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Amlogic S905/S905-H</caption>
<tbody>
<tr class=""><td colspan="2" class="" style="text-align:center;">
<a href="../Amlogic-s905.webp" class="image"><img alt="Amlogic S905" src="../Amlogic-s905.webp.png" decoding="async" width="200" height="195" srcset="../300px-Amlogic-s905.webp.png 1.5x ../400px-Amlogic-s905.webp.png 2x"></a><br><span style="">Amlogic S905</span>
</td></tr>
<tr class="">
<th scope="row" style="text-align:left;">Manufacturer</th>
    <td class="" style="">
Amlogic</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Name</th>
    <td class="" style="">
S905/S905-H</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Architecture</th>
    <td class="" style="">
aarch64</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">CPU</th>
    <td class="" style="">
4x 2 GHz Cortex-A53</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPU</th>
    <td class="" style="">
Mali-450</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Year</th>
    <td class="" style="">
2015</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Process</th>
    <td class="" style="">
28nm</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Mainline</th>
    <td class="" style="">
yes</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="A link to a git{hub,lab} organisation/repo where development happens">Community Page</abbr></th>
    <td class="" style="">
<a rel="nofollow" class="external free" href="https://linux-meson.com/">https://linux-meson.com/</a>
</td>
</tr>
<tr><th colspan="2" class="" style="text-align:center;">Components</th></tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="SMP (bring up secondary CPU cores), CPU frequency scaling, CPUidle">CPU</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">UART</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="eMMC, SD cards, UFS, ...">Storage</abbr></th>
    <td class="" style="">
<div class="feature feature-partial">Partial</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">USB</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Display</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPU</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Pinctrl</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">IÂ²C</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Serial Peripheral Interface">SPI</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Audio</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Hardware-accelerated video de/encoding">Video</abbr></th>
    <td class="" style="">
<div class="feature feature-partial">Partial</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Thermal</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">WiFi</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Bluetooth</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Calls, SMS, Internet">Modem</abbr></th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPS</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Camera</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Suspend</th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<p><br>
The Amlogic S905, also known as Meson GXBB in the Linux kernel, is a high-end media player SoC mainly used in Android set top boxes.
It's capable of hardware decoding up to 4K@60fps, for multiple formats including H.264, AVS+, and 10-bit, and part of the 
S9 family of Amlogic chipsets.
</p>
<p>There's also the Amlogic S905-H SoC, which merely just includes Dolby licenses. 
</p>
<h2><span class="mw-headline" id="Devices">Devices</span></h2>
<table class="cargoTable noMerge sortable">
<thead><tr>
<th class="field_Device">Device</th>
<th class="field_Codename">Codename</th>
<th class="field_Chipset">Chipset</th>
<th class="field_Mainline">Mainline</th>
<th class="field_booting">booting</th>
</tr></thead>
<tbody>
<tr>
<td class="field_Device"><a href="../en/Videostrong_KII_Pro_(videostrong-kii-pro).html" title="Videostrong KII Pro (videostrong-kii-pro)">Videostrong KII Pro</a></td>
<td class="field_Codename">videostrong-kii-pro</td>
<td class="field_Chipset">Amlogic S905</td>
<td class="field_Mainline">Y</td>
<td class="field_booting">Yes</td>
</tr>
</tbody>
</table>
<h2><span class="mw-headline" id="Status">Status</span></h2>
<h3><span class="mw-headline" id="GPU_and_hardware_acceleration">GPU and hardware acceleration</span></h3>
<p>Works. Lima is used for hardware acceleration.
</p>
<h3><span class="mw-headline" id="IR_RX">IR RX</span></h3>
<p>Works. Be sure to include the right IR decoders into your kernel (e.g. NEC on <a href="../en/Videostrong_KII_Pro_(videostrong-kii-pro).html" title="Videostrong KII Pro (videostrong-kii-pro)">Videostrong KII Pro (videostrong-kii-pro)</a>), but otherwise doesn't require much configuration.
</p>
<h3><span class="mw-headline" id="Audio">Audio</span></h3>
<p>Works. Requires a device tree patch on the <a href="../en/Videostrong_KII_Pro_(videostrong-kii-pro).html" title="Videostrong KII Pro (videostrong-kii-pro)">Videostrong KII Pro (videostrong-kii-pro)</a>,  that adds the appropriate nodes (else the card is never pobed) which is slowly making its way upstream. HDMI audio works, but S/PDIF is untested.
</p>
<h3><span class="mw-headline" id="Hardware_decoding_and_encoding">Hardware decoding and encoding</span></h3>
<p>The Amlogic S905(-H) supports hardware decoding up to 4K@60fps, but in the mainline kernel it's limited to 1080p.
Downstream kernels relied on lengthy hacks to get it working up to 4K, and thus they were not included in the mainline 
kernel (to their defense Amlogic did successfully enable 4K playback on 3.x kernels).
</p>
<h3><span class="mw-headline" id="Suspend">Suspend</span></h3>
<table role="text container" style="color: inherit; background-color: #f6efe5; border: 1px solid #ac6600; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Note" src="../Reference_icon.svg" decoding="async" title="Note" width="20" height="20" srcset="../Reference_icon.svg 1.5x ../Reference_icon.svg 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">Does the S905(-H) have the ability to sleep?</td>
</tr></tbody></table>
<h3><span class="mw-headline" id="DVB">DVB</span></h3>
<p>Needs a demux driver.
</p>
<h3><span class="mw-headline" id="HDMI">HDMI</span></h3>
<p>Works.
</p>
<h3><span class="mw-headline" id="USB-A">USB-A</span></h3>
<p>Works.
</p>
<h3><span class="mw-headline" id="OTG">OTG</span></h3>
<p>Untested. Broken according to linux-meson.com
</p>
<table role="text container" style="color: inherit; background-color: #fdd1d1; border: 1px solid #b60000; margin: 4px 0; border-collapse: collapse;"><tbody><tr>
<td style="padding: 2px 0 2px 0.9em; text-align: center;"><span style="white-space: nowrap;"><img alt="Icon" src="../Red_warning_icon.svg" decoding="async" title="Icon" width="20" height="20" srcset="../Red_warning_icon.svg 1.5x ../Red_warning_icon.svg 2x"></span></td>
<td style="padding: 0.35em 0.9em; width: 100%;">
<b>TODO:</b> Add more sections...</td>
</tr></tbody></table>
<p><br>
</p>
<h2><span class="mw-headline" id="How_to_build_uboot_for_s905">How to build uboot for s905</span></h2>
<ul><li>Create a working directory</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> mkdir u-boot-kii-pro
<span class="gp">$</span> <span class="nb">cd</span> u-boot-kii-pro
</pre></div>
<ul><li>Build U-Boot</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> git clone https://git.vitali64.duckdns.org/misc/u-boot-kii-pro.git -b wip/kii-pro u-boot
<span class="gp">$</span> <span class="nb">cd</span> u-boot
<span class="gp">$</span> make videostrong-kii-pro_defconfig
<span class="gp">$</span> make <span class="c1"># CROSS_COMPILE=...</span>
<span class="gp">$</span> <span class="nb">cd</span> ..
</pre></div>
<h4><span class="mw-headline" id="Building_and_bundling_the_FIP">Building and bundling the FIP</span></h4>
<ul><li>Get the binaries required to build the FIP (BL2, BL31, ...) and meson-tools, and install ARM Trusted Firmware utilities</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> git clone https://github.com/LibreELEC/amlogic-boot-fip.git fip <span class="c1"># A repo that contain a lot of different fip for alot of different device.  </span>
<span class="gp">$</span> git clone https://github.com/afaerber/meson-tools.git
<span class="gp">#</span> apk add arm-trusted-firmware-tools <span class="c1"># if using an Alpine-based system</span>
</pre></div>
<ul><li>Build <code>amlbootsig</code> from meson-tools</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> meson-tools
<span class="gp">$</span> make amlbootsig
<span class="gp">$</span> <span class="nb">cd</span> ..
</pre></div>
<ul><li>Build the FIP</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> fip/wetek-play2 <span class="c1"># We use wetek-play2 as a example </span>
<span class="gp">$</span> cp ../../u-boot/u-boot.bin ./bl33.bin

<span class="gp">$</span> ./blx_fix.sh <span class="se">\</span>
           ./bl30.bin <span class="se">\</span>
           ./zero_tmp <span class="se">\</span>
           ./bl30_zero.bin <span class="se">\</span>
           ./bl301.bin <span class="se">\</span>
           ./bl301_zero.bin <span class="se">\</span>
           ./bl30_new.bin <span class="se">\</span>
           bl30

<span class="gp">$</span> dd <span class="k">if</span><span class="o">=</span>bl31.img <span class="nv">of</span><span class="o">=</span>bl31_noheader.bin <span class="nv">bs</span><span class="o">=</span><span class="m">1</span> <span class="nv">skip</span><span class="o">=</span><span class="m">496</span> <span class="nv">count</span><span class="o">=</span><span class="m">16</span>
<span class="gp">$</span> dd <span class="k">if</span><span class="o">=</span>bl31.img <span class="nv">of</span><span class="o">=</span>bl31_noheader.bin <span class="nv">skip</span><span class="o">=</span><span class="m">1</span>

<span class="gp">$</span> fiptool create <span class="se">\</span>
           --align 0x4000 <span class="se">\</span>
           --scp-fw ./bl30_new.bin <span class="se">\</span>
           --soc-fw ./bl31_noheader.bin <span class="se">\</span>
           --nt-fw  ./bl33.bin <span class="se">\</span>
                    ./fip.bin

<span class="gp">$</span> sed -i <span class="s1">'s/\x73\x02\x08\x91/\x1F\x20\x03\xD5/'</span> ./bl2.bin
<span class="gp">$</span> python3 ./acs_tool.py ./bl2.bin ./bl2_acs.bin ./acs.bin <span class="m">0</span>
<span class="gp">$</span> ./blx_fix.sh <span class="se">\</span>
           ./bl2_acs.bin <span class="se">\</span>
           ./zero_tmp <span class="se">\</span>
           ./bl2_zero.bin <span class="se">\</span>
           ./bl21.bin <span class="se">\</span>
           ./bl21_zero.bin <span class="se">\</span>
           ./bl2_new.bin <span class="se">\</span>
           bl2

<span class="gp">$</span> cat ./bl2_new.bin ./fip.bin &gt; ./boot_new.bin

<span class="gp">$</span> ../../meson-tools/amlbootsig <span class="se">\</span>
           --input  ./boot_new.bin
<span class="go">           --output ./u-boot.bin</span>

<span class="gp">$</span> dd <span class="k">if</span><span class="o">=</span>./u-boot.bin <span class="nv">of</span><span class="o">=</span>./u-boot.bin.gxbb <span class="nv">bs</span><span class="o">=</span><span class="m">512</span> <span class="nv">conv</span><span class="o">=</span>fsync
<span class="gp">$</span> dd <span class="k">if</span><span class="o">=</span>./u-boot.bin <span class="nv">of</span><span class="o">=</span>./u-boot.bin.gxbb <span class="nv">bs</span><span class="o">=</span><span class="m">512</span> <span class="nv">seek</span><span class="o">=</span><span class="m">9</span> <span class="nv">skip</span><span class="o">=</span><span class="m">8</span> <span class="nv">count</span><span class="o">=</span><span class="m">87</span> <span class="nv">conv</span><span class="o">=</span>fsync,notrunc
<span class="gp">$</span> dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>./u-boot.bin.gxbb <span class="nv">bs</span><span class="o">=</span><span class="m">512</span> <span class="nv">seek</span><span class="o">=</span><span class="m">8</span> <span class="nv">count</span><span class="o">=</span><span class="m">1</span> <span class="nv">conv</span><span class="o">=</span>fsync,notrunc
<span class="gp">$</span> dd <span class="k">if</span><span class="o">=</span>bl1.bin.hardkernel <span class="nv">of</span><span class="o">=</span>./u-boot.bin.gxbb <span class="nv">bs</span><span class="o">=</span><span class="m">512</span> <span class="nv">seek</span><span class="o">=</span><span class="m">2</span> <span class="nv">skip</span><span class="o">=</span><span class="m">2</span> <span class="nv">count</span><span class="o">=</span><span class="m">1</span> <span class="nv">conv</span><span class="o">=</span>fsync,notrunc
<span class="gp">$</span> ./aml_chksum u-boot.bin.gxbb
</pre></div>
<ul><li>Write to an SD card</li></ul>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span></span><span class="gp">#</span> <span class="nv">DEV</span><span class="o">=</span>mmcblk0 <span class="c1"># replace with your SD card device</span>
<span class="gp">#</span> dd <span class="k">if</span><span class="o">=</span>u-boot.bin.gxbb <span class="nv">of</span><span class="o">=</span>/dev/<span class="nv">$DEV</span> <span class="nv">conv</span><span class="o">=</span>fsync,notrunc <span class="nv">bs</span><span class="o">=</span><span class="m">512</span> <span class="nv">skip</span><span class="o">=</span><span class="m">1</span> <span class="nv">seek</span><span class="o">=</span><span class="m">1</span>
<span class="gp">#</span> dd <span class="k">if</span><span class="o">=</span>u-boot.bin.gxbb <span class="nv">of</span><span class="o">=</span>/dev/<span class="nv">$DEV</span> <span class="nv">conv</span><span class="o">=</span>fsync,notrunc <span class="nv">bs</span><span class="o">=</span><span class="m">1</span> <span class="nv">count</span><span class="o">=</span><span class="m">444</span>
</pre></div>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a href="../en/Videostrong_KII_Pro_(videostrong-kii-pro).html" title="Videostrong KII Pro (videostrong-kii-pro)">Videostrong KII Pro (videostrong-kii-pro)</a></li>
<li><a href="../en/Amlogic.html" title="Amlogic">Amlogic</a></li>
<li><a href="../en/Amlogic_Porting_set_top_boxes.html" title="Amlogic/Porting set top boxes">Port STBs to postmarketOS</a></li>
</ul>
</div></div>
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Socs.html" title="Category:Socs">Socs</a></li>
<li><a href="../en/Category:Todo_Items.html" title="Category:Todo Items">Todo Items</a></li>
</ul>
</div></div>
		<div class="visualClear"></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=Amlogic_S905(-H)&amp;oldid=43895">https://wiki.postmarketos.org/index.php?title=Amlogic_S905(-H)&amp;oldid=43895</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 29 April 2023, at 18:02.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../en/About_postmarketOS.html" class="mw-redirect" title="PostmarketOS:About">About postmarketOS</a></li>
								<li id="footer-places-disclaimer"><a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-mobileview"><a href="https://wiki.postmarketos.org/index.php?title=Amlogic_S905(-H)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"></a>					</li>
										<li id="footer-poweredbyico">
						<a href="https://www.mediawiki.org/"><img src="../poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="" width="88" height="31"></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		

</body>
</html>
