<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<title>Microsoft Surface Pro 4 (microsoft-surface-pro4) - postmarketOS</title>
<link rel="stylesheet" href="../PostmarketOSWikiOffline.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<meta name="generator" content="MediaWiki 1.34.2">
<link rel="shortcut icon" href="/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="postmarketOS (en)">
<link rel="EditURI" type="application/rsd+xml" href="https://wiki.postmarketos.org/api.php?action=rsd">
<link rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">
<link rel="alternate" type="application/atom+xml" title="postmarketOS Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom">
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Microsoft_Surface_Pro_4_microsoft-surface-pro4 rootpage-Microsoft_Surface_Pro_4_microsoft-surface-pro4 skin-vector action-view">
<div id="content" class="mw-body" role="main" style="margin: 0">
	<a id="top"></a>
	
	<div class="mw-indicators mw-body-content">
</div>

	<h1 id="firstHeading" class="firstHeading" lang="en">Microsoft Surface Pro 4 (microsoft-surface-pro4)</h1>
	
	<div id="bodyContent" class="mw-body-content">
		<div id="siteSub" class="noprint">From postmarketOS</div>
		<div id="contentSub"></div>
		
		
		
		<div id="jump-to-nav"></div>
		<a class="mw-jump-link" href="#mw-head">Jump to navigation</a>
		<a class="mw-jump-link" href="#p-search">Jump to search</a>
		<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Microsoft Surface Pro 4</caption>
<tbody>
<tr class=""><td colspan="2" class="" style="text-align:center;">
<a href="../Microsoft-surface-pro4.jpg" class="image"><img alt="" src="../Microsoft-surface-pro4.jpg" decoding="async" width="200" height="200" srcset="../300px-Microsoft-surface-pro4.jpg 1.5x ../400px-Microsoft-surface-pro4.jpg 2x"></a>
</td></tr>
<tr class="">
<th scope="row" style="text-align:left;">Manufacturer</th>
    <td class="" style="">
Microsoft</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Name</th>
    <td class="" style="">
Surface Pro 4</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Codename</th>
    <td class="" style="">
microsoft-surface-pro4</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Released</th>
    <td class="" style="">
2015</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Category</th>
    <td class="" style="">
testing</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Original software</th>
    <td class="" style="">
Windows 10 Pro</td>
</tr>
<tr><th colspan="2" class="" style="text-align:center;">Hardware</th></tr>
<tr class="">
<th scope="row" style="text-align:left;">CPU</th>
    <td class="" style="">
Intel Core <b>m3-6Y30</b> <br>Intel Core <b>i5-6300U</b> <br>Intel Core <b>i7-6650U</b>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Display</th>
    <td class="" style="">
12.3 inches 2736x1824 (267ppi) PixelSense display with 3:2 aspect ratio</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Storage</th>
    <td class="" style="">
PCI-Express SSD: 128 GB, 256 GB, 512 GB, or 1 TB</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Memory</th>
    <td class="" style="">
4 GB, 8 GB, or 16 GB</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Architecture</th>
    <td class="" style="">
x86_64</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Non-Android based device</th>
    <td class="" style="">
âœ”</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Features</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="After connecting the device with USB to your PC, you can connect to it via telnet (initramfs) or SSH (booted system).">USB Networking</abbr></th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="It is possible to flash the device with `pmbootstrap flasher`.">Flashing</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Touchscreen</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Display works. Ideally with sleep mode and brightness control.">Display</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">WiFi</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Full disk encryption and unlocking with osk-sdl.">FDE</abbr></th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Instead of a Linux kernel fork, it is possible to run mainline.">Mainline</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Charging and battery level reporting works">Battery</abbr></th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">3D Acceleration</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Audio playback, microphone, headset and buttons.">Audio</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Bluetooth</th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Camera</th>
    <td class="" style="">
<div class="feature feature-no">Broken</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">GPS</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Mobile data</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">SMS</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Calls</th>
    <td class="" style="">
<div class="feature feature-unavailable">Unavailable</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">USB OTG</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">NFC</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Sensors</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Auto screen rotation works in desktops e.g. Phosh or Plasma Mobile">Accelerometer</abbr></th>
    <td class="" style="">
<div class="feature feature-yes">Works</div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Magnetometer</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Ambient Light</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">Proximity</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;"><abbr title="Used as flip cover sensor, keyboard slide out sensor, etc.">Hall Effect</abbr></th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<table class="infobox" cellspacing="3" style="border-spacing: 3px; width:22em;">
<caption class="" style="">Misc</caption>
<tbody>
<tr class="">
<th scope="row" style="text-align:left;">Ir TX</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr class="">
<th scope="row" style="text-align:left;">TrustZone</th>
    <td class="" style="">
<div></div>
</td>
</tr>
<tr><td colspan="2" style="text-align:right"></td></tr>
</tbody>
</table>
<p><br>
</p>
<p>This port allows PostmarketOS to run normally on Microsoft Surface Pro 4 x86_64 hardware, as the device uses UEFI x64.
</p>
<p>Currently, tests are being carried out using the kernel linux-surface branch v5.10-surface, as well as the Kernel Mainline 5.10.57 LTS applying the respective linux-surface patches.
</p>
<p><b>Working:</b> WiFi, Sound, Bluetooth, Buttons, 3D Acceleration, Accelerometer.
</p>
<p><b>Not working:</b> Touch Screen.
</p>
<p><b>Not tested:</b> TypeCover, Pencil, since I do not own them. 
</p>
<h2><span class="mw-headline" id="Contributors">Contributors</span></h2>
<ul><li><a href="../User:Robante15.html" title="User:Robante15">robante15</a></li></ul>
<h2><span class="mw-headline" id="Users_owning_this_device">Users owning this device</span></h2>
<div style="-webkit-column-count: 2; -moz-column-count: 2; column-count: 2;"><ul style="margin-top: 0;">
<li><a href="../User:Robante15.html" title="User:Robante15">Robante15</a></li>
</ul></div>
<p><br>
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>The manufacturer is currently named <i>microsoft</i> in pmbootstrap. To install, do a normal SD card installation, and point it to the storage medium you need for the device (hard disk, USB thumbdrive, or SD card).
</p>
<p><code>pmbootstrap install --sdcard=/dev/sdX </code>
</p>
<p>To run it, it is necessary to <b>disable Secure Boot</b>, and preferably set the USB memory as the default device.
</p>
<h2><span class="mw-headline" id="Notes">Notes</span></h2>
<h3><span class="mw-headline" id="Bluetooth">Bluetooth</span></h3>
<p>In some desktop environments when trying to turn on the Bluetooth it will freeze, and will not perform any action, if that is the case run the following command in the terminal:
</p>
<p><code>sudo service bluetooth start</code>
</p>
<p>It works without problems in Phosh, but in Gnome you have to execute that command, I assume that in some other environments the same.
</p>
<h3><span class="mw-headline" id="Touch_Screen">Touch Screen</span></h3>
<p>To make the touch screen work it is necessary to compile and install <code><b>iptsd</b></code> <a rel="nofollow" class="external autonumber" href="https://github.com/linux-surface/iptsd">[1]</a> which according to its own definition is:
</p>
<p><i>"This is the userspace part of IPTS (Intel Precise Touch &amp; Stylus) for Linux."</i>
</p>
<p>The following dependencies must be installed in order to compile: 
</p>
<p><code>$ sudo apk add git build-base linux-headers meson inih inih-dev openrc-dev</code>
</p>
<p>Run the uinput module:
</p>
<p><code>$ sudo modprobe uinput</code>
</p>
<p>Use meson and ninja to build iptsd, and then run it with sudo.
</p>
<p><code>
$ git clone <a rel="nofollow" class="external free" href="https://github.com/linux-surface/iptsd">https://github.com/linux-surface/iptsd</a>
</code></p>
<p><code>$ cd iptsd
</code></p>
<p><code>$ nano meson_options.txt
</code>
</p>
<p>Here change <code>value: ['systemd']</code> to <code>value: ['openrc']</code> and save the file
</p>
<p><code>
$ meson build
</code></p>
<p><code>$ ninja -C build
</code></p>
<p><code>$ sudo ./build/iptsd
</code></p>
<p class="mw-empty-elt">
</p>
<p>With this the touch screen should already work, if the LTS Kernel is used with the respective linux-surface patches
</p>
<p>If you want to install it and have it run automatically as a service when the device starts up you need to run: 
</p>
<p><code>
$ sudo ninja -C build install
</code></p>
<p><code>$ sudo rc-update add iptsd
</code></p>
<p><code>$ sudo nano /etc/modules.load.d/uinput-module.conf
</code>
</p>
<p>Inside that file put the following: 
</p>
<p><code>
<i>#</i> Load uinput at boot
</code></p>
<p><code>uinput
</code>
</p>
<p>Save it with Ctrl + X and restart the device, it should load the touch at each boot
</p>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul>
<li><a rel="nofollow" class="external text" href="https://github.com/linux-surface/linux-surface">Collection of linux-surface patches required for the kernel</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/linux-surface/kernel">Kernel modified specifically for Microsoft Surface</a></li>
<li><a rel="nofollow" class="external text" href="https://github.com/linux-surface/iptsd">This is the userspace part of IPTS (Intel Precise Touch &amp; Stylus) for Linux.</a></li>
</ul>
</div></div>
		
		<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks">
<a href="../Special:Categories.html" title="Special:Categories">Categories</a>: <ul>
<li><a href="../en/Category:Devices.html" title="Category:Devices">Devices</a></li>
<li><a href="../en/Category:Not_booting.html" title="Category:Not booting">Not booting</a></li>
</ul>
</div></div>
		<div class="visualClear"></div>
		
	</div>
</div>


		<div id="footer" role="contentinfo" style="margin: 0">
						<ul id="footer-info">
								<li>Retrieved from "<a dir="ltr" href="https://wiki.postmarketos.org/index.php?title=Microsoft_Surface_Pro_4_(microsoft-surface-pro4)&amp;oldid=22831">https://wiki.postmarketos.org/index.php?title=Microsoft_Surface_Pro_4_(microsoft-surface-pro4)&amp;oldid=22831</a>"</li>
		
		<li id="footer-info-lastmod"> This page was last edited on 6 October 2021, at 22:59.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							<br>
</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../en/PostmarketOS:Privacy_policy.html" title="PostmarketOS:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../en/About_postmarketOS.html" class="mw-redirect" title="PostmarketOS:About">About postmarketOS</a></li>
								<li id="footer-places-disclaimer"><a href="../en/PostmarketOS:General_disclaimer.html" title="PostmarketOS:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-mobileview"><a href="https://wiki.postmarketos.org/index.php?title=Microsoft_Surface_Pro_4_(microsoft-surface-pro4)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="https://creativecommons.org/licenses/by-sa/4.0/"><img src="../cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"></a>					</li>
										<li id="footer-poweredbyico">
						<a href="https://www.mediawiki.org/"><img src="../poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="" width="88" height="31"></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		

</body>
</html>
